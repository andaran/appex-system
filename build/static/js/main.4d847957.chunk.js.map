{"version":3,"sources":["Components/projects/project-page/ProjectPage.jsx","Components/projects/app-navbar/AppNavbar.jsx","Components/main/main-page/MainPage.jsx","Components/main/super-button/SuperButton.jsx","tools/apiRequest/apiRequest.js","Components/main/system-apps/doc/DocApp.jsx","Components/main/widget/Widget.jsx","Components/main/system-apps/settings/InputMenus/ChangeUserName.jsx","Components/main/system-apps/settings/InputMenus/ChangeMail.jsx","Components/main/system-apps/settings/InputMenus/ChangePassword.jsx","Components/main/system-apps/settings/InputMenus/AccountInfo.jsx","Components/main/system-apps/settings/InputMenus/AppBlock.jsx","Components/main/system-apps/settings/InputMenus/AppsSettings.jsx","Components/main/system-apps/settings/InputMenus/UserSettings.jsx","Components/main/system-apps/settings/InputMenus/WidgetBlock.jsx","Components/main/system-apps/settings/InputMenus/Widgets.jsx","Components/main/system-apps/settings/InputMenus/GroupBlock.jsx","Components/main/system-apps/settings/InputMenus/Groups.jsx","Components/main/system-apps/settings/SettingsApp.jsx","Components/main/system-apps/store/AppDownload.jsx","Components/main/system-apps/store/StoreApp.jsx","Components/docs/code/Code.jsx","actions/userActions.js","Components/register/RegWindow/reg-window.jsx","Components/register/RegWrap/reg-wrap.jsx","Components/login/LogWindow/log-window.jsx","Components/login/LogWrap/log-wrap.jsx","Components/change_pass/ChangePassWindow/change-pass-window.jsx","Components/change_pass/ChangePassWrap/change-pass-wrap.jsx","Components/projects/project-card/ProjectCard.jsx","Components/projects/clone-card/CloneCard.jsx","Components/projects/room-card/RoomCard.jsx","Components/projects/projects-wrap/ProjectsWrap.jsx","Components/view/View.jsx","Components/lending/LendingMobile.jsx","Components/lending/LendingPC.jsx","Components/lending/Lending.jsx","Components/additComponents/Error404.jsx","reportWebVitals.js","serviceWorkerRegistration.js","Constants/userConstants.js","Constants/roomsConstants.js","store.js","Reducers/projectsReducer.js","Reducers/projectsModalReducer.js","Reducers/userReducer.js","Reducers/roomsReducer.js","Reducers/appStateReducer.js","index.js","Components/docs/image/Image.jsx","actions/projectsActions.js","Components/docs/doc-item/DocItem.jsx","actions/appStateActions.js","socketCore.js","tools/button/Button.jsx","tools/message/Message.jsx","Constants/projectsConstants.js","actions/roomsActions.js","actions/projectsModalActions.js","tools/alerts/alertsView.js","tools/LastApps/LastApps.js","Components/projects/navbar/Navbar.jsx","Components/main/app-icon/AppIcon.jsx","Components/projects/create-app-window/CreateAppWindow.jsx","Constants/newProjectModalConstants.js","tools/modal-wrap/ModalWrap.jsx","Constants/appStateConstants.js","Components/docs/title-item/TitleItem.jsx","Components/docs/title-wrap/TitleWrap.jsx","Components/docs/docs-page/DocsPage.jsx","Components/projects/code-editor/CodeEditor.jsx","Components/additComponents/PrivateRoute.jsx","Components/projects/error-404/Error404.jsx","tools/interpreter/Interpreter.jsx","Components/docs/main-doc/MainDoc.jsx"],"names":["ProjectPage","props","host","window","location","href","split","id","length","mouseDown","hotkey","downloadFlag","appJS","playJSFlag","state","mode","page","message","emulator","positionMode","resizeMode","fullscreenMode","width","marginLeft","keydown","bind","changeEmulatorPositionMode","changeEmulatorResizeMode","changeEmulatorFullscreenMode","moveMouseDown","resizeMouseDown","resizeEmulator","mouseUp","moveEmulator","settings","download","upload","undefined","this","projects","projectsFulfilled","projectsIsFetching","projectsError","className","src","alt","document","documentElement","offsetWidth","height","offsetHeight","type","text","underText","center","app","find","elem","modal","timeout","setTimeout","Date","now","time","setState","status","for","onMouseUp","style","frameBorder","onClick","icon","faThumbtack","onMouseDown","faArrowsAlt","faLock","faArrowsAltH","faExpandArrowsAlt","open","faExternalLinkAlt","getElementById","contentWindow","reload","faSyncAlt","code","html","appId","css","js","fetchProjects","console","log","addEventListener","pressed","Set","settingsButton","onclick","changeAppState","socket","listeners","connectToDevRoom","AlertsView","user","alerts","fetchUser","run","removeEventListener","oldState","body","userSelect","querySelector","classList","add","transition","remove","event","left","pageX","newWidth","switchModalState","releaseCode","JSON","stringify","fetch","method","headers","then","res","json","catch","err","finally","localStorage","setItem","updateAppCode","altKey","preventDefault","ctrlKey","value","process","nextTick","getItem","fullscreenElement","exitFullscreen","requestFullscreen","appNumber","map","project","index","changedProjects","parse","changeProjects","slice","React","Component","connect","store","data","isFetching","error","fulfilled","userData","appState","appType","projectsModal","dispatch","changedState","AppNavbar","loadState","roomId","roomPass","newUserSettings","setting","push","buttonIcon","backgroundColor","color","Icons","title","placeholder","autoComplete","to","io","MainPage","currentPage","touchStart","touchMove","lastMove","moveTo","interpreters","fullScreen","widgets","resize","updateWidgets","updateTheme","apps","key","prefix","systemApps","groups","sortedGroups","groupsMarkup","name","groupName","category","includes","sortedApp","filter","item","createGroup","fullScreenIcon","faExpand","faCompress","closeTimeout","devMode","nodeList","querySelectorAll","Array","from","forEach","node","display","interpreter","setStatusBar","config","contentDocument","theme","getAttribute","faPlus","data-state","multiTasking","device","userDeviceArray","platform","navigator","userAgent","i","test","systemWindow","systemBackground","marginRight","userSettings","states","widget","emit","currentState","request","property","prop","on","Promise","all","statuses","widgetStatus","wrap","background","visibility","group","description","setTheme","color1","color2","setAttribute","newState","params","SuperButton","startTime","touch","wrapStart","wrapGo","wrapTo","touchEnd","close","wrapTouchStart","wrapTouchEnd","wrapTouchMove","faTimes","button","vibrate","transform","touches","top","pageY","list","right","url","DocApp","overflowY","Widget","ChangeUserName","errs","send","faUser","username","changeUsername","Error","faEnvelope","email","changeMail","oldPassword","newPassword","changePassword","passwords","componentDidMount","updateDevModeBtn","deleteAccount","logOut","btn","innerText","readOnly","faAt","faIdBadge","faUserTag","faTrashAlt","AppBlock","faKey","faLayerGroup","pass","userRequest","viewTheme","number","alert","WidgetBlock","delete","faCode","faThermometerHalf","faAlignLeft","splice","Widgets","create","GroupsBlock","des","Groups","SettingsApp","menu","closeButton","faArrowLeft","allMenus","inputMenu","faMobile","faUserCog","faBoxes","faInfoCircle","AppDownload","clone","cloneApp","forceUpdate","StoreApp","search","lastApps","findApps","focusIn","focusOut","typing","faCircleNotch","faSearch","input","Code","children","payload","port","RegWindow","emailCode","password","codeID","btnClicked","sendCode","codeRequest","codeButton","faPaperPlane","response","RegWrap","replace","LogWrap","ChangePass","ProjectCard","args","mousemove","mouseleave","cardWrap","card","targetCords","getBoundingClientRect","clientX","clientY","marginTop","margin","CloneCard","cloneSettings","clonedFrom","RoomCard","deleteRoom","saveRoom","deleteFlag","faCheckCircle","faSave","fetchRooms","ProjectsWrap","cloneParams","newProject","newRoom","clones","rooms","roomsIsFetching","roomsError","clonedApps","hr","Message","Navbar","path","projectCard","handleEvent","target","roomCard","roomsFulfilled","iconWrap","xCord","yCord","View","errMessage","pathname","faPlay","Interpreter","Lending","deltaY","deltaTouch","oldScreenX","swipe","swipeEnd","clientWidth","faFire","faWrench","faUsers","faShip","screenX","delta","wheel","clientHeight","wheelDeltaY","Math","floor","RegExp","Error404","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","FETCH_USER_PENDING","FETCH_USER_FULFILLED","FETCH_USER_REJECTED","FETCH_ROOMS_PENDING","FETCH_ROOMS_FULFILLED","FETCH_ROOMS_REJECTED","middleware","applyMiddleware","createPromise","reducers","combineReducers","action","PROJECTS","SWITCH_MODAL_STATE","USER","cloneDeep","ROOMS","APP","createStore","ReactDOM","render","exact","component","Register","Login","DocsPage","PrivateRoute","URL","origin","contentType","get","indexOf","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration","Image","DocItem","App","roomSettings","update","init","start","awaitResponse","room","testPingTime","pingTime","EventEmitter","Button","size","faCheck","FETCH_PROJECTS_PENDING","FETCH_PROJECTS_FULFILLED","FETCH_PROJECTS_REJECTED","CHANGE_PROJECTS","mess","check","step","end","chains","alertChains","chain","conf","createElement","innerHTML","append","e","cords","popUp","corner","deltaHeight","y","bottom","resolve","sendAlert","sendPopUp","btnNext","btnCancel","next","cancel","ans","shift","AppIcon","iconClicked","CreateAppWindow","deleteConfirm","tap","changeIcon","deleteActiveIcon","elementMouseOver","elementMouseLeave","closeWindow","validate","saveApp","deleteApp","icons","keyIndex","buttons","confirm","reg","toLowerCase","data-icon","onMouseOver","onMouseLeave","storeVisibility","checked","substring","getElementsByClassName","downloadAvailable","innerHtml","settingsBody","CHANGE_APP_STATE","TitleItem","postfix","TitleWrap","MainDoc","emmet","CodeMirror","CodeEditor","oldValue","autocompleteSymbolsHTML","autocompleteSymbolsCSS","autocompleteSymbolsJS","linesLength","awaitKey","autocomplete","save","keys","minimapSettings","scale","editor","fromTextArea","lineNumbers","lineWrapping","matchBrackets","indentUnit","extraKeys","minimap","preview","setValue","getValue","line","doc","getCursor","ch","findChar","exp","execCommand","noAutocompleteFlag","ok","renderApp","appSourceCode","preset","presetText","replaceAll","finallyCode","promises","iconArgs","arg","iconName","presetHtml","codeArr","blockOfCode","codes","buttonItems","move","hash","scroll","wrapTop"],"mappings":"uaAsDMA,E,kDACJ,WAAYC,GAAQ,IAAD,uBACjB,cAAMA,IAGDC,KAAOC,OAAOC,SAASC,KAAKC,MAAM,YAAY,GAEnD,IAAIC,EAAKJ,OAAOC,SAASC,KAAKC,MAAM,KANnB,MAOK,KAAtBC,EAAGA,EAAGC,OAAS,GAAY,EAAKD,GAAKA,EAAGA,EAAGC,OAAS,GAAK,EAAKD,GAAKA,EAAGA,EAAGC,OAAS,GAClF,EAAKC,WAAY,EACjB,EAAKC,QAAS,EACd,EAAKC,cAAe,EACpB,EAAKC,MAAQ,KACb,EAAKC,YAAa,EAElB,EAAKC,MAAQ,CACXC,KAAM,MACNC,KAAM,EACNC,SAAS,EACTC,SAAU,CACRC,cAAc,EACdC,YAAY,EACZC,gBAAgB,EAChBC,MAAO,IACPC,WAAY,KAOhB,EAAKC,QAAU,EAAKA,QAAQC,KAAb,gBAGf,EAAKC,2BAA6B,EAAKA,2BAA2BD,KAAhC,gBAClC,EAAKE,yBAA2B,EAAKA,yBAAyBF,KAA9B,gBAChC,EAAKG,6BAA+B,EAAKA,6BAA6BH,KAAlC,gBACpC,EAAKI,cAAgB,EAAKA,cAAcJ,KAAnB,gBACrB,EAAKK,gBAAkB,EAAKA,gBAAgBL,KAArB,gBACvB,EAAKM,eAAiB,EAAKA,eAAeN,KAApB,gBACtB,EAAKO,QAAU,EAAKA,QAAQP,KAAb,gBACf,EAAKQ,aAAe,EAAKA,aAAaR,KAAlB,gBACpB,EAAKS,SAAW,EAAKA,SAAST,KAAd,gBAGhB,EAAKU,SAAW,EAAKA,SAASV,KAAd,gBAGhB,EAAKW,OAAS,EAAKA,OAAOX,KAAZ,gBA/CG,E,qDAkDT,IAAD,OAGP,QAA4BY,IAAxBC,KAAKrC,MAAMsC,WACsB,IAAjCD,KAAKrC,MAAMuC,mBACXF,KAAKrC,MAAMwC,oBACXH,KAAKrC,MAAMyC,cACb,OACE,qBAAKC,UAAU,eAAf,SACE,qBAAKA,UAAU,UAAf,SACE,qBAAKC,IAAI,oBAAoBC,IAAI,QAAQF,UAAU,qBAO3D,IAAMrB,EAAQwB,SAASC,gBAAgBC,YACjCC,EAASH,SAASC,gBAAgBG,aACxC,GAAI5B,EAAQ,MAAQ2B,EAAS,IAC3B,OACE,cAAC,IAAD,CAASE,MAAM,EACNC,KAAK,4TACLC,UAAU,uWACVC,QAAQ,IAYrB,GAPmC,IAA/BhB,KAAKrC,MAAMsC,SAAS/B,OACtB8B,KAAKiB,IAAMjB,KAAKrC,MAAMsC,SAASiB,MAAK,SAAAC,GAAI,OAAIA,EAAKlD,KAAO,EAAKA,MAE7D+B,KAAKiB,KAAM,GAITjB,KAAKiB,IACP,OACE,cAAC,IAAD,IAKJ,IAWIG,EAXAzC,EAAU,KAcd,OAbIqB,KAAKxB,MAAMG,UACbA,EAAU,cAAC,IAAD,eAAcqB,KAAKxB,MAAMG,UACnCqB,KAAKqB,QAAUC,YAAW,WACpBC,KAAKC,MAAQ,EAAKhD,MAAMG,QAAQ8C,KAAO,MACzC,EAAKC,SAAS,CAAE/C,SAAS,MAE1B,MAKoByC,EAAzBpB,KAAKrC,MAAMyD,MAAMO,OAAgB,cAAC,IAAD,CAAMC,IAAM,cAAC,IAAD,eAAa5B,KAAKiB,QAAuB,KAGpF,sBACEZ,UAAU,yBACVwB,UAAY7B,KAAKN,QAFnB,UAGIf,EACAyC,EACF,cAAC,IAAD,CAAWH,IAAQjB,KAAKiB,MACxB,sBACEZ,UAAS,mDACcL,KAAKxB,MAAMI,SAASC,aADlC,6CAEgBmB,KAAKxB,MAAMI,SAASG,eAFpC,KAGT+C,MAAS,CACP9C,MAAOgB,KAAKxB,MAAMI,SAASI,MAAQ,KACnCC,WAAYe,KAAKxB,MAAMI,SAASK,WAAa,MAE/ChB,GAAK,WARP,UASE,qBAAKoC,UAAU,qBAAf,SACE,wBACEC,IAAG,UAAMN,KAAKpC,KAAX,gBAAyBoC,KAAK/B,GAA9B,iBACH8D,YAAY,IACZ9D,GAAG,aAEP,sBAAKoC,UAAU,gBAAf,UACE,qBACEA,UAAS,gDAA4CL,KAAKxB,MAAMI,SAASC,cACzEmD,QAAUhC,KAAKZ,2BAFjB,SAGE,cAAC,IAAD,CAAiB6C,KAAOC,cAAc7B,UAAU,8BAElD,qBACEA,UAAU,qBACV8B,YAAcnC,KAAKT,cAFrB,SAGE,cAAC,IAAD,CAAiB0C,KAAOG,cAAc/B,UAAU,8BAElD,qBAAKA,UAAS,gDAA4CL,KAAKxB,MAAMI,SAASE,YACzEkD,QAAUhC,KAAKX,yBADpB,SAEE,cAAC,IAAD,CAAiB4C,KAAOI,SAAShC,UAAU,8BAE7C,qBAAKA,UAAU,qBACV8B,YAAcnC,KAAKR,gBADxB,SAEE,cAAC,IAAD,CAAiByC,KAAOK,eAAejC,UAAU,8BAEnD,qBAAKA,UAAS,gDAA4CL,KAAKxB,MAAMI,SAASG,gBACzEiD,QAAUhC,KAAKV,6BADpB,SAEE,cAAC,IAAD,CAAiB2C,KAAOM,oBAAoBlC,UAAU,8BAExD,qBAAKA,UAAS,qBACT2B,QAAS,WACPnE,OAAO2E,KAAP,kBAAwB,EAAKvE,GAA7B,iBACE,WACA,yBAJT,SAME,cAAC,IAAD,CAAiBgE,KAAOQ,oBAAoBpC,UAAU,8BAExD,qBAAKA,UAAS,qBACT2B,QAAS,WACPxB,SAASkC,eAAe,UACrBC,cAAc7E,SAAS8E,QAAO,IAHxC,SAKE,cAAC,IAAD,CAAiBX,KAAOY,YAAYxC,UAAU,oCAIpD,sBACEA,UAAS,uBAAmBL,KAAKxB,MAAMC,KAA9B,yBAAqDuB,KAAKxB,MAAMC,KAAhE,YAA0EuB,KAAKxB,MAAME,MAC9FT,GAAG,eAFL,UAGE,cAAC,IAAD,CACEA,GAAG,2BACH4C,KAAK,eACLlC,QAAQ,OACRmE,KAAO9C,KAAKiB,IAAI6B,KAAKC,KACrBC,MAAQhD,KAAK/B,GAEbQ,KAAOuB,KAAKxB,MAAMC,MADZuB,KAAKxB,MAAMC,KAAO,MAE1B,cAAC,IAAD,CACER,GAAG,kBACH4C,KAAK,MACLlC,QAAQ,MACRmE,KAAO9C,KAAKiB,IAAI6B,KAAKG,IACrBD,MAAQhD,KAAK/B,GAEbQ,KAAOuB,KAAKxB,MAAMC,MADZuB,KAAKxB,MAAMC,KAAO,MAE1B,cAAC,IAAD,CACER,GAAG,yBACH4C,KAAK,aACLlC,QAAQ,aACRmE,KAAO9C,KAAKiB,IAAI6B,KAAKI,GACrBF,MAAQhD,KAAK/B,GAEbQ,KAAOuB,KAAKxB,MAAMC,MADZuB,KAAKxB,MAAMC,KAAO,c,0CAOb,IAAD,OACbuB,KAAKrC,MAAMuC,mBAAsBF,KAAKrC,MAAMwC,oBAC/CH,KAAKrC,MAAMwF,gBAGTnD,KAAKrC,MAAMyC,gBACbgD,QAAQC,IAAI,8MACZrD,KAAK0B,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAOC,KAAM,iNAI/CN,SAAS8C,iBAAiB,UAAWtD,KAAKd,SAC1Cc,KAAKuD,QAAU,IAAIC,IAEnB,IAAMC,EAAiBjD,SAASkC,eAAe,yBACxB,OAAnBe,GACFnC,YAAW,kBAAMmC,EAAeC,QAAU,EAAK9D,WAAU,KAI3DI,KAAKrC,MAAMgG,eAAe,CAAEnF,MAAO,SAAUqC,KAAM,KAAM5C,GAAI+B,KAAK/B,KAG9D2F,IAAOC,UAAU,iBAAiB3F,OAAS,KAG/C4F,YAAiB9D,KAAK/B,IAMP,IAAI8F,IAAW/D,KAAKrC,MAAMqG,KAAKC,OAAQ,cAAejE,KAAKrC,MAAMuG,WACzEC,S,6CAIP3D,SAAS4D,oBAAoB,YAAapE,KAAKL,cAC/Ca,SAAS4D,oBAAoB,UAAWpE,KAAKd,W,mDAQ7C,IAAMmF,EAAWrE,KAAKxB,MAAMI,SACxByF,EAAStF,gBACbiB,KAAK0B,SAAS,CAAE9C,SAAS,2BAAKyF,GAAN,IAAgBxF,cAAemB,KAAKxB,MAAMI,SAASC,mB,iDAI3E,IAAMwF,EAAWrE,KAAKxB,MAAMI,SACxByF,EAAStF,kBACe,IAAxBsF,EAASvF,WACXkB,KAAK0B,SAAS,CAAE9C,SAAS,2BAAKyF,GAAN,IAAgBvF,YAAY,EAAOE,MAAO,QAElEgB,KAAK0B,SAAS,CAAE9C,SAAS,2BAAKyF,GAAN,IAAgBvF,YAAY,S,qDAKtD,IAAMuF,EAAWrE,KAAKxB,MAAMI,SAC5BoB,KAAK0B,SAAS,CAAE9C,SAAS,2BAAKyF,GAAN,IAAgBtF,gBAAiBiB,KAAKxB,MAAMI,SAASG,qB,sCAI7EiB,KAAK7B,WAAY,EAEjBqC,SAAS8C,iBAAiB,YAAatD,KAAKL,cAC5Ca,SAAS8D,KAAKxC,MAAMyC,WAAa,OACjC/D,SAASgE,cAAc,uBACpBC,UAAUC,IAAI,6BACjBlE,SAASkC,eAAe,YAAYZ,MAAM6C,WAAa,O,wCAIvD3E,KAAK7B,WAAY,EAEjBqC,SAAS8C,iBAAiB,YAAatD,KAAKP,gBAC5Ce,SAAS8D,KAAKxC,MAAMyC,WAAa,OACjC/D,SAASgE,cAAc,uBACpBC,UAAUC,IAAI,6BACjBlE,SAASkC,eAAe,YAAYZ,MAAM6C,WAAa,O,gCAInD3E,KAAK7B,YACP6B,KAAK7B,WAAY,EACjBqC,SAAS4D,oBAAoB,YAAapE,KAAKL,cAC/Ca,SAAS4D,oBAAoB,YAAapE,KAAKP,gBAC/Ce,SAAS8D,KAAKxC,MAAMyC,WAAa,OACjC/D,SAASgE,cAAc,uBACpBC,UAAUG,OAAO,6BACpBpE,SAASkC,eAAe,YAAYZ,MAAM6C,WAAa,U,mCAI9CE,GACX,IAAMR,EAAWrE,KAAKxB,MAAMI,SAC5B,GAAIoB,KAAK7B,YAAckG,EAAStF,eAAgB,CAC9C,IAAM+F,EAAOD,EAAME,MAAQV,EAASrF,MAAQ,GAC5CgB,KAAK0B,SAAS,CAAE9C,SAAS,2BAAMyF,GAAP,IACtBpF,WAAY6F,EACZjG,cAAc,WAGhB2B,SAAS4D,oBAAoB,YAAapE,KAAKL,gB,qCAIpCkF,GACb,IAAMR,EAAWrE,KAAKxB,MAAMI,SAC5B,GAAIoB,KAAK7B,YAAckG,EAAStF,eAAgB,CAC9C,IAAMiG,EAAWH,EAAME,MAAQV,EAASpF,WAAa,GACrDe,KAAK0B,SAAS,CAAE9C,SAAS,2BAAMyF,GAAP,IACtBxF,cAAc,EACdC,YAAY,EACZE,MAAOgG,WAGTxE,SAAS4D,oBAAoB,YAAapE,KAAKP,kB,iCAKjDO,KAAKrC,MAAMsH,iBAAiBjF,KAAKrC,MAAMyD,MAAMO,OAAQ,S,+BAG7C,IAAD,OACDmB,EAAO9C,KAAKiB,IAAI6B,KAChBoC,EAAclF,KAAKiB,IAAIiE,YACvBjH,EAAK+B,KAAKiB,IAAIhD,GAGdqG,EAAOa,KAAKC,UAAU,CAAEtC,OAAMoC,cAAajH,OACjDoH,MAAM,yBAA0B,CAC9BC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OACP,EAAKD,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAMC,KAAM,6EAAkBW,KAAMF,KAAKC,SAEzE,EAAKE,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAOC,KAAM,yFAAoBW,KAAMF,KAAKC,YAE7EmE,OAAM,SAAAC,GACP,EAAKlE,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAOC,KAAM,yFAAoBW,KAAMF,KAAKC,YAC3EqE,SAAQ,WACTC,aAAaC,QAAQ,UAAY9H,EAAIkH,KAAKC,UAAU,EAAKnE,MACzD6E,aAAaC,QAAQ,OAAQZ,KAAKC,UAAU,EAAKzH,MAAMqG,OACvD1C,YAAW,kBAAMwE,aAAaC,QAAQ,UAAY9H,EAAI,QAAO,KAC7D+H,YAAc,EAAK/H,S,8BAQf4G,GAAQ,IAAD,OAIb,GAHA7E,KAAKuD,QAAQmB,IAAIG,EAAM/B,MAGnB+B,EAAMoB,QAA8B,QAApBjG,KAAKxB,MAAMC,MAAkBuB,KAAK5B,OACpD,OAAQyG,EAAM/B,MACZ,IAAK,aACH+B,EAAMqB,iBACN,IAAIxH,EAAOsB,KAAKxB,MAAME,KAStB,OARAA,EAAO,EAAIsB,KAAK0B,SAAS,CAAEhD,OAAQA,IAAUsB,KAAK0B,SAAS,CAAEhD,KAAM,IACtD,IAATA,IACFsB,KAAK5B,QAAS,EACdkD,YAAW,WACT,EAAKI,SAAS,CAAEhD,KAAM,IACtB,EAAKN,QAAS,IACb,OAEE,EAET,IAAK,YACHyG,EAAMqB,iBACN,IAAIxH,EAAOsB,KAAKxB,MAAME,KAStB,OARAA,GAAQ,EAAIsB,KAAK0B,SAAS,CAAEhD,OAAQA,IAAUsB,KAAK0B,SAAS,CAAEhD,KAAM,KACtD,IAAVA,IACFsB,KAAK5B,QAAS,EACdkD,YAAW,WACT,EAAKI,SAAS,CAAEhD,KAAM,IACtB,EAAKN,QAAS,IACb,OAEE,EAOb,GAAIyG,EAAMsB,SAA0B,SAAftB,EAAM/B,KAAiB,CAC1C+B,EAAMqB,iBACN,IACE,IAAME,EAAQjB,KAAKC,UAAWpF,KAAKiB,IAAI6B,MACvCgD,aAAaC,QAAQ/F,KAAKiB,IAAIhD,GAAImI,GAClCC,EAAQC,UAAS,WACf,EAAK5E,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAMC,KAAM,mFAAmBW,KAAMF,KAAKC,YAE5E,SACAxB,KAAK0B,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAMC,KAAM,gIAA6BW,KAAMF,KAAKC,SAEtF,OAAO,EAIT,GAAIqD,EAAMsB,SAA0B,SAAftB,EAAM/B,KAAiB,CAC1C+B,EAAMqB,iBACN,IACE,IAAIpD,EAAOgD,aAAaS,QAASvG,KAAKiB,IAAIhD,IAC1C,GAAa,OAAT6E,EACF,OAAO9C,KAAK0B,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAOC,KAAM,sGAAuBW,KAAMF,KAAKC,SAExFxB,KAAKH,SAASiD,GACd9C,KAAK0B,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAMC,KAAM,mFAAmBW,KAAMF,KAAKC,SAC1E,SACAxB,KAAK0B,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAMC,KAAM,gIAA6BW,KAAMF,KAAKC,SAEtF,OAAO,EAcT,OAVA6E,EAAQC,UAAS,WACf,GAAIzB,EAAMoB,QAAyB,SAAfpB,EAAM/B,KAIxB,OAHA+B,EAAMqB,iBACN,EAAKrG,SAAS,KAAK,GACnB,EAAK6B,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAMC,KAAM,gGAAsBW,KAAMF,KAAKC,UACtE,KAKPqD,EAAMoB,QAAyB,SAAfpB,EAAM/B,MACxB+B,EAAMqB,iBACNG,EAAQC,UAAS,WAEN,QADI,EAAK9H,MAAMC,KACP,EAAKiD,SAAS,CAAEjD,KAAM,QAAW,EAAKiD,SAAS,CAAEjD,KAAM,YAEnE,GAILoG,EAAMoB,QAAyB,SAAfpB,EAAM/B,MACxB+B,EAAMqB,iBACN1F,SAASgG,kBACLhG,SAASiG,iBACTjG,SAASC,gBAAgBiG,qBACtB,GAIL7B,EAAMoB,QAAyB,SAAfpB,EAAM/B,MACxB+B,EAAMqB,iBACNlG,KAAKJ,YACE,GAILiF,EAAMsB,SAA0B,SAAftB,EAAM/B,MACzB+B,EAAMqB,iBACNG,EAAQC,UAAS,kBAAM,EAAKxG,aACrB,QAHT,I,+BAWOgD,GAAoB,IAAD,OAAbrE,IAAa,yDAC1B,IAAIuB,KAAKrC,MAAMwC,oBAAqD,IAA/BH,KAAKrC,MAAMsC,SAAS/B,OAAzD,CAEA,IAAIyI,EACJ3G,KAAKrC,MAAMsC,SAAS2G,KAAI,SAACC,EAASC,GAC5B,EAAK7F,IAAIhD,KAAO4I,EAAQ5I,KAC1B0I,EAAYG,MAKhB,IAAIC,EAAkB/G,KAAKrC,MAAMsC,SACjCxB,EACIsI,EAAgBJ,GAAW7D,KAAOqC,KAAK6B,MAAMlE,GAC7CiE,EAAgBJ,GAAWzB,YAAc6B,EAAgBJ,GAAW7D,KAExE9C,KAAKrC,MAAMsJ,eAAgBF,EAAgBG,SAEvCzI,GACF6C,YAAW,kBAAM,EAAKxB,WAAU,U,GAnfZqH,IAAMC,WAsiBjBC,iBA1Cf,SAAyBC,GACvB,MAAO,CAGLrH,SAAUqH,EAAMrH,SAASsH,KACzBpH,mBAAoBmH,EAAMrH,SAASuH,WACnCpH,cAAekH,EAAMrH,SAASwH,MAC9BvH,kBAAmBoH,EAAMrH,SAASyH,UAGlC1D,KAAMsD,EAAMK,SAAS3D,KAGrB4D,SAAUN,EAAMM,SAASpJ,MACzBwE,MAAOsE,EAAMM,SAAS3J,GACtB4J,QAASP,EAAMM,SAAS/G,KAGxBO,MAAOkG,EAAMQ,kBAIjB,SAA4BC,GAC1B,MAAO,CACL5E,cAAe,WACb4E,EAAS5E,gBAEX8D,eAAgB,SAAEF,GAChBgB,EAASd,YAAgBF,KAE3B9B,iBAAkB,SAACzG,EAAOC,GACxBsJ,EAAS9C,YAAiBzG,EAAOC,KAEnCkF,eAAgB,SAACqE,GACfD,EAASpE,YAAeqE,KAE1B9D,UAAW,WACT6D,EAAS7D,mBAKAmD,CAA6C3J,K,uJCjlBtDuK,E,kDACJ,WAAYtK,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACX0J,WAAW,GAJI,E,gEAQE,IAAD,OAGZjK,EAAK+B,KAAKrC,MAAMsD,IAAIhD,GACpB2B,EAAWI,KAAKrC,MAAMqG,KAAKpE,SAASsB,MAAK,SAAAC,GAAI,OAAIA,EAAKlD,KAAOA,UAElD8B,IAAbH,IACFY,SAASkC,eAAe,WAAW0D,MAAQxG,EAAS0E,KAAK6D,OACzD3H,SAASkC,eAAe,aAAa0D,MAAQxG,EAAS0E,KAAK8D,UAI7D5H,SAASkC,eAAe,iBAAiBgB,QAAU,WACjD,EAAKhC,SAAS,CAAEwG,WAAW,IAC3B,IAAIG,EAAkB,EAAK1K,MAAMqG,KAAKpE,cAGrBG,IAAbH,EACFyI,EAAkBA,EAAgBzB,KAAI,SAAA0B,GACpC,OAAIA,EAAQrK,KAAOA,EACV,CACLA,KAAIqG,KAAK,2BACJgE,EAAQhE,MADL,IAEN6D,OAAQ3H,SAASkC,eAAe,WAAW0D,MAC3CgC,SAAU5H,SAASkC,eAAe,aAAa0D,SAGrCkC,KAGlBD,EAAgBE,KAAK,CACnBtK,KAAIqG,KAAM,CACR6D,OAAQ3H,SAASkC,eAAe,WAAW0D,MAC3CgC,SAAU5H,SAASkC,eAAe,aAAa0D,SAKrD,IAAM9B,EAAOa,KAAKC,UAAU,CAC1BxF,SAAUyI,IAGZhD,MAAM,mBAAoB,CACxBC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,SACP,EAAKD,SAAS,CAAEwG,WAAW,IAC3B,EAAKvK,MAAMuG,mB,+BAQjB,IAAIsE,EAOJ,OAHEA,EAHGxI,KAAKxB,MAAM0J,UAGD,YAFA,SAMb,sBAAK7H,UAAU,aAAf,UACE,sBAAKA,UAAU,wCAAf,UACE,sBAAKA,UAAU,0CAAf,UACE,qBAAKA,UAAU,yCAAyCyB,MAAO,CAAE2G,gBAAiBzI,KAAKrC,MAAMsD,IAAIyH,OAAjG,SACE,cAAC,IAAD,CAAiBzG,KAAO0G,EAAM3I,KAAKrC,MAAMsD,IAAIgB,MAAQ,gBAEvD,sBAAK5B,UAAU,8CAAf,UACE,qBAAKA,UAAU,yCAAf,SACIL,KAAKrC,MAAMsD,IAAI2H,QAEnB,qBAAKvI,UAAU,yCAAf,SACIL,KAAKrC,MAAMsD,IAAIhD,WAIvB,sBAAKoC,UAAU,yCAAyCpC,GAAG,uBAA3D,UACE,sFACA,gDAEF,sBAAKoC,UAAU,kEAAf,UACE,gKACA,sBAAKA,UAAU,+BAAf,UACE,gCACE,uBAAOQ,KAAK,OAAOgI,YAAY,gDAAa5K,GAAG,UAAU6K,aAAa,QACtE,uBAAOjI,KAAK,OAAOgI,YAAY,uCAAS5K,GAAG,YAAY6K,aAAa,WAEtE,yBAAQ7K,GAAG,gBAAX,cAA4B,cAAC,IAAD,CAAiBgE,KAAO0G,EAAMH,KAA1D,aAGJ,qBAAKnI,UAAU,yCAAf,SACE,yCAEF,qBAAKA,UAAU,yCAAf,SACE,cAAC,IAAD,CAAM0I,GAAG,YAAT,4DAEF,qBAAK1I,UAAU,yCAAf,SACE,cAAC,IAAD,CAAM0I,GAAG,OAAT,0FAEF,qBAAK1I,UAAU,yCAAf,SACE,cAAC,IAAD,CAAM0I,GAAG,QAAT,+DAGJ,sBAAK1I,UAAU,wCAAf,UACE,sBAAKA,UAAU,gDAAf,UACE,4FACA,iDAEF,sBAAKA,UAAU,gDAAf,UACE,oEACA,iDAEF,sBAAKA,UAAU,gDAAf,UACE,8GACA,iDAEF,sBAAKA,UAAU,gDAAf,UACE,oEACA,gDAEF,sBAAKA,UAAU,gDAAf,UACE,mGACA,gDAEF,sBAAKA,UAAU,gDAAf,UACE,gFACA,kDACA,qDAEF,sBAAKA,UAAU,gDAAf,UACE,0GACA,0D,GAnJY8G,IAAMC,WAyKfC,iBAdf,SAAyBC,GACvB,MAAO,CACLtD,KAAMsD,EAAMK,SAAS3D,SAIzB,SAA4B+D,GAC1B,MAAO,CACL7D,UAAW,WACT6D,EAAS7D,mBAKAmD,CAA6CY,I,gQCjKtDrE,EAASoF,MAGTC,E,kDACJ,WAAYtL,GAAQ,IAAD,8BACjB,cAAMA,IAGDC,KAAOC,OAAOC,SAASC,KAAKC,MAAM,QAAQ,GAE/C,EAAKQ,MAAQ,CACX0K,YAAa,EACbC,gBAAYpJ,EACZqJ,eAAWrJ,EACXsJ,SAAU,EACVC,OAAQ,SACRC,aAAc,KACdC,YAAY,EACZC,SAAS,GAKX,EAAKvK,QAAU,EAAKA,QAAQC,KAAb,gBACf,EAAKuK,OAAS,EAAKA,OAAOvK,KAAZ,gBACd,EAAKwK,cAAgB,EAAKA,cAAcxK,KAAnB,gBACrB,EAAKyK,YAAc,EAAKA,YAAYzK,KAAjB,gBAtBF,E,qDAyBT,IAAD,OAGH0K,EAAO7J,KAAKrC,MAAMsC,SAAS2G,KAAI,SAAA3F,GACjC,OAAO,wBAAC,IAAD,2BAAcA,GAAd,IAAoB6I,IAAM,UAAY7I,EAAIhD,GAAK4C,KAAK,MAAMkJ,OAAO,kBAItEC,EAAa,CACf,cAAC,IAAD,CAAStB,MAAM,UACNzG,KAAK,QACL2G,MAAM,yDAEN/H,KAAK,WACL5C,GAAG,uBAFC,iBAGb,cAAC,IAAD,CAASyK,MAAM,UACNzG,KAAK,gBACL2G,MAAM,6CAEN/H,KAAK,QACL5C,GAAG,oBAFC,cAGb,cAAC,IAAD,CAASyK,MAAM,UACNzG,KAAK,SACL2G,MAAM,oDAEN/H,KAAK,MACL5C,GAAG,kBAFC,aAKTgM,EAAS,GACTC,EAAe,GACfC,EAAe,GAEfvK,EAAQ,YAAQI,KAAKrC,MAAMqG,KAAKpE,UA2BtC,IAAK,IAAIwK,KAxBTxK,EAASgH,KAAI,SAAA0B,GACX,IAAM+B,EAAY/B,EAAQhE,KAAKgG,SAC/B,GAAyB,kBAAdD,GAAwC,KAAdA,EAArC,CAGKH,EAAaK,SAASF,KACzBJ,EAAOI,GAAa,CAClBR,KAAM,GACNvF,KAAM,IAER4F,EAAa3B,KAAK8B,IAIpB,IAAMG,EAAYX,EAAK3I,MAAK,SAAAD,GAAG,OAAIA,EAAItD,MAAMM,KAAOqK,EAAQrK,MAG5DgM,EAAOI,GAAWR,KAAKtB,KAAKiC,GAG5BX,EAAOA,EAAKY,QAAO,SAAAC,GAAI,OAAIA,IAASF,SAIrBP,EACfE,EAAa5B,KAAMvI,KAAK2K,YAAYV,EAAOG,GAAMP,KAAMO,IAIrDP,EAAK3L,QACPiM,EAAa5B,KAAMvI,KAAK2K,YAAYd,EAChC,uHACA,mTAINM,EAAa5B,KAAMvI,KAAK2K,YAAYX,EAChC,sHACA,mfAGJ,IAAIY,EAAiB,cAAC,IAAD,CAAiB3I,KAAO4I,aAgB7C,GAfI7K,KAAKxB,MAAMgL,aAAcoB,EAAiB,cAAC,IAAD,CAAiB3I,KAAO6I,gBAG1C,YAAxB9K,KAAKrC,MAAMiK,WACb5H,KAAK+K,aAAezJ,YAAW,WAC7B,EAAK3D,MAAMgG,eAAe,CAAEnF,MAAO,aAClC,MAI+B,SAApCsH,aAAaS,QAAQ,WACjBvG,KAAKgL,SAAU,EACfhL,KAAKgL,SAAU,EAGS,WAAxBhL,KAAKrC,MAAMiK,SAAuB,CACpC,IAAMqD,EAAWzK,SAAS0K,iBAAiB,6BACtBC,MAAMC,KAAKH,GAEnBI,SAAQ,SAAAC,GACnBA,EAAKxJ,MAAMyJ,QAAU,UAKzB,IAAIC,EAAc,KAClB,GAAI,CAAC,SAAU,WAAWjB,SAASvK,KAAKrC,MAAMiK,WAAoC,QAAvB5H,KAAKrC,MAAMkK,QAGxDrH,SAASkC,eAAe,MAAM1C,KAAKrC,MAAMqF,OAGjDlB,MAAMyJ,QAAU,aAGf,GAAI,CAAC,SAAU,WAAWhB,SAASvK,KAAKrC,MAAMiK,UAAW,CAG9D,OAAQ5H,KAAKrC,MAAMkK,SACjB,IAAK,WACH2D,EAAc,cAAC,IAAD,IACd,MACF,IAAK,QACHA,EAAc,cAAC,IAAD,IACd,MACF,IAAK,MACHA,EAAc,cAAC,IAAD,IAOU,WAAxBxL,KAAKrC,MAAMiK,UAAgD,QAAvB5H,KAAKrC,MAAMkK,SACjD7H,KAAKyL,aAAa,SAStB,GAA4B,YAAxBzL,KAAKrC,MAAMiK,SACbvB,EAAQC,UAAS,kBAAM,EAAKsD,sBAGvB,GAA4B,WAAxB5J,KAAKrC,MAAMiK,UAAgD,QAAvB5H,KAAKrC,MAAMkK,QAAmB,CAE3E,IAAM5G,EAAMT,SAASkC,eAAe,MAAM1C,KAAKrC,MAAMqF,OAI/C0I,GADSzK,EAAI0K,iBAAmB1K,EAAI0B,cAAcnC,UAClCgE,cAAc,uBAEpC,GAAIkH,EAAQ,CAGV,IAAME,EAAQF,EAAOG,aAAa,cAC9BD,GAAmB,SAAVA,EACX5L,KAAKyL,aAAaG,GACRA,GACV5L,KAAKyL,aAAa,cAGpBzL,KAAKyL,aAAa,SAKtB,OACE,sBAAKpL,UAAU,cAAcpC,GAAG,cAAhC,UACE,qBAAKoC,UAAU,YAAYpC,GAAG,YAA9B,SACE,sBAAKoC,UAAU,gBAAf,UACE,sBAAKA,UAAU,YAAf,UACE,qBAAKC,IAAI,qBAAqBC,IAAI,IAAIF,UAAU,mBAChD,sBAAMA,UAAU,kBAAhB,oBACA,qBAAKA,UAAU,wBAAf,yBAEF,sBAAKA,UAAU,WAAf,UACE,sFACA,+CAEF,eAAC,IAAD,CAAMA,UAAU,WAAW0I,GAAG,YAA9B,UACE,gFACA,yCACA,qCAAO,cAAC,IAAD,CAAiB9G,KAAO6J,WAA/B,eAIN,sBAAKzL,UAAU,mBAAmBpC,GAAG,mBAArC,UACE,sBAAKoC,UAAU,cAAcpC,GAAG,cAAhC,UAEIkM,EAEF,qBAAK9J,UAAU,WAAWpC,GAAG,aAA7B,SACI2M,OAGN,sBAAKvK,UAAU,gBAAgBpC,GAAG,gBAAgB8N,aAAa/L,KAAKrC,MAAMiK,SAA1E,UACI4D,EADJ,IAEIxL,KAAKxB,MAAM+K,aAFf,IAGE,cAAC,IAAD,CAAayC,aAAehM,KAAKgM,0B,0CAOtB,IAgBfC,EAhBc,OAGZC,EAAkB,CACtB,CAACD,QAAQ,EAAOE,SAAU,WAC1B,CAACF,QAAQ,EAAOE,SAAU,UAC1B,CAACF,QAAQ,EAAOE,SAAU,QAC1B,CAACF,QAAQ,EAAOE,SAAU,WAC1B,CAACF,QAAQ,EAAOE,SAAU,iBAC1B,CAACF,QAAQ,EAAOE,SAAU,aAC1B,CAACF,QAAQ,EAAME,SAAU,SACzB,CAACF,QAAQ,EAAME,SAAU,cACzB,CAACF,QAAQ,EAAME,SAAU,cAGrBA,EAAWC,UAAUC,UAG3B,IAAK,IAAIC,KAAKJ,EACZ,GAAIA,EAAgBI,GAAGH,SAASI,KAAKJ,GAAW,CAC9CF,EAASC,EAAgBI,GAAGL,OAC5B,MAKJ,IAAMO,EAAehM,SAASkC,eAAe,oBACvC+J,EAAmBjM,SAASkC,eAAe,aAEjD,GAAIuJ,EAAQ,CACVO,EAAa1K,MAAM9C,MAAQ,QAC3BwN,EAAa1K,MAAM4K,YAAc,QACjCF,EAAa/H,UAAUC,IAAI,6BAE3BlE,SAASkC,eAAe,cAAcZ,MAAMyJ,QAAU,OAEtD,IAAMvM,EAAQwB,SAASkC,eAAe,eAAehC,YAAc8L,EAAa9L,YAAc,IAC9F+L,EAAiBhI,UAAUC,IAAI,qBAC/B+H,EAAiB3K,MAAM9C,MAAQA,EAAQ,KAGzCnB,OAAOyF,iBAAiB,SAAUtD,KAAK0J,OAAQuC,GAC/CpO,OAAOyF,iBAAiB,UAAWtD,KAAKd,SAExCsB,SAASgE,cAAc,eAAed,QAAU,WAC9C,IACMlD,SAASgG,mBACXhG,SAASiG,iBACT,EAAK/E,SAAS,CAAE8H,YAAY,MAE5BhJ,SAASC,gBAAgBiG,oBACzB,EAAKhF,SAAS,CAAE8H,YAAY,KAE9B,SACApG,QAAQC,IAAI,uBAQhBrD,KAAK4J,cAMU,IAAI7F,IAAW/D,KAAKrC,MAAMqG,KAAKC,OAAQ,WAAYjE,KAAKrC,MAAMuG,WACtEC,MAMP,IAAIsF,EAAUzJ,KAAKrC,MAAMqG,KAAK2I,aAAalD,QAI3C,QAFgB1J,IAAZ0J,IAAyBA,EAAU,IAEnCA,EAAQvL,OAAS,EAAG,CAEtB,IAAM0O,EAAS,GAEfnD,EAAQ4B,SAAQ,SAAAwB,GAGdjJ,EAAOkJ,KAAK,gBAAiB,CAC3B3E,OAAQ0E,EAAO1E,OACfC,SAAUyE,EAAOzE,SACjB2E,cAAc,IAIhB,IAAMvO,EAAQwO,YAAQ,+BAAgC,CACpD7E,OAAQ0E,EAAO1E,OACfC,SAAUyE,EAAOzE,SACjB6E,SAAUJ,EAAOI,WAChBzH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAA+B,GACJ,MAAO,CAAE9B,IAAK8B,EAAM2F,KAAML,EAAOI,aAGrCL,EAAOrE,KAAK/J,MAIdoF,EAAOuJ,GAAG,cAAenN,KAAK2J,eAG9ByD,QAAQC,IAAIT,GAAQpH,MAAK,SAAA+B,GACvB,IAAM+F,EAAW,GACjB/F,EAAK8D,SAAQ,SAAAkC,GACXD,EAASC,EAAa9H,IAAI0C,QAAU,GACpCmF,EAASC,EAAa9H,IAAI0C,QAAQoF,EAAaL,MAAQK,EAAa9H,IAAIW,SAE1E,EAAK1E,SAAS,CAAE+H,QAAS6D,OACxB3H,OAAM,eAQXG,aAAaC,QAAQ,OAAQZ,KAAKC,UAAUpF,KAAKrC,MAAMqG,OAGvDhE,KAAKrC,MAAMsC,SAASoL,SAAQ,SAAApK,GAC1B+L,YAAQ,eAAgB,CAAEhK,MAAO/B,EAAIhD,KAClCuH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACPmE,aAAaC,QAAQ,SAAW9E,EAAIhD,GAAIkH,KAAKC,UAAUd,EAAKrD,MAE5DmC,QAAQC,IAAI,sBAAwBpC,EAAIhD,OAE3C0H,OAAM,SAAAC,GAAG,OAAIxC,QAAQC,IAAI,sBAAwBpC,EAAIhD,UAO1D,IAAMsL,EAAe,GAGrBvJ,KAAKrC,MAAMsC,SAASoL,SAAQ,SAACpK,EAAK6F,GAChC,IAAM0E,EAAc,wBAClBlL,IAAG,UAAM,EAAK1C,KAAX,gBAAyBqD,EAAIhD,GAA7B,oBAA6C,EAAK+M,SACrDjJ,YAAY,IACZ9D,GAAK,MAAQgD,EAAIhD,GACjBoC,UAAU,2BACVyB,MAAO,CAAE9C,MAAO,OAAQ2B,OAAQ,OAAQ8H,gBAAiB,QAAS8C,QAAS,SACrE,OAASzE,GACjByC,EAAahB,KAAKiD,MAIpBxL,KAAK0B,SAAS,CAAE6H,mB,8BAIV1E,GACN,OAAQA,EAAMiF,KACZ,IAAK,YACH9J,KAAKrC,MAAMgG,eAAe,CAAEnF,MAAO,YACnC,MACF,IAAK,IACH,IAAKqG,EAAMoB,OAAU,OACrBpI,OAAOC,SAASC,KAAO,e,6BAKtB8G,GACL,IAAM2I,EAAOhN,SAASkC,eAAe,eAC/B+K,EAAajN,SAASkC,eAAe,qBAEtC8K,GAASC,IACVD,EAAK9M,YAAc+M,EAAW/M,cAAgBV,KAAKiM,OACrDwB,EAAW3L,MAAM4L,WAAa,SAE9BD,EAAW3L,MAAM4L,WAAa,a,kCAItB7D,EAAMO,GAA0C,IAAD,OAAnC9F,EAAmC,uDAA5B,8IAEgBvE,IAAzCC,KAAKrC,MAAMqG,KAAK2I,aAAalD,UAC/BzJ,KAAKrC,MAAMqG,KAAK2I,aAAalD,QAAU,SAGG1J,IAAxCC,KAAKrC,MAAMqG,KAAK2I,aAAa1C,SAC/BjK,KAAKrC,MAAMqG,KAAK2I,aAAa1C,OAAS,IAIxC,IAAIR,EAAUzJ,KAAKrC,MAAMqG,KAAK2I,aAAalD,QACxCgB,QAAO,SAAAoC,GAAM,OAAIA,EAAOvC,WAAaF,KAGxC,GAAIX,EAAQvL,QAAU8B,KAAKxB,MAAMiL,QAC/B,IACEA,EAAUA,EAAQ7C,KAAI,SAACiG,EAAQP,GAC7B,OAAO,cAAC,IAAD,CACL1D,MAAQiE,EAAOjE,MACfxC,MAAQ,EAAK5H,MAAMiL,QAASoD,EAAO1E,QAAU0E,EAAOI,UACpDhL,KAAO4K,EAAO5K,MACRqK,MAEV,SACA7C,EAAU,UAELA,EAAU,KAGnB,IAAMQ,EAASjK,KAAKrC,MAAMqG,KAAK2I,aAAa1C,OACtC0D,EAAQ1D,EAAO/I,MAAK,SAAAyM,GAAK,OAAIA,EAAMvD,OAASA,KAGlD,OAFIuD,IAASrJ,EAAOqJ,EAAMC,aAGtB,sBAAKvN,UAAU,YAAf,UACE,sBAAKA,UAAU,mBAAf,UACE,sBAAKA,UAAU,0BAAf,cAA4C+J,EAA5C,OACA,qBAAK/J,UAAU,yBAAf,SACIiE,OAGN,qBAAKjE,UAAU,UAAf,SACIoJ,IAEJ,sBAAKpJ,UAAU,mBAAf,cAAqCwJ,EAArC,SAV+BO,K,oCAiBrC,OADcpK,KAAKrC,MAAMqG,KAAK2I,aAAaf,OAEzC,KAAK,EACH5L,KAAK6N,SAAS,mBAAoB,WAClC,MACF,KAAK,EACH7N,KAAK6N,SAAS,mBAAoB,WAClC,MACF,KAAK,EACH7N,KAAK6N,SAAS,mBAAoB,WAClC,MACF,KAAK,EACH7N,KAAK6N,SAAS,mBAAoB,WAClC,MACF,QACE7N,KAAK6N,SAAS,mBAAoB,c,+BAK/BC,EAAQC,GACfvN,SAASgE,cAAc,qBAClB1C,MAAM2G,gBAAkBqF,EAE7BtN,SAASgE,cAAc,aAClB1C,MAAM2G,gBAAkBsF,EAE7BvN,SAASkC,eAAe,eACrBsL,aAAa,UAAWF,GAE3BtN,SAASkC,eAAe,qBACrBsL,aAAa,UAAWF,K,mCAGhBpF,GACXpH,YAAW,WACTd,SAASkC,eAAe,eACrBsL,aAAa,UAAWtF,GAE3BlI,SAASkC,eAAe,qBACrBsL,aAAa,UAAWtF,KAC1B,O,oCAGSnB,GAGZ,IAAM0G,EAAWjO,KAAKxB,MAAMiL,QAC5BwE,EAAS1G,EAAKY,QAAd,2BAA6B8F,EAAS1G,EAAKY,SAAYZ,EAAK2G,QAC5DlO,KAAK0B,SAAS,CAAE+H,QAASwE,M,6CAMZzN,SAASkC,eAAe,eAErC7E,OAAOuG,oBAAoB,UAAWpE,KAAKd,SAC3CrB,OAAOuG,oBAAoB,SAAUpE,KAAK0J,QAE1C1J,KAAKrC,MAAMqG,KAAK2I,aAAalD,QAAQ4B,SAAQ,SAAAwB,GAC3CjJ,EAAOkJ,KAAK,qBAAsBD,EAAO1E,WAG3C3H,SAASkC,eAAe,eACrBsL,aAAa,UAAW,SAE3BxN,SAASkC,eAAe,qBACrBsL,aAAa,UAAW,a,GAzhBR7G,IAAMC,WA+jBdC,iBA9Bf,SAAyBC,GACvB,MAAO,CAGLrH,SAAUqH,EAAMrH,SAASsH,KACzBpH,mBAAoBmH,EAAMrH,SAASuH,WACnCpH,cAAekH,EAAMrH,SAASwH,MAC9BvH,kBAAmBoH,EAAMrH,SAASyH,UAGlC1D,KAAMsD,EAAMK,SAAS3D,KAGrB4D,SAAUN,EAAMM,SAASpJ,MACzBwE,MAAOsE,EAAMM,SAAS3J,GACtB4J,QAASP,EAAMM,SAAS/G,SAI5B,SAA4BkH,GAC1B,MAAO,CACLpE,eAAgB,SAACqE,GACfD,EAASpE,YAAeqE,KAE1B9D,UAAW,WACT6D,EAAS7D,mBAKAmD,CAA6C4B,K,uJC3kBtDkF,E,kDACJ,WAAYxQ,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACX4P,UAAW7M,KAAKC,MAChB6M,OAAO,EAEPC,UAAW,EACXC,QAAQ,EACRC,QAAQ,GAKV,EAAKrF,WAAa,EAAKA,WAAWhK,KAAhB,gBAClB,EAAKsP,SAAW,EAAKA,SAAStP,KAAd,gBAChB,EAAKiK,UAAY,EAAKA,UAAUjK,KAAf,gBACjB,EAAKuP,MAAQ,EAAKA,MAAMvP,KAAX,gBAEb,EAAKwP,eAAiB,EAAKA,eAAexP,KAApB,gBACtB,EAAKyP,aAAe,EAAKA,aAAazP,KAAlB,gBACpB,EAAK0P,cAAgB,EAAKA,cAAc1P,KAAnB,gBArBJ,E,qDAwBT,IAAD,OACP,OACE,gCACE,qBAAKkB,UAAU,eACVpC,GAAG,eACH+D,QAAS,kBAAM,EAAKrE,MAAMgG,eAAe,CAAEnF,MAAO,aAFvD,SAGE,cAAC,IAAD,CAAiByD,KAAO6M,UAAUzO,UAAU,qBAAqBpC,GAAG,yBAEtE,qBAAKA,GAAG,oB,0CAMZ,IAAM8Q,EAASvO,SAASkC,eAAe,gBACvCqM,EAAOzL,iBAAiB,aAActD,KAAKmJ,YAC3C4F,EAAOzL,iBAAiB,YAAatD,KAAKoJ,WAC1C2F,EAAOzL,iBAAiB,WAAYtD,KAAKyO,UACzCM,EAAOzL,iBAAiB,QAAStD,KAAK0O,OAEtC,IAAMlB,EAAOhN,SAASkC,eAAe,cACrC8K,EAAKlK,iBAAiB,aAActD,KAAK2O,gBACzCnB,EAAKlK,iBAAiB,YAAatD,KAAK6O,eACxCrB,EAAKlK,iBAAiB,WAAYtD,KAAK4O,cACvCpB,EAAKlK,iBAAiB,cAAetD,KAAK4O,gB,iCAGjC/J,GAAQ,IAAD,OACDrE,SAASkC,eAAe,gBACvC1C,KAAK0B,SAAS,CAAE0M,UAAW7M,KAAKC,MAAO6M,OAAO,IAC9C7N,SAAS8D,KAAKxC,MAAMyC,WAAa,OAGjCjD,YAAW,WACJ,EAAK9C,MAAM6P,OACZ,YAAajC,WACfA,UAAU4C,QAAQ,CAAC,GAAI,GAAI,GAAI,GAAI,OAEpC,O,+BAGInK,GACQrE,SAASkC,eAAe,gBAChCZ,MAAMmN,UAAY,WAEzBzO,SAAS8D,KAAKxC,MAAMyC,WAAa,OACjCvE,KAAK0B,SAAS,CAAE2M,OAAO,M,gCAGfxJ,GACR,KAAItD,KAAKC,MAAQxB,KAAKxB,MAAM4P,UAAY,KAAxC,CAEA,IAAMW,EAASvO,SAASkC,eAAe,gBACvCqM,EAAOjN,MAAMmN,UAAY,aACzBF,EAAOjN,MAAMgD,KAAOD,EAAMqK,QAAQrK,EAAMqK,QAAQhR,OAAS,GAAG6G,MAAQ,GAAK,KACzEgK,EAAOjN,MAAMqN,IAAMtK,EAAMqK,QAAQrK,EAAMqK,QAAQhR,OAAS,GAAGkR,MAAQ,GAAI,Q,8BAInE7N,KAAKC,MAAQxB,KAAKxB,MAAM4P,WAAa,KACzCpO,KAAKrC,MAAMgG,eAAe,CAAEnF,MAAO,c,qCAGtBqG,GACb7E,KAAK0B,SAAS,CAAE4M,UAAWzJ,EAAMqK,QAAQrK,EAAMqK,QAAQhR,OAAS,GAAG6G,U,oCAGvDF,GACZA,EAAMqB,iBACN,IAAInB,EAAQF,EAAMqK,QAAQrK,EAAMqK,QAAQhR,OAAS,GAAG6G,MAChD/E,KAAKxB,MAAM8P,UAAYvJ,EAAQ,GAC5B/E,KAAKxB,MAAM+P,SACdnC,UAAU4C,QAAQ,CAAC,GAAI,GAAI,KAC3BhP,KAAK0B,SAAS,CAAE6M,QAAQ,EAAMC,OAAQ,WAE/BxO,KAAKxB,MAAM8P,UAAYvJ,GAAS,GACpC/E,KAAKxB,MAAM+P,SACdnC,UAAU4C,QAAQ,CAAC,GAAI,GAAI,KAC3BhP,KAAK0B,SAAS,CAAE6M,QAAQ,EAAMC,OAAQ,UAE/BxO,KAAKxB,MAAM+P,QACpBvO,KAAK0B,SAAS,CAAE6M,QAAQ,EAAOC,QAAQ,M,qCAMvC,IAAIvQ,EADN,GAAI+B,KAAKxB,MAAMgQ,SAGTvQ,EADkB,SAAtB+B,KAAKxB,MAAMgQ,OACFa,IAAKvK,OACLuK,IAAKC,SAEN,CAGN,IAAMrE,EAAWzK,SAAS0K,iBAAiB,6BACtBC,MAAMC,KAAKH,GAEnBI,SAAQ,SAAAC,GACnBA,EAAKxJ,MAAMyJ,QAAU,UAIvBvL,KAAKrC,MAAMgG,eAAe,CAAE1F,OAIhC+B,KAAK0B,SAAS,CAAE6M,QAAQ,EAAOC,QAAQ,M,6CAIvC,IAAMO,EAASvO,SAASkC,eAAe,gBACvCqM,EAAO3K,oBAAoB,aAAcpE,KAAKmJ,YAC9C4F,EAAO3K,oBAAoB,YAAapE,KAAKoJ,WAC7C2F,EAAO3K,oBAAoB,WAAYpE,KAAKyO,UAC5CM,EAAO3K,oBAAoB,QAASpE,KAAK0O,OAEzC,IAAMlB,EAAOhN,SAASkC,eAAe,cACrC8K,EAAKpJ,oBAAoB,aAAcpE,KAAK2O,gBAC5CnB,EAAKpJ,oBAAoB,YAAapE,KAAK6O,eAC3CrB,EAAKpJ,oBAAoB,WAAYpE,KAAK4O,cAC1CpB,EAAKpJ,oBAAoB,cAAepE,KAAK4O,kB,GAlJvBzH,IAAMC,WA6KjBC,iBAnBf,SAAyBC,GACvB,MAAO,CAGLM,SAAUN,EAAMM,SAASpJ,MACzBwE,MAAOsE,EAAMM,SAAS3J,GACtB4J,QAASP,EAAMM,SAAS/G,SAK5B,SAA4BkH,GAC1B,MAAO,CACLpE,eAAgB,SAACqE,GACfD,EAASpE,YAAeqE,QAKfX,CAA6C8G,I,6ECpLtDnB,EAAU,SAACuC,EAAKrB,GACpB,IAAM5J,EAAOa,KAAKC,UAAL,eAAoB8I,IACjC,OAAO7I,MAAMkK,EAAK,CAChBjK,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,W,kICNiBkL,E,uKAGjB,OAAO,qBAAK1N,MAAO,CACjB2G,gBAAiB,QACjB9H,OAAQ,QACR8O,UAAW,UAHN,SAKL,cAAC,IAAD,CAAKhR,KAAK,c,GARoB0I,IAAMC,Y,wICErBsI,E,uKAIjB,IAAItJ,EAAQpG,KAAKrC,MAAMyI,MACvB,OAAQpG,KAAKrC,MAAMyI,OACjB,KAAK,EACHA,EAAQ,KACR,MACF,KAAK,EACHA,EAAQ,MAIZ,IAAIwC,EAAQ,KAKZ,MAJyB,KAArB5I,KAAKrC,MAAMiL,QACbA,EAAQ,wCAAY5I,KAAKrC,MAAMiL,MAAvB,QAIR,sBAAKvI,UAAU,cAAf,UACE,kCACE,cAAC,IAAD,CAAiB4B,KAAO0G,EAAM3I,KAAKrC,MAAMsE,MAAQ,yBAEnD,wCAAYmE,EAAZ,OACEwC,S,GAzB0BzB,IAAMC,Y,qKCErBuI,E,kDACnB,WAAYhS,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,KAIT,EAAKC,KAAO,EAAKA,KAAK1Q,KAAV,gBARK,E,qDAWT,IAAD,OAEHyQ,EAAO,CAAC,MAWZ,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,sBAAKzG,UAAU,aAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6N,aAE1B,qBAAKzP,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,6CAAU5K,GAAG,eAAeoC,UAAU,2BAGvEuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,6CAA6C2B,QAAUhC,KAAK6P,KAA3E,4J,uJAWN7P,KAAK0B,SAAS,CACZkO,KAAM,CAAC,SAGHG,EAAWvP,SAASkC,eAAe,gBAAgB0D,OAC5ClI,OAAS,G,uBACpB8B,KAAK0B,SAAS,CACZkO,KAAM,CAAC,8L,0CAQH5C,YAAQ,8BAA+B,CAAE+C,aAC5CvK,MAAK,SAAAC,GAAG,OAAIA,EAAI3E,UAAQ0E,MAAK,SAAA1E,GACjB,SAATA,EAKgB,cAATA,EACT,EAAKkP,eAAeD,GAEpB3M,QAAQC,IAAI,gCAPZ,EAAK3B,SAAS,CACZkO,KAAM,CAAC,+MAQVjK,OAAM,SAAAC,GAAG,OAAIxC,QAAQC,IAAI,+BAAgC,IAAI4M,MAAMrK,O,2IAI3DmK,GAAW,IAAD,OACvB,OAAO/C,YAAQ,2BAA4B,CAAE+C,aAC1CvK,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,aAEXd,QAAQC,IAAIiB,GACZ,EAAK5C,SAAS,CACZkO,KAAM,CAAC,sLAGVjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,6F,GA5F2BzI,IAAMC,WCH7BuI,E,kDACnB,WAAYhS,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,KAIT,EAAKC,KAAO,EAAKA,KAAK1Q,KAAV,gBARK,E,qDAWT,IAAD,OAEHyQ,EAAO,CAAC,MAWZ,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,sBAAKzG,UAAU,aAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOiO,iBAE1B,qBAAK7P,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,iCAAQ5K,GAAG,YAAYoC,UAAU,2BAGlEuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,6CAA6C2B,QAAUhC,KAAK6P,KAA3E,+F,uJAWN7P,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAGHO,EAAQ3P,SAASkC,eAAe,aAAa0D,MAC9C,iCAAiCmG,KAAK4D,G,uBACzCnQ,KAAK0B,SAAS,CACZkO,KAAM,CAAC,2H,0CAMH5C,YAAQ,8BAA+B,CAAEmD,UAC5C3K,MAAK,SAAAC,GAAG,OAAIA,EAAI3E,UAAQ0E,MAAK,SAAA1E,GACf,SAATA,EAKgB,cAATA,EACT,EAAKsP,WAAWD,GAEhB/M,QAAQC,IAAI,6BAPZ,EAAK3B,SAAS,CACZkO,KAAM,CAAC,qKAQVjK,OAAM,SAAAC,GAAG,OAAIxC,QAAQC,IAAI,4BAA6B,IAAI4M,MAAMrK,O,uIAI9DuK,GAAQ,IAAD,OAChB,OAAOnD,YAAQ,2BAA4B,CAAEmD,UAC1C3K,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,aAEXd,QAAQC,IAAIiB,GACZ,EAAK5C,SAAS,CACZkO,KAAM,CAAC,6GAGVjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,6F,GA1F2BzI,IAAMC,WCA7BuI,E,kDACnB,WAAYhS,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,GAAI,GAAI,KAIjB,EAAKC,KAAO,EAAKA,KAAK1Q,KAAV,gBARK,E,qDAWT,IAAD,OAEHyQ,EAAO,CAAC,KAAM,KAAM,MAWxB,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,sBAAKzG,UAAU,aAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOI,aAE1B,qBAAKhC,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,4EAAgB5K,GAAG,eAAeoC,UAAU,2BAG7EuP,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOI,aAE1B,qBAAKhC,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,sEAAe5K,GAAG,eAAeoC,UAAU,2BAG5EuP,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOI,aAE1B,qBAAKhC,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,8FAAmB5K,GAAG,kBAAkBoC,UAAU,2BAGnFuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,6CAA6C2B,QAAUhC,KAAK6P,KAA3E,qG,6BAWN7P,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,MAGjB,IAAMS,EAAc7P,SAASkC,eAAe,gBAAgB0D,MAC5D,GAAK,2EAA2EmG,KAAK8D,GAArF,CAOA,IAAMC,EAAc9P,SAASkC,eAAe,gBAAgB0D,MAC5D,GAAK,2EAA2EmG,KAAK+D,GAQjFA,IADmB9P,SAASkC,eAAe,mBAAmB0D,MAQlEpG,KAAKuQ,eAAe,CAAED,cAAaD,gBANjCrQ,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,oHATjB5P,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,wHAA0B,WATvC5P,KAAK0B,SAAS,CACZkO,KAAM,CAAC,8HAA2B,GAAI,Q,qCAwB7BY,GAAY,IAAD,OACxBxD,YAAQ,uBAAD,eAA8BwD,IAClChL,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,YACe,iBAAjBI,EAAK3F,SACdyE,QAAQC,IAAIiB,GACZ,EAAK5C,SAAS,CACZkO,KAAM,CAAC,8HAA2B,GAAI,QAGxCxM,QAAQC,IAAIiB,GACZ,EAAK5C,SAAS,CACZkO,KAAM,CAAC,4GAAwB,GAAI,UAGtCjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,mFAAmB,GAAI,a,GAnHIzI,IAAMC,WCC7BuI,E,kDACnB,WAAYhS,GAAQ,IAAD,8BACjB,cAAMA,IAmGR8S,kBAAoB,kBAAM,EAAKC,oBApGZ,EAsGnBC,cAAgB,WAED,+CADAnQ,SAASkC,eAAe,aAAa0D,MAEhD,EAAKyJ,KAAK,oBAEV,EAAKnO,SAAS,CACZkO,KAAM,CAAC,6HA5GM,EAiHnBgB,OAAS,kBAAM,EAAKf,KAAK,iBAjHN,EAmHnB7E,QAAU,WAEI,SADElF,aAAaS,QAAQ,WAE/BT,aAAaC,QAAQ,UAAW,SAChCD,aAAaC,QAAQ,UAAW,QACpC,EAAK2K,oBAxHY,EA2HnBA,iBAAmB,WACjB,IAAMG,EAAMrQ,SAASkC,eAAe,eAChCsI,EAAUlF,aAAaS,QAAQ,WAE/BsK,EAAIC,UADI,SAAZ9F,EACoB,iKACA,4JA7HpB,EAAKxM,MAAQ,CACXoR,KAAM,CAAC,KAIT,EAAKe,cAAgB,EAAKA,cAAcxR,KAAnB,gBACrB,EAAKyR,OAAS,EAAKA,OAAOzR,KAAZ,gBACd,EAAK6L,QAAU,EAAKA,QAAQ7L,KAAb,gBAVE,E,qDAaT,IAAD,OAEHyQ,EAAO,CAAC,MAWZ,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,qBAAKzG,UAAU,qBAAf,SACE,sBAAKA,UAAU,aAAf,UACE,sBAAKA,UAAU,YAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6N,aAE1B,qBAAKzP,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOR,UAAU,oBAAoB+F,MAAQpG,KAAKrC,MAAMqG,KAAK+L,SAAWgB,UAAU,SAGlG,sBAAK1Q,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO+O,WAE1B,qBAAK3Q,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOR,UAAU,oBAAoB+F,MAAQpG,KAAKrC,MAAMqG,KAAKmM,MAAOY,UAAU,SAG9F,sBAAK1Q,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOgP,gBAE1B,qBAAK5Q,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOR,UAAU,oBAAoB+F,MAAQpG,KAAKrC,MAAMqG,KAAK/F,GAAK8S,UAAU,SAG5F,sBAAK1Q,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOiP,gBAE1B,qBAAK7Q,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOR,UAAU,oBAAoB+F,MAAQpG,KAAKrC,MAAMqG,KAAKnD,KAAOkQ,UAAU,YAIhG,qBAAK1Q,UAAU,YAAf,SACE,qBAAKA,UAAU,yBAAf,SACE,qBAAKA,UAAU,6CAA6C2B,QAAUhC,KAAK4Q,OAA3E,8GAKJ,sBAAKvQ,UAAU,YAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOkP,iBAE1B,qBAAK9Q,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,yHAA0B5K,GAAG,YAAYoC,UAAU,2BAGtF,qBAAKA,UAAU,yBAAf,SACE,qBAAKA,UAAU,4CAA4C2B,QAAUhC,KAAK2Q,cAA1E,wGAKJ,qBAAKtQ,UAAU,YAAf,SACE,qBAAKA,UAAU,yBAAf,SACE,qBAAKA,UAAU,8CACVpC,GAAG,cACH+D,QAAUhC,KAAKgL,QAFpB,0KAOF4E,EAAK,U,2BAqCVL,GAAM,IAAD,OAGRvP,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAIT5C,YAAQuC,EAAK,IACV/J,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,aAEXd,QAAQC,IAAIiB,GACZ,EAAK5C,SAAS,CACZkO,KAAM,CAAC,+CAGVjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,6F,GAxJ2BzI,IAAMC,WCA7BgK,E,kDACnB,WAAYzT,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,KAIT,EAAKC,KAAO,EAAKA,KAAK1Q,KAAV,gBARK,E,qDAWT,IAAD,OAGDlB,EAAK+B,KAAKrC,MAAMM,GAChB2B,EAAWI,KAAKrC,MAAMqG,KAAKpE,SAASsB,MAAK,SAAAC,GAAI,OAAIA,EAAKlD,KAAOA,UAElD8B,IAAbH,IACFI,KAAKmI,OAASvI,EAAS0E,KAAK6D,OAC5BnI,KAAKoI,SAAWxI,EAAS0E,KAAK8D,SAC9BpI,KAAKsK,SAAW1K,EAAS0E,KAAKgG,UAGhC,IAAIsF,EAAO,CAAC,MAWZ,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,sBAAKzG,UAAU,YAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,qBAAKA,UAAU,kBAAkByB,MAAO,CAAE2G,gBAAiBzI,KAAKrC,MAAM+K,OAAtE,SACE,cAAC,IAAD,CAAiBzG,KAAO0G,EAAM3I,KAAKrC,MAAMsE,YAG7C,qBAAK5B,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOkQ,UAAW,EAAO3K,MAAQpG,KAAKrC,MAAMiL,MAAQvI,UAAU,2BAG9E,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOgP,gBAE1B,qBAAK5Q,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,gDACZ5K,GAAE,kBAAc+B,KAAKrC,MAAMM,IAC3BoC,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOoP,YAE1B,qBAAKhR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,kFACZ5K,GAAE,oBAAgB+B,KAAKrC,MAAMM,IAC7BoC,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOqP,mBAE1B,qBAAKjR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,uCACZ5K,GAAE,gBAAY+B,KAAKrC,MAAMM,IACzBoC,UAAU,2BAGnBuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,8CAA8CpC,GAAG,UAAU+D,QAAUhC,KAAK6P,KAAzF,2E,0CASN,IAAM5R,EAAKuC,SAASkC,eAAT,kBAAoC1C,KAAKrC,MAAMM,KACpDsT,EAAO/Q,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KACxDqM,EAAW9J,SAASkC,eAAT,gBAAkC1C,KAAKrC,MAAMM,KAE9DA,EAAGmI,MAAQpG,KAAKmI,QAAU,GAC1BoJ,EAAKnL,MAAQpG,KAAKoI,UAAY,GAC9BkC,EAASlE,MAAQpG,KAAKsK,UAAY,K,6BAMlCtK,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAGT,IAAMzH,EAAS3H,SAASkC,eAAT,kBAAoC1C,KAAKrC,MAAMM,KAAOmI,MAC/DgC,EAAW5H,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOmI,MACnEkE,EAAW9J,SAASkC,eAAT,gBAAkC1C,KAAKrC,MAAMM,KAAOmI,MAErE,IAAK+B,IAAWC,EACd,OAAOpI,KAAK0B,SAAS,CACnBkO,KAAM,CAAC,iKAIX,IAAM3R,EAAK+B,KAAKrC,MAAMM,GAChB2B,EAAWI,KAAKrC,MAAMqG,KAAKpE,SAASsB,MAAK,SAAAC,GAAI,OAAIA,EAAKlD,KAAOA,KAC/DoK,EAAkBrI,KAAKrC,MAAMqG,KAAKpE,cAGrBG,IAAbH,EACFyI,EAAkBA,EAAgBzB,KAAI,SAAA0B,GACpC,OAAIA,EAAQrK,KAAOA,EACV,CACLA,KAAIqG,KAAK,2BACJgE,EAAQhE,MADL,IAEN6D,SAAQC,WAAUkC,cAGRhC,KAGlBD,EAAgBE,KAAK,CACnBtK,KAAIqG,KAAM,CAAE6D,SAAQC,WAAUkC,cAKlCtK,KAAKwR,YAAY,CAAE5R,SAAUyI,M,kCAGnB6F,GAAS,IAAD,OAClBlB,YAAQ,mBAAoBkB,GACzB1I,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,aAEXd,QAAQC,IAAIiB,GACZ,EAAK5C,SAAS,CACZkO,KAAM,CAAC,+CAGVjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,6F,GA5JqBzI,IAAMC,WCHvBuI,E,kDACnB,WAAYhS,GAAQ,uCACZA,G,qDAIE,IAAD,OAGHkM,EAAO7J,KAAKrC,MAAMsC,SAAS2G,KAAI,SAAA3F,GACjC,OAAO,wBAAC,EAAD,2BAAeA,GAAf,IACU+C,KAAI,eAAO,EAAKrG,MAAMqG,MACtB8F,IAAM7I,EAAIhD,GACViG,UAAY,EAAKvG,MAAMuG,gBAG1C,OACE,qBAAK7D,UAAU,qBAAf,SACE,qBAAKA,UAAU,aAAf,SACIwJ,U,GAnBgC1C,IAAMC,WCG7BuI,E,kDACnB,WAAYhS,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,KAJQ,E,qDAQT,IAAD,OACP,OACI,qBAAKvP,UAAU,aAAf,SACE,sBAAKA,UAAU,gCAAf,UACE,iEACA,sBAAKA,UAAU,QAAQpC,GAAG,eAA1B,UACE,yBAAS+D,QAAS,kBAAM,EAAK6L,SAAS,MACtC,yBAAS7L,QAAS,kBAAM,EAAK6L,SAAS,MACtC,yBAAS7L,QAAS,kBAAM,EAAK6L,SAAS,MACtC,yBAAS7L,QAAS,kBAAM,EAAK6L,SAAS,gB,0CAQhD7N,KAAKyR,c,kCAIL,IAAM7F,EAAQ5L,KAAKrC,MAAMqG,KAAK2I,aAAaf,MACtCA,GACLpL,SAASkC,eAAe,gBACnB8B,cADL,4BACyCoH,EADzC,MAEKnH,UAAUC,IAAI,Y,+BAGZgN,GAAS,IAAD,OAET/E,EAAe3M,KAAKrC,MAAMqG,KAAK2I,aAGrC,OAFAA,EAAaf,MAAQ8F,EAEd1E,YAAQ,mBAAoB,CAAEL,iBACnCnH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,YAEXyN,MAAM,yFAEPhM,OAAM,SAAAC,GACP+L,MAAM,6F,GAlD+BxK,IAAMC,WCD7BwK,E,kDACnB,WAAYjU,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,KAIT,EAAKC,KAAO,EAAKA,KAAK1Q,KAAV,gBACZ,EAAK0S,OAAS,EAAKA,OAAO1S,KAAZ,gBATG,E,qDAYT,IAAD,OAGHyQ,EAAO,CAAC,MAWZ,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,sBAAKzG,UAAU,YAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOgP,gBAE1B,qBAAK5Q,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,gDACZ5K,GAAE,kBAAc+B,KAAKrC,MAAM+T,QAC3BrR,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOoP,YAE1B,qBAAKhR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,kFACZ5K,GAAE,oBAAgB+B,KAAKrC,MAAM+T,QAC7BrR,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOqP,mBAE1B,qBAAKjR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,uCACZ5K,GAAE,gBAAY+B,KAAKrC,MAAM+T,QACzBrR,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6P,aAE1B,qBAAKzR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,mDACZ5K,GAAE,eAAW+B,KAAKrC,MAAM+T,QACxBrR,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO8P,wBAE1B,qBAAK1R,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,mDACZ5K,GAAE,eAAW+B,KAAKrC,MAAM+T,QACxBrR,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO+P,kBAE1B,qBAAK3R,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,2EACZ5K,GAAE,gBAAY+B,KAAKrC,MAAM+T,QACzBrR,UAAU,2BAGnBuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,8CAA8C2B,QAAUhC,KAAK6P,KAA5E,sEAIF,qBAAKxP,UAAU,yBAAf,SACE,qBAAKA,UAAU,4CAA4C2B,QAAUhC,KAAK6R,OAA1E,+D,0CASN,IAAM5T,EAAKuC,SAASkC,eAAT,kBAAoC1C,KAAKrC,MAAM+T,SACpDH,EAAO/Q,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAM+T,SACxDpH,EAAW9J,SAASkC,eAAT,gBAAkC1C,KAAKrC,MAAM+T,SACxDzE,EAAWzM,SAASkC,eAAT,eAAiC1C,KAAKrC,MAAM+T,SACvDzP,EAAOzB,SAASkC,eAAT,eAAiC1C,KAAKrC,MAAM+T,SACnD9I,EAAQpI,SAASkC,eAAT,gBAAkC1C,KAAKrC,MAAM+T,SAE3DzT,EAAGmI,MAAQpG,KAAKrC,MAAMwK,QAAU,GAChCoJ,EAAKnL,MAAQpG,KAAKrC,MAAMyK,UAAY,GACpCkC,EAASlE,MAAQpG,KAAKrC,MAAM2M,UAAY,GACxC2C,EAAS7G,MAAQpG,KAAKrC,MAAMsP,UAAY,GACxChL,EAAKmE,MAAQpG,KAAKrC,MAAMsE,MAAQ,GAChC2G,EAAMxC,MAAQpG,KAAKrC,MAAMiL,OAAS,K,6BAMlC5I,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAGT,IAAMzH,EAAS3H,SAASkC,eAAT,kBAAoC1C,KAAKrC,MAAM+T,SAAWtL,MACnEgC,EAAW5H,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAM+T,SAAWtL,MACvEkE,EAAW9J,SAASkC,eAAT,gBAAkC1C,KAAKrC,MAAM+T,SAAWtL,MACnE6G,EAAWzM,SAASkC,eAAT,eAAiC1C,KAAKrC,MAAM+T,SAAWtL,MAClEnE,EAAOzB,SAASkC,eAAT,eAAiC1C,KAAKrC,MAAM+T,SAAWtL,MAC9DwC,EAAQpI,SAASkC,eAAT,gBAAkC1C,KAAKrC,MAAM+T,SAAWtL,MAEtE,IAAK+B,IAAWC,IAAakC,IAAarI,IAASgL,EACjD,OAAOjN,KAAK0B,SAAS,CACnBkO,KAAM,CAAC,qKAIX,IAAIvH,EAAkBlD,KAAKC,UAAUpF,KAAKrC,MAAMqG,KAAK2I,eACrDtE,EAAkBlD,KAAK6B,MAAMqB,IACboB,QAAQzJ,KAAKrC,MAAM+T,QAAU,CAC3CvJ,SAAQC,WAAUkC,WAAU2C,WAAUhL,OAAM2G,SAI9C5I,KAAKwR,YAAY,CAAE7E,aAActE,M,+BAMjCrI,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAGT,IAAIvH,EAAkBlD,KAAKC,UAAUpF,KAAKrC,MAAMqG,KAAK2I,eACrDtE,EAAkBlD,KAAK6B,MAAMqB,IACboB,QAAQwI,OAAOjS,KAAKrC,MAAM+T,OAAQ,GAGlD1R,KAAKwR,YAAY,CAAE7E,aAActE,M,kCAGvB6F,GAAS,IAAD,OAClBlB,YAAQ,mBAAoBkB,GACzB1I,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,aAEXd,QAAQC,IAAIiB,GACZ,EAAK5C,SAAS,CACZkO,KAAM,CAAC,+CAGVjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,6F,GAxL0BzI,IAAMC,WCS1B8K,E,kDAEnB,WAAYvU,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,KAIT,EAAKuC,OAAS,EAAKA,OAAOhT,KAAZ,gBARG,E,qDAWT,IAAD,YAEsCY,IAAzCC,KAAKrC,MAAMqG,KAAK2I,aAAalD,UAC/BzJ,KAAKrC,MAAMqG,KAAK2I,aAAalD,QAAU,IAIzC,IAAIA,EAAUzJ,KAAKrC,MAAMqG,KAAK2I,aAAalD,QAAQ7C,KAAI,SAACiG,EAAQP,GAC9D,OAAO,wBAAC,EAAD,2BAAkBO,GAAlB,IACU7I,KAAI,eAAO,EAAKrG,MAAMqG,MACtB8F,IAAMwC,EACNoF,OAASpF,EACTpI,UAAY,EAAKvG,MAAMuG,gBAGtC0L,EAAO,CAAC,MAWZ,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,qBAAKzG,UAAU,qBAAf,SACE,sBAAKA,UAAU,aAAf,UACIoJ,EAEF,sBAAKpJ,UAAU,YAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOgP,gBAE1B,qBAAK5Q,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,gDACZ5K,GAAE,wBACFoC,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOoP,YAE1B,qBAAKhR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,kFACZ5K,GAAE,0BACFoC,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOqP,mBAE1B,qBAAKjR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,uCACZ5K,GAAE,sBACFoC,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6P,aAE1B,qBAAKzR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,mDACZ5K,GAAE,qBACFoC,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO8P,wBAE1B,qBAAK1R,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,mDACZ5K,GAAE,qBACFoC,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO+P,kBAE1B,qBAAK3R,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,2EACZ5K,GAAE,sBACFoC,UAAU,2BAGnBuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,6CAA6C2B,QAAUhC,KAAKmS,OAA3E,oE,+BAaVnS,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAGT,IAAMzH,EAAS3H,SAASkC,eAAe,yBAAyB0D,MAC1DgC,EAAW5H,SAASkC,eAAe,2BAA2B0D,MAC9DkE,EAAW9J,SAASkC,eAAe,uBAAuB0D,MAC1D6G,EAAWzM,SAASkC,eAAe,sBAAsB0D,MACzDnE,EAAOzB,SAASkC,eAAe,sBAAsB0D,MACrDwC,EAAQpI,SAASkC,eAAe,uBAAuB0D,MAE7D,IAAK+B,IAAWC,IAAakC,IAAarI,IAASgL,EACjD,OAAOjN,KAAK0B,SAAS,CACnBkO,KAAM,CAAC,qKAIX,IAAIvH,EAAkBlD,KAAKC,UAAUpF,KAAKrC,MAAMqG,KAAK2I,eACrDtE,EAAkBlD,KAAK6B,MAAMqB,IACboB,QAAQlB,KAAK,CAC3BJ,SAAQC,WAAUkC,WAAU2C,WAAUhL,OAAM2G,UAI9C5I,KAAKwR,YAAY,CAAE7E,aAActE,M,kCAGvB6F,GAAS,IAAD,OAClBlB,YAAQ,mBAAoBkB,GACzB1I,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,YAEX,EAAKxC,SAAS,CACZkO,KAAM,CAAC,8CAGVjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,6F,GArKsBzI,IAAMC,WCTtBgL,E,kDACnB,WAAYzU,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,KAIT,EAAKC,KAAO,EAAKA,KAAK1Q,KAAV,gBACZ,EAAK0S,OAAS,EAAKA,OAAO1S,KAAZ,gBATG,E,qDAYT,IAAD,OAGHyQ,EAAO,CAAC,MAWZ,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,sBAAKzG,UAAU,YAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOqP,mBAE1B,qBAAKjR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,0DACZ5K,GAAE,qBAAiB+B,KAAKrC,MAAM+T,QAC9BrR,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO+P,kBAE1B,qBAAK3R,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,mDACZ5K,GAAE,4BAAwB+B,KAAKrC,MAAM+T,QACrCrR,UAAU,2BAGnBuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,8CAA8C2B,QAAUhC,KAAK6P,KAA5E,sEAIF,qBAAKxP,UAAU,yBAAf,SACE,qBAAKA,UAAU,4CAA4C2B,QAAUhC,KAAK6R,OAA1E,+D,0CASN,IAAMzH,EAAO5J,SAASkC,eAAT,qBAAuC1C,KAAKrC,MAAM+T,SACzDW,EAAM7R,SAASkC,eAAT,4BAA8C1C,KAAKrC,MAAM+T,SAErEtH,EAAKhE,MAAQpG,KAAKrC,MAAMyM,MAAQ,GAChCiI,EAAIjM,MAAQpG,KAAKrC,MAAMiQ,aAAe,K,6BAMtC5N,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAGT,IAAMxF,EAAO5J,SAASkC,eAAT,qBAAuC1C,KAAKrC,MAAM+T,SAAWtL,MACpEwH,EAAcpN,SAASkC,eAAT,4BAA8C1C,KAAKrC,MAAM+T,SAAWtL,MAExF,IAAKgE,IAASwD,EACZ,OAAO5N,KAAK0B,SAAS,CACnBkO,KAAM,CAAC,qKAIX,IAAIvH,EAAkBlD,KAAKC,UAAUpF,KAAKrC,MAAMqG,KAAK2I,eACrDtE,EAAkBlD,KAAK6B,MAAMqB,IACb4B,OAAOjK,KAAKrC,MAAM+T,QAAU,CAC1CtH,OAAMwD,eAIR5N,KAAKwR,YAAY,CAAE7E,aAActE,M,+BAMjCrI,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAGT,IAAIvH,EAAkBlD,KAAKC,UAAUpF,KAAKrC,MAAMqG,KAAK2I,eACrDtE,EAAkBlD,KAAK6B,MAAMqB,IACb4B,OAAOgI,OAAOjS,KAAKrC,MAAM+T,OAAQ,GAGjD1R,KAAKwR,YAAY,CAAE7E,aAActE,M,kCAGvB6F,GAAS,IAAD,OAClBlB,YAAQ,mBAAoBkB,GACzB1I,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,aAEXd,QAAQC,IAAIiB,GACZ,EAAK5C,SAAS,CACZkO,KAAM,CAAC,+CAGVjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,6F,GAhI0BzI,IAAMC,WCE1BkL,E,kDAEnB,WAAY3U,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXoR,KAAM,CAAC,KAIT,EAAKuC,OAAS,EAAKA,OAAOhT,KAAZ,gBARG,E,qDAWT,IAAD,YAEqCY,IAAxCC,KAAKrC,MAAMqG,KAAK2I,aAAa1C,SAC/BjK,KAAKrC,MAAMqG,KAAK2I,aAAa1C,OAAS,IAIxC,IAAIR,EAAUzJ,KAAKrC,MAAMqG,KAAK2I,aAAa1C,OAAOrD,KAAI,SAACiG,EAAQP,GAC7D,OAAO,wBAAC,EAAD,2BAAkBO,GAAlB,IACa7I,KAAI,eAAO,EAAKrG,MAAMqG,MACtB8F,IAAMwC,EACNoF,OAASpF,EACTpI,UAAY,EAAKvG,MAAMuG,gBAGzC0L,EAAO,CAAC,MAWZ,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,qBAAKzG,UAAU,qBAAf,SACE,sBAAKA,UAAU,aAAf,UACIoJ,EAEF,sBAAKpJ,UAAU,YAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOqP,mBAE1B,qBAAKjR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,0DACZ5K,GAAE,oBACFoC,UAAU,2BAGrB,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO+P,kBAE1B,qBAAK3R,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLgI,YAAY,mDACZ5K,GAAE,2BACFoC,UAAU,2BAGnBuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,6CAA6C2B,QAAUhC,KAAKmS,OAA3E,oE,+BAaVnS,KAAK0B,SAAS,CACZkO,KAAM,CAAC,MAGT,IAAMxF,EAAO5J,SAASkC,eAAT,qBAA6C0D,MACpDwH,EAAcpN,SAASkC,eAAT,4BAAoD0D,MAExE,IAAKgE,IAASwD,EACZ,OAAO5N,KAAK0B,SAAS,CACnBkO,KAAM,CAAC,qKAIX,IAAIvH,EAAkBlD,KAAKC,UAAUpF,KAAKrC,MAAMqG,KAAK2I,eACrDtE,EAAkBlD,KAAK6B,MAAMqB,IACb4B,OAAO1B,KAAK,CAC1B6B,OAAMwD,gBAIR5N,KAAKwR,YAAY,CAAE7E,aAActE,M,kCAGvB6F,GAAS,IAAD,OAClBlB,YAAQ,mBAAoBkB,GACzB1I,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMuG,YAEX,EAAKxC,SAAS,CACZkO,KAAM,CAAC,8CAGVjK,OAAM,SAAAC,GACP,EAAKlE,SAAS,CACZkO,KAAM,CAAC,6F,GArHqBzI,IAAMC,WCYpCmL,E,kDACJ,WAAY5U,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXgU,MAAM,GAIR,EAAK9D,MAAQ,EAAKA,MAAMvP,KAAX,gBARI,E,qDAWT,IAAD,OAGDsT,EAAc,qBAAKpS,UAAU,eAAf,SAClB,cAAC,IAAD,CAAiBA,UAAU,qBAAqB2B,QAAUhC,KAAK0O,MAAQzM,KAAOyQ,kBAG1EC,EAAW,CACf,sBAAKtS,UAAU,aAAf,UACIoS,EACF,qBAAKpS,UAAU,sBAAf,oJACA,cAAC,EAAD,CAAgB6D,UAAYlE,KAAKrC,MAAMuG,eAEzC,sBAAK7D,UAAU,aAAf,UACIoS,EACF,qBAAKpS,UAAU,sBAAf,6FACA,cAAC,EAAD,CAAgB6D,UAAYlE,KAAKrC,MAAMuG,eAEzC,sBAAK7D,UAAU,aAAf,UACIoS,EACF,qBAAKpS,UAAU,sBAAf,uFACA,cAAC,EAAD,CAAY6D,UAAYlE,KAAKrC,MAAMuG,eAErC,sBAAK7D,UAAU,aAAf,UACIoS,EACF,qBAAKpS,UAAU,sBAAf,iIACA,cAAC,EAAD,2BAAmBL,KAAKrC,OAAxB,IAAgCuG,UAAYlE,KAAKrC,MAAMuG,gBAEzD,sBAAK7D,UAAU,aAAf,UACIoS,EACF,qBAAKpS,UAAU,sBAAf,6IACA,cAAC,EAAD,2BAAmBL,KAAKrC,OAAxB,IAAgCuG,UAAYlE,KAAKrC,MAAMuG,gBAEzD,sBAAK7D,UAAU,aAAf,UACIoS,EACF,qBAAKpS,UAAU,sBAAf,qHACA,cAAC,EAAD,2BAAcL,KAAKrC,OAAnB,IAA2BuG,UAAYlE,KAAKrC,MAAMuG,gBAEpD,sBAAK7D,UAAU,aAAf,UACIoS,EACF,qBAAKpS,UAAU,sBAAf,mGACA,cAAC,EAAD,2BAAaL,KAAKrC,OAAlB,IAA0BuG,UAAYlE,KAAKrC,MAAMuG,gBAEnD,sBAAK7D,UAAU,aAAf,UACIoS,EACF,qBAAKpS,UAAU,sBAAf,2EACA,cAAC,EAAD,2BAAkBL,KAAKrC,OAAvB,IAA+BuG,UAAYlE,KAAKrC,MAAMuG,iBAItD0O,EAAY,KAGhB,MAF+B,kBAApB5S,KAAKxB,MAAMgU,OAAqBI,EAAYD,EAAS3S,KAAKxB,MAAMgU,OAGzE,sBAAKnS,UAAU,qBAAf,UACE,qBAAKA,UAAS,0CAAsCL,KAAKxB,MAAMgU,MAA/D,SAA0EI,IAC1E,qBAAKvS,UAAU,sBAAf,oEACA,qBAAIA,UAAU,gBAAd,UACE,qBAAIA,UAAU,cAAc2B,QAAU,kBAAM,EAAKN,SAAS,CAAE8Q,KAAM,KAAlE,UACE,cAAC,IAAD,CAAiBvQ,KAAO6N,SAAShO,MAAO,CAAE4G,MAAO,aACjD,4KACA,2BAEF,qBAAIrI,UAAU,cAAc2B,QAAU,kBAAM,EAAKN,SAAS,CAAE8Q,KAAM,KAAlE,UACE,cAAC,IAAD,CAAiBvQ,KAAOI,SAASP,MAAO,CAAE4G,MAAO,aACjD,qHACA,2BAEF,qBAAIrI,UAAU,cAAc2B,QAAU,kBAAM,EAAKN,SAAS,CAAE8Q,KAAM,KAAlE,UACE,cAAC,IAAD,CAAiBvQ,KAAO+O,OAAOlP,MAAO,CAAE4G,MAAO,aAC/C,+GACA,8BAGJ,oBAAIrI,UAAU,kBACd,qBAAIA,UAAU,gBAAd,UACE,qBAAIA,UAAU,cAAc2B,QAAU,kBAAM,EAAKN,SAAS,CAAE8Q,KAAM,KAAlE,UACE,cAAC,IAAD,CAAiBvQ,KAAO4Q,WAAW/Q,MAAO,CAAE4G,MAAO,aACnD,yJACA,2BAEF,qBAAIrI,UAAU,cAAc2B,QAAU,kBAAM,EAAKN,SAAS,CAAE8Q,KAAM,KAAlE,UACE,cAAC,IAAD,CAAiBvQ,KAAO6Q,YAAYhR,MAAO,CAAE4G,MAAO,aACpD,qKACA,2BAEF,qBAAIrI,UAAU,cAAc2B,QAAU,kBAAM,EAAKN,SAAS,CAAE8Q,KAAM,KAAlE,UACE,cAAC,IAAD,CAAiBvQ,KAAO8Q,UAAUjR,MAAO,CAAE4G,MAAO,aAClD,6IACA,2BAEF,qBAAIrI,UAAU,cAAc2B,QAAU,kBAAM,EAAKN,SAAS,CAAE8Q,KAAM,KAAlE,UACE,cAAC,IAAD,CAAiBvQ,KAAOqP,eAAexP,MAAO,CAAE4G,MAAO,aACvD,2HACA,8BAGJ,oBAAIrI,UAAU,kBACd,oBAAIA,UAAU,gBAAd,SACE,qBAAIA,UAAU,cAAc2B,QAAU,kBAAM,EAAKN,SAAS,CAAE8Q,KAAM,KAAlE,UACE,cAAC,IAAD,CAAiBvQ,KAAO+Q,eAAelR,MAAO,CAAE4G,MAAO,aACvD,mGACA,kC,8BAOA1I,KAAK0B,SAAS,CAAE8Q,MAAM,Q,GAzHRrL,IAAMC,WA4IjBC,iBAff,SAAyBC,GACvB,MAAO,CACLtD,KAAMsD,EAAMK,SAAS3D,KACrB/D,SAAUqH,EAAMrH,SAASsH,SAI7B,SAA4BQ,GAC1B,MAAO,CACL7D,UAAW,WACT6D,EAAS7D,mBAKAmD,CAA6CkL,I,oJCrJtDU,E,kDACJ,WAAYtV,GAAQ,IAAD,8BACjB,cAAMA,IAGDuV,MAAQ,EAAKA,MAAM/T,KAAX,gBAJI,E,qDASNa,KAAKrC,MAAMM,GAAtB,IAEI8Q,EAAS,qBAAK1O,UAAU,yBAAf,SACX,qBAAKA,UAAU,8CAA8C2B,QAAUhC,KAAKkT,MAA5E,kFAKF,OACE,sBAAK7S,UAAU,+BAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,qBAAKA,UAAU,kBAAkByB,MAAO,CAAE2G,gBAAiBzI,KAAKrC,MAAM+K,OAAtE,SACE,cAAC,IAAD,CAAiBzG,KAAO0G,EAAM3I,KAAKrC,MAAMsE,YAG7C,qBAAK5B,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOkQ,UAAW,EAAO3K,MAAQpG,KAAKrC,MAAMiL,MAAQvI,UAAU,2BAG5E0O,O,8BAON,IAAM9Q,EAAK+B,KAAKrC,MAAMM,GAEtB+B,KAAKmT,SAAS,CAAEnQ,MAAO/E,IAEvB+B,KAAKoT,gB,+BAGElF,GAAS,IAAD,OACflB,YAAQ,oBAAqBkB,GAC1B1I,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMwF,gBAEXC,QAAQC,IAAIiB,MAEbqB,OAAM,SAAAC,GACPxC,QAAQqE,MAAM,uFAAuB7B,U,GArDjBuB,IAAMC,WA6EjBC,mBAlBf,SAAyBC,GACvB,MAAO,CACLtD,KAAMsD,EAAMK,SAAS3D,KACrB/D,SAAUqH,EAAMrH,SAASsH,SAI7B,SAA4BQ,GAC1B,MAAO,CACL7D,UAAW,WACT6D,EAAS7D,gBAEXf,cAAe,WACb4E,EAAS5E,mBAKAkE,CAA6C4L,GC5EtDI,E,kDACJ,WAAY1V,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACX8U,QAAQ,EACRC,UAAU,EACVC,UAAU,GAIZ,EAAKC,QAAU,EAAKA,QAAQtU,KAAb,gBACf,EAAKuU,SAAW,EAAKA,SAASvU,KAAd,gBAChB,EAAKwU,OAAS,EAAKA,OAAOxU,KAAZ,gBACd,EAAKqU,SAAW,EAAKA,SAASrU,KAAd,gBAbC,E,qDAkBjB,IAAIoU,EAAW,qBAAKlT,UAAU,cAAf,SACb,cAAC,IAAD,CAAiB4B,KAAO2R,oBAEtBJ,EAAW,KAkBf,OAhBIxT,KAAKxB,MAAMgV,UAAYxT,KAAKxB,MAAM8U,OACpCE,EAAWxT,KAAKxB,MAAMgV,SAAS5M,KAAI,SAAC3F,EAAK6F,GACvC,OAAO,wBAAC,EAAD,2BAAkB7F,GAAlB,IAAwB6I,IAAKhD,SAE5B9G,KAAKxB,MAAMgV,UAAYxT,KAAKxB,MAAM8U,SAC5CE,EAAW,qBAAKnT,UAAU,cAAf,SACT,cAAC,IAAD,CAAiB4B,KAAO2R,qBAIxB5T,KAAKxB,MAAM+U,WACbA,EAAWvT,KAAKxB,MAAM+U,SAAS3M,KAAI,SAAC3F,EAAK6F,GACvC,OAAO,wBAAC,EAAD,2BAAkB7F,GAAlB,IAAwB6I,IAAKhD,SAKtC,sBAAKzG,UAAU,qCAAqCpC,GAAG,kBAAvD,UACE,qBAAKoC,UAAU,sBAAf,wDACA,sBAAKA,UAAU,kDAAkDpC,GAAG,eAApE,UACE,sBAAKoC,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO4R,eAE1B,qBAAKxT,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OACLR,UAAU,oBACVwI,YAAY,yEACZ5K,GAAG,SACH6K,aAAa,aAGxB,qBAAKzI,UAAU,yBAAf,SACE,8BACImT,SAIND,O,0CAKa,IAAD,OACZO,EAAQtT,SAASkC,eAAe,UACtCoR,EAAMxQ,iBAAiB,UAAWtD,KAAKyT,SACvCK,EAAMxQ,iBAAiB,WAAYtD,KAAK0T,UACxCI,EAAMxQ,iBAAiB,QAAStD,KAAK2T,QAEhC3T,KAAKxB,MAAM+U,UACdvG,YAAQ,qBAAsB,IAC3BxH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKD,SAAS,CAAE6R,SAAUjP,EAAKuF,OAE/BzG,QAAQC,IAAI,uCAEbsC,OAAM,SAAAC,GACPxC,QAAQC,IAAI,yC,gCAqBlB7C,SAASkC,eAAe,gBACrB+B,UAAUC,IAAI,+B,iCAIjB,IAAMoP,EAAQtT,SAASkC,eAAe,UACjC1C,KAAKxB,MAAMgV,UAAmC,IAAvBM,EAAM1N,MAAMlI,SACtC8B,KAAK0B,SAAS,CAAE4R,QAAQ,IACxB9S,SAASkC,eAAe,gBACrB+B,UAAUG,OAAO,gC,+BAKtB,IAAMkP,EAAQtT,SAASkC,eAAe,UACX,IAAvBoR,EAAM1N,MAAMlI,QACd8B,KAAKwT,SAASM,EAAM1N,OACpBpG,KAAK0B,SAAS,CAAE4R,QAAQ,KAExBtT,KAAK0B,SAAS,CAAE4R,QAAQ,M,+BAInBA,GAAS,IAAD,OACftG,YAAQ,qBAAsB,CAAEsG,WAC7B9N,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKD,SAAS,CAAE8R,SAAUlP,EAAKuF,OAE/BzG,QAAQC,IAAI,uCAEbsC,OAAM,SAAAC,GACPxC,QAAQC,IAAI,yC,6CAKhB,IAAMyQ,EAAQtT,SAASkC,eAAe,UACtCoR,EAAM1P,oBAAoB,UAAWpE,KAAKyT,SAC1CK,EAAM1P,oBAAoB,WAAYpE,KAAK0T,UAC3CI,EAAM1P,oBAAoB,QAASpE,KAAK2T,Y,GA/IrBxM,IAAMC,WAmKdC,iBAff,SAAyBC,GACvB,MAAO,CACLtD,KAAMsD,EAAMK,SAAS3D,KACrB/D,SAAUqH,EAAMrH,SAASsH,SAI7B,SAA4BQ,GAC1B,MAAO,CACL7D,UAAW,WACT6D,EAAS7D,mBAKAmD,CAA6CgM,I,gHC3KvCU,E,uKAGjB,OACE,qBAAK1T,UAAU,YAAf,SACE,+BACIL,KAAKrC,MAAMqW,e,yDANW7M,EAAMC,Y,gCCHxC,kCACA,IAAI4D,GAAU,EAKP,SAAS9G,IAMd,MAAO,CACLrD,KAAM,aACNoT,QANFjJ,EACc3F,MAAM,yBAAyBG,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAC/CL,MAAM,gBAAiB,CAAEC,OAAQ,SAAUE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,WAR9C,SAAzB7H,OAAOC,SAASoW,OAClBlJ,GAAU,I,4LCKSmJ,E,kDACnB,WAAYxW,GAAQ,IAAD,8BACjB,cAAOA,IAEFa,MAAQ,CACXoR,KAAM,CAAC,GAAI,GAAI,GAAI,IACnBwE,WAAW,EACXC,SAAU,GACVlE,MAAO,GACPJ,SAAU,GACVjN,KAAM,GACNwR,OAAQ,IAIV,EAAKC,WAAa,EAAKA,WAAWpV,KAAhB,gBAClB,EAAKf,OAAS,EAAKA,OAAOe,KAAZ,gBACd,EAAKqV,SAAW,EAAKA,SAASrV,KAAd,gBAChB,EAAKsV,YAAc,EAAKA,YAAYtV,KAAjB,gBAjBF,E,qDAoBT,IAAD,OAEHyQ,EAAO,CAAC,KAAM,KAAM,KAAM,MAC9BA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAM1B,IAAI4N,EAAa,KASjB,OARK1U,KAAKxB,MAAM4V,YACdM,EACE,qBAAKrU,UAAU,2BAA2BpC,GAAG,mBAA7C,SACE,cAAC,IAAD,CAAiBgE,KAAO0S,oBAM5B,sBAAKtU,UAAU,+BAAf,UACE,sBAAKA,UAAU,wBAAf,UACE,qBAAKC,IAAI,qBAAqBC,IAAI,IAAIF,UAAU,eAChD,sBAAMA,UAAU,YAAhB,qBAEF,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6N,aAE1B,qBAAKzP,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,6CAAU5K,GAAG,eAAeoC,UAAU,2BAGvEuP,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOI,aAE1B,qBAAKhC,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,uCAAS5K,GAAG,eAAeoC,UAAU,2BAGtEuP,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOiO,iBAE1B,sBAAK7P,UAAU,yBAAf,UACE,uBAAOQ,KAAK,OAAOgI,YAAY,iCAAQ5K,GAAG,YAAYoC,UAAU,sBAC9DqU,QAGJ9E,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOoP,YAE1B,qBAAKhR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,2BAAO5K,GAAG,UAAUoC,UAAU,2BAG/DuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,6CAA6CpC,GAAG,UAA/D,6HAIF,sBAAKoC,UAAU,yBAAf,wIACyB,cAAC,IAAD,CAAM0I,GAAG,WAAT,sD,0CAO7BvI,SAASkC,eAAe,WAAWY,iBAAiB,QAAStD,KAAKuU,YAC7DvU,KAAKxB,MAAM4V,WACd5T,SAASkC,eAAe,oBAAoBY,iBAAiB,QAAStD,KAAKwU,UAE7EhU,SAAS8C,iBAAiB,UAAWtD,KAAK5B,U,6CAI1CoC,SAASkC,eAAe,WAAW0B,oBAAoB,QAASpE,KAAKuU,YAChEvU,KAAKxB,MAAM4V,WACd5T,SAASkC,eAAe,oBAAoB0B,oBAAoB,QAASpE,KAAKwU,UAEhFhU,SAAS4D,oBAAoB,UAAWpE,KAAK5B,U,6BAGxCyG,GACa,UAAdA,EAAMiF,KACR9J,KAAKuU,e,uKAOPvU,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,GAAI,SAGfG,EAAWvP,SAASkC,eAAe,gBAAgB0D,OAC5ClI,OAAS,G,uBACpB8B,KAAK0B,SAAS,CACZkO,KAAM,CAAC,2LAAsC,GAAI,GAAI,M,iCAMjDtL,EAAOa,KAAKC,UAAU,CAAE2K,a,UACxB1K,MAAM,8BAA+B,CACzCC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAI3E,UAAQ0E,MAAK,SAAA1E,GACjB,SAATA,EAKK,EAAKY,SAAS,CAAEqO,aAJvB,EAAKrO,SAAS,CACZkO,KAAM,CAAC,yMAA0C,GAAI,GAAI,SAI5DjK,OAAM,SAAAC,GAAG,OAAIxC,QAAQC,IAAI,+BAAgC,IAAI4M,MAAMrK,O,WAGlEyO,EAAW7T,SAASkC,eAAe,gBAAgB0D,MACpD,eAAemG,KAAK8H,G,wBACvBrU,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,wHAA0B,GAAI,M,2BAGpC5P,KAAK0B,SAAS,CAAE2S,a,WAEnBlE,EAAQ3P,SAASkC,eAAe,aAAa0D,MAC9C,iCAAiCmG,KAAK4D,G,0CAClCnQ,KAAK0B,SAAS,CACnBkO,KAAM,CAAC,GAAI,GAAI,wHAA+B,O,WAI5C9M,EAAOtC,SAASkC,eAAe,WAAW0D,MAC3C,iBAAiBmG,KAAKzJ,G,wBACzB9C,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,GAAI,4Q,2BAGd5P,KAAK0B,SAAS,CAAEoB,S,WAGA,KAArB9C,KAAKxB,MAAM2R,OAAsC,KAAtBnQ,KAAKxB,MAAM8V,QAAkBtU,KAAKxB,MAAM4V,U,wBACrEpU,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,GAAI,0G,8BAMK,KAAxB5P,KAAKxB,MAAMuR,UAA2C,KAAxB/P,KAAKxB,MAAM6V,S,mDAGvC/P,EAAOa,KAAKC,UAAU,CAC1B2K,SAAU/P,KAAKxB,MAAMuR,SACrBsE,SAAUrU,KAAKxB,MAAM6V,SACrBlE,MAAOnQ,KAAKxB,MAAM2R,MAClBrN,KAAM9C,KAAKxB,MAAMsE,KACjBwR,OAAQtU,KAAKxB,MAAM8V,SAErBjP,MAAM,YAAa,CACjBC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAoP,GAAQ,OAAIA,EAAS9T,UAAQ0E,MAAK,SAAA1E,GACxC,OAAQA,GACN,IAAK,KACHsC,QAAQC,IAAI,OACZ7C,SAAS1C,SAASC,KAAO,WACzB,MACF,IAAK,cACH,EAAK2D,SAAS,CAAEkO,KAAM,CAAC,GAAI,GAAI,GAAI,kGACnC,MACF,IAAK,OACH,EAAKlO,SAAS,CAAEkO,KAAM,CAAC,oJAA4C,GAAI,GAAI,IAAKwE,WAAW,IAC3F,MACF,QACE,EAAK1S,SAAS,CAAEkO,KAAM,CAAC,6GAAyB,GAAI,GAAI,U,wIAMpD,IAAD,OACHO,EAAQ3P,SAASkC,eAAe,aAAa0D,MACnD,IAAK,iCAAiCmG,KAAK4D,GACzC,OAAOnQ,KAAK0B,SAAS,CACnBkO,KAAM,CAAC,GAAI,GAAI,wHAA+B,MAKhD,IAAMtL,EAAOa,KAAKC,UAAU,CAAE+K,UAC9B9K,MAAM,8BAA+B,CACnCC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAI3E,UAAQ0E,MAAK,SAAA1E,GAC9B,GAAa,SAATA,EACF,OAAO,EAAKY,SAAS,CACnBkO,KAAM,CAAC,GAAI,GAAI,qKAAyC,IAAKwE,WAAW,IAG1E,EAAK1S,SAAS,CAAEyO,UAChB,EAAKsE,iBAEN9O,OAAM,SAAAC,GAAG,OAAIxC,QAAQC,IAAI,4BAA6B,IAAI4M,MAAMrK,S,oCAIxD,IAAD,OAGNuK,EAAQnQ,KAAKxB,MAAM2R,MACnB7L,EAAOa,KAAKC,UAAU,CAAE+K,UAC9B9K,MAAM,uBAAwB,CAC5BC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GAC9B,GAAoB,OAAhBA,EAAK3C,OACP,OAAO,EAAKD,SAAS,CACnBkO,KAAM,CAAC,GAAI,GAAI,GAAI,uNACnBwE,WAAW,IAGf,EAAK1S,SAAS,CAAE0S,WAAW,EAAMjE,QAAOmE,OAAQhQ,EAAKgQ,gB,GA/QpBnN,IAAMC,WCFxByN,E,uKAEjB,OACE,qBAAKxU,UAAU,WAAf,SACE,cAAC,EAAD,U,GAJ6B8G,IAAMC,WCEtB+M,E,kDACnB,WAAYxW,GAAQ,IAAD,8BACjB,cAAOA,IAEFa,MAAQ,CACXoR,KAAM,CAAC,GAAI,GAAI,KAIjB,EAAK2E,WAAa,EAAKA,WAAWpV,KAAhB,gBAClB,EAAKf,OAAS,EAAKA,OAAOe,KAAZ,gBATG,E,qDAYT,IAAD,OAEHyQ,EAAO,CAAC,KAAM,KAAM,MAWxB,OAVAA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAOxB,sBAAKzG,UAAU,+BAAf,UACE,sBAAKA,UAAU,wBAAf,UACE,qBAAKC,IAAI,qBAAqBC,IAAI,IAAIF,UAAU,eAChD,sBAAMA,UAAU,YAAhB,qBAEF,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6N,aAE1B,qBAAKzP,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,6CAAU5K,GAAG,eAAeoC,UAAU,2BAGvEuP,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOI,aAE1B,qBAAKhC,UAAU,yBAAf,SACE,uBAAOQ,KAAK,WAAWgI,YAAY,uCAAS5K,GAAG,eAAeoC,UAAU,2BAG1EuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,4CAA4CpC,GAAG,UAA9D,+CAIA2R,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,sBAAKA,UAAU,yBAAf,2JAC6B,cAAC,IAAD,CAAM0I,GAAG,WAAT,uFAG/B,qBAAK1I,UAAU,yBAAf,SACE,sBAAKA,UAAU,0DAAf,wFACiB,cAAC,IAAD,CAAM0I,GAAG,mBAAT,kG,0CAQvBvI,SAASkC,eAAe,WAAWY,iBAAiB,QAAStD,KAAKuU,YAClE/T,SAAS8C,iBAAiB,UAAWtD,KAAK5B,U,6CAI1CoC,SAASkC,eAAe,WAAW0B,oBAAoB,QAASpE,KAAKuU,YACrE/T,SAAS4D,oBAAoB,UAAWpE,KAAK5B,U,6BAGxCyG,GACa,UAAdA,EAAMiF,KACR9J,KAAKuU,e,mCAIK,IAAD,OAGXvU,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,MAIjB,IAAMG,EAAWvP,SAASkC,eAAe,gBAAgB0D,MACzD,GAAwB,IAApB2J,EAAS7R,OAAb,CAQA,IAAMmW,EAAW7T,SAASkC,eAAe,gBAAgB0D,MACzD,GAAK,eAAemG,KAAK8H,GAAzB,CAQA,IAAM/P,EAAOa,KAAKC,UAAU,CAC1B2K,SAAUA,EACVsE,SAAUA,IAEZhP,MAAM,YAAa,CACjBC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAoP,GAAQ,OAAIA,EAASlP,UAAQF,MAAK,SAAAlB,GACxC,GAAoB,OAAhBA,EAAK3C,OAAiB,CACxByB,QAAQC,IAAI,MAGZ,IAAMvF,EAAWD,OAAOC,SAASC,KACjCF,OAAOC,SAASC,KAAOD,EAASgX,QAAQ,UAAW,aAEnD,EAAKpT,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,sJA3BnB5P,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,yFAAoB,WAVjC5P,KAAK0B,SAAS,CACZkO,KAAM,CAAC,0IAA6B,GAAI,U,GAjGTzI,IAAMC,WCFxB2N,E,uKAEjB,OACE,qBAAK1U,UAAU,WAAf,SACE,cAAC,EAAD,U,GAJ6B8G,IAAMC,WCEtB4N,E,kDACnB,WAAYrX,GAAQ,IAAD,8BACjB,cAAOA,IAEFa,MAAQ,CACXoR,KAAM,CAAC,GAAI,GAAI,GAAI,IACnBwE,WAAW,EACXC,SAAU,GACVlE,MAAO,GACPJ,SAAU,GACVjN,KAAM,GACNwR,OAAQ,IAIV,EAAKC,WAAa,EAAKA,WAAWpV,KAAhB,gBAClB,EAAKf,OAAS,EAAKA,OAAOe,KAAZ,gBACd,EAAKqV,SAAW,EAAKA,SAASrV,KAAd,gBAhBC,E,qDAmBT,IAAD,OAEHyQ,EAAO,CAAC,KAAM,KAAM,KAAM,MAC9BA,EAAOA,EAAKhJ,KAAI,SAAC8D,EAAM5D,GACrB,GAA+B,KAA3B,EAAKtI,MAAMoR,KAAK9I,GAClB,OACE,qBAAKzG,UAAU,uBAAf,SACI,EAAK7B,MAAMoR,KAAK9I,QAM1B,IAAI4N,EAAa,KASjB,OARK1U,KAAKxB,MAAM4V,YACdM,EACE,qBAAKrU,UAAU,2BAA2BpC,GAAG,mBAA7C,SACE,cAAC,IAAD,CAAiBgE,KAAO0S,oBAM5B,sBAAKtU,UAAU,+BAAf,UACE,sBAAKA,UAAU,wBAAf,UACE,qBAAKC,IAAI,qBAAqBC,IAAI,IAAIF,UAAU,eAChD,sBAAMA,UAAU,YAAhB,qBAEF,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6N,aAE1B,qBAAKzP,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,6CAAU5K,GAAG,eAAeoC,UAAU,2BAGvEuP,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOiO,iBAE1B,sBAAK7P,UAAU,yBAAf,UACE,uBAAOQ,KAAK,OAAOgI,YAAY,iCAAQ5K,GAAG,YAAYoC,UAAU,sBAC9DqU,QAGJ9E,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOoP,YAE1B,qBAAKhR,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,2BAAO5K,GAAG,UAAUoC,UAAU,2BAG/DuP,EAAK,GACP,sBAAKvP,UAAU,yBAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOI,aAE1B,qBAAKhC,UAAU,yBAAf,SACE,uBAAOQ,KAAK,OAAOgI,YAAY,sEAAe5K,GAAG,mBAAmBoC,UAAU,2BAGhFuP,EAAK,GACP,qBAAKvP,UAAU,yBAAf,SACE,qBAAKA,UAAU,8CAA8CpC,GAAG,UAAhE,gGAIF,qBAAKoC,UAAU,yBAAf,qWAGA,sBAAKA,UAAU,0DAAf,oEAEE,cAAC,IAAD,CAAM0I,GAAG,WAAT,qG,0CAONvI,SAASkC,eAAe,WAAWY,iBAAiB,QAAStD,KAAKuU,YAClE/T,SAAS8C,iBAAiB,UAAWtD,KAAK5B,QACrC4B,KAAKxB,MAAM4V,WACd5T,SAASkC,eAAe,oBAAoBY,iBAAiB,QAAStD,KAAKwU,Y,6CAK7EhU,SAASkC,eAAe,WAAW0B,oBAAoB,QAASpE,KAAKuU,YACrE/T,SAAS4D,oBAAoB,UAAWpE,KAAK5B,QACxC4B,KAAKxB,MAAM4V,WACd5T,SAASkC,eAAe,oBAAoB0B,oBAAoB,QAASpE,KAAKwU,Y,6BAI3E3P,GACa,UAAdA,EAAMiF,KACR9J,KAAKuU,e,yKAOPvU,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,GAAI,SAGfG,EAAWvP,SAASkC,eAAe,gBAAgB0D,OAC5ClI,OAAS,G,uBACpB8B,KAAK0B,SAAS,CACZkO,KAAM,CAAC,2LAAsC,GAAI,GAAI,M,iCAMjDtL,EAAOa,KAAKC,UAAU,CAAE2K,a,UACxB1K,MAAM,8BAA+B,CACzCC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAI3E,UAAQ0E,MAAK,SAAA1E,GACjB,SAATA,EAKK,EAAKY,SAAS,CAAEqO,aAJvB,EAAKrO,SAAS,CACZkO,KAAM,CAAC,sLAAsC,GAAI,GAAI,SAIxDjK,OAAM,SAAAC,GAAG,OAAIxC,QAAQC,IAAI,+BAAgC,IAAI4M,MAAMrK,O,WAGlEyO,EAAW7T,SAASkC,eAAe,oBAAoB0D,MACxD,eAAemG,KAAK8H,G,wBACvBrU,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,GAAI,2H,2BAGd5P,KAAK0B,SAAS,CAAE2S,a,WAEnBlE,EAAQ3P,SAASkC,eAAe,aAAa0D,MAC9C,iCAAiCmG,KAAK4D,G,wBACzCnQ,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,wHAA+B,GAAI,M,kCAM1CtL,EAAOa,KAAKC,UAAU,CAAE+K,U,UACxB9K,MAAM,8BAA+B,CACzCC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAI3E,UAAQ0E,MAAK,SAAA1E,GACjB,SAATA,EAKK,EAAKY,SAAS,CAAEyO,UAJvB,EAAKzO,SAAS,CACZkO,KAAM,CAAC,GAAI,kJAAgC,GAAI,IAAKwE,WAAW,OAIlEzO,OAAM,SAAAC,GAAG,OAAIxC,QAAQC,IAAI,4BAA6B,IAAI4M,MAAMrK,O,WAG/D9C,EAAOtC,SAASkC,eAAe,WAAW0D,MAC3C,iBAAiBmG,KAAKzJ,G,wBACzB9C,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,yQAAwD,M,2BAGlE5P,KAAK0B,SAAS,CAAEoB,S,WAGA,KAArB9C,KAAKxB,MAAM2R,OAAsC,KAAtBnQ,KAAKxB,MAAM8V,QAAkBtU,KAAKxB,MAAM4V,U,wBACrEpU,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,uGAAwB,M,8BAMf,KAAxB5P,KAAKxB,MAAMuR,UAA2C,KAAxB/P,KAAKxB,MAAM6V,S,mDAGvC/P,EAAOa,KAAKC,UAAU,CAC1B2K,SAAU/P,KAAKxB,MAAMuR,SACrBO,YAAatQ,KAAKxB,MAAM6V,SACxBlE,MAAOnQ,KAAKxB,MAAM2R,MAClBrN,KAAM9C,KAAKxB,MAAMsE,KACjBwR,OAAQtU,KAAKxB,MAAM8V,SAGrBjP,MAAM,oBAAqB,CACzBC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAoP,GAAQ,OAAIA,EAAS9T,UAAQ0E,MAAK,SAAA1E,GACxC,OAAQA,GACN,IAAK,KACHsC,QAAQC,IAAI,OACZ7C,SAAS1C,SAASC,KAAO,WACzB,MACF,IAAK,cACH,EAAK2D,SAAS,CAAEkO,KAAM,CAAC,GAAI,GAAI,+FAAqB,MACpD,MACF,IAAK,OACH,EAAKlO,SAAS,CAAEkO,KAAM,CAAC,oJAA4C,GAAI,GAAI,IAAKwE,WAAW,IAC3F,MACF,QACE,EAAK1S,SAAS,CAAEkO,KAAM,CAAC,6GAAyB,GAAI,GAAI,U,wIAMpD,IAAD,OACHO,EAAQ3P,SAASkC,eAAe,aAAa0D,MACnD,GAAK,iCAAiCmG,KAAK4D,GAA3C,CAQA,IAAM7L,EAAOa,KAAKC,UAAU,CAAE+K,UAC9B9K,MAAM,+BAAgC,CACpCC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OAMT,EAAKD,SAAS,CAAE0S,WAAW,EAAMjE,QAAOmE,OAAQhQ,EAAKgQ,SALnD,EAAK5S,SAAS,CACZkO,KAAM,CAAC,GAAI,GAAI,sNAA6C,IAC5DwE,WAAW,YAnBfpU,KAAK0B,SAAS,CACZkO,KAAM,CAAC,GAAI,wHAA+B,GAAI,U,GA1PdzI,IAAMC,WCFzByN,E,uKAEjB,OACE,qBAAKxU,UAAU,WAAf,SACE,cAAC,EAAD,U,GAJ6B8G,IAAMC,W,+CCMrC6N,E,kDACJ,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IAGDC,UAAY,EAAKA,UAAUhW,KAAf,gBACjB,EAAKiW,WAAa,EAAKA,WAAWjW,KAAhB,gBALF,E,qDAQR,IAAD,OACP,OACE,qBAAKkB,UAAU,oBAAoBpC,GAAE,oBAAgB+B,KAAKrC,MAAMM,IAAhE,SACE,0BAASoC,UAAU,4CAAnB,UACE,yBAAQA,UAAU,uBAAlB,cAA4CL,KAAKrC,MAAMiL,OAAS,cAAhE,OACA,qBAAKvI,UAAU,sBACV2B,QAAS,kBAAM,EAAKmR,SAAS,CAAEnQ,MAAO,EAAKrF,MAAMM,MADtD,SAEE,cAAC,IAAD,CAAiBgE,KAAO0G,cAE1B,cAAC,IAAD,CACE7G,MAAO,CAAE2G,gBAAiBzI,KAAKrC,MAAM+K,OAAS,WAC9CrI,UAAU,qBACV0I,GAAE,oBAAgB/I,KAAKrC,MAAMM,IAH/B,SAIE,cAAC,IAAD,CAAiBgE,KAAO0G,EAAM3I,KAAKrC,MAAMsE,MAAQ,gBAEnD,wBAAQ5B,UAAU,uBAAlB,SACIL,KAAKrC,MAAMM,Y,0CAQrBuC,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOqF,iBAAiB,YAAatD,KAAKmV,WAC3F3U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOqF,iBAAiB,aAActD,KAAKoV,c,6CAI5F5U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOmG,oBAAoB,YAAapE,KAAKmV,WAC9F3U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOmG,oBAAoB,aAAcpE,KAAKoV,c,+BAGxFlH,GAAS,IAAD,OACflB,YAAQ,oBAAqBkB,GAC1B1I,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OACP,EAAKhE,MAAMwF,iBAEXC,QAAQC,IAAIiB,GACZqN,MAAM,sHAEPhM,OAAM,SAAAC,GACPxC,QAAQqE,MAAM,uFAAuB7B,GACrC+L,MAAM,uH,gCAIA9M,GACR,IAAMwQ,EAAW7U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAE5DqX,GADOD,EAAS7Q,cAAc,KACvB6Q,EAAS7Q,cAAc,YAEhC+Q,EAAcF,EAASG,wBACf3Q,EAAM4Q,QAAUF,EAAYzQ,KAC5BD,EAAM6Q,QAAUH,EAAYpG,IAexCmG,EAAKxT,MAAM6T,UAAX,U,iCAIS9Q,GACT,IAAMwQ,EAAW7U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAC5DgE,EAAOoT,EAAS7Q,cAAc,KAC9B8Q,EAAOD,EAAS7Q,cAAc,WAEpCvC,EAAKH,MAAM8T,OAAS,IACpBN,EAAKxT,MAAM8T,OAAS,Q,GAzFEzO,IAAMC,WAyGjBC,mBAZf,SAAyBC,GACvB,MAAO,MAGT,SAA4BS,GAC1B,MAAO,CACL5E,cAAe,WACb4E,EAAS5E,mBAKAkE,CAA6C4N,GC7GvCY,E,kDACnB,WAAYX,GAAO,IAAD,8BAChB,cAAMA,IAGDC,UAAY,EAAKA,UAAUhW,KAAf,gBACjB,EAAKiW,WAAa,EAAKA,WAAWjW,KAAhB,gBALF,E,qDAQR,IAAD,OACP,OACE,qBAAKkB,UAAU,oCAAoCpC,GAAE,oBAAgB+B,KAAKrC,MAAMM,IAAhF,SACE,0BAASoC,UAAU,eAAnB,UACE,yBAAQA,UAAU,uBAAlB,cAA4CL,KAAKrC,MAAMiL,OAAS,cAAhE,OACA,sBAAKvI,UAAU,aACV2B,QAAU,kBAAM,EAAKrE,MAAMmY,cAAc,EAAKnY,QADnD,UAEE,qBAAK0C,UAAU,WAAf,SACIL,KAAKrC,MAAMoY,aAEf,qBAAK1V,UAAU,QAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO0G,kBAE1B,qBACE7G,MAAO,CAAE2G,gBAAiBzI,KAAKrC,MAAM+K,OAAS,WAC9CrI,UAAU,qBAFZ,SAGE,cAAC,IAAD,CAAiB4B,KAAO0G,EAAM3I,KAAKrC,MAAMsE,MAAQ,mBAGrD,wBAAQ5B,UAAU,uBAAlB,SACIL,KAAKrC,MAAMM,Y,0CAQrBuC,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOqF,iBAAiB,YAAatD,KAAKmV,WAC3F3U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOqF,iBAAiB,aAActD,KAAKoV,c,6CAI5F5U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOmG,oBAAoB,YAAapE,KAAKmV,WAC9F3U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAAOmG,oBAAoB,aAAcpE,KAAKoV,c,gCAGvFvQ,GACR,IAAMwQ,EAAW7U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAE5DqX,GADOD,EAAS7Q,cAAc,KACvB6Q,EAAS7Q,cAAc,YAEhC+Q,EAAcF,EAASG,wBACf3Q,EAAM4Q,QAAUF,EAAYzQ,KAC5BD,EAAM6Q,QAAUH,EAAYpG,IAexCmG,EAAKxT,MAAM6T,UAAX,U,iCAIS9Q,GACQrE,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMM,KAE5CuG,cAAc,WAG/B1C,MAAM8T,OAAS,Q,GA9EezO,IAAMC,W,QCCvC4O,E,kDACJ,WAAYd,GAAO,IAAD,8BAChB,cAAMA,IAGDC,UAAY,EAAKA,UAAUhW,KAAf,gBACjB,EAAKiW,WAAa,EAAKA,WAAWjW,KAAhB,gBAClB,EAAK8W,WAAa,EAAKA,WAAW9W,KAAhB,gBAClB,EAAK+W,SAAW,EAAKA,SAAS/W,KAAd,gBAEhB,EAAKX,MAAQ,CACX2X,YAAY,GAVE,E,qDAiBhB,IAAIlU,EAAOkP,aACPnR,KAAKxB,MAAM2X,aACblU,EAAOmU,iBAMT,OACE,qBAAK/V,UAAU,mCAAmCpC,GAAE,oBAAgB+B,KAAKrC,MAAMwK,QAA/E,SACE,0BAAS9H,UAAU,yBAAnB,UACE,sBAAKA,UAAU,kBAAf,UANO,IAMP,IACW,uBADX,cAEe,uBAAOQ,KAAK,OAAO5C,GAAE,oBAAgB+B,KAAKrC,MAAMwK,UAF/D,IAE4E,uBAF5E,YAGa,uBAAOtH,KAAK,OAAOkQ,UAAQ,EAAC9S,GAAE,kBAAc+B,KAAKrC,MAAMwK,UAHpE,IAGiF,uBAHjF,cAIe,uBAAOtH,KAAK,OAAO5C,GAAE,oBAAgB+B,KAAKrC,MAAMwK,UAJ/D,IAI4E,uBATpE,OAYR,sBAAK9H,UAAU,QAAf,UACE,sBAAK2B,QAAUhC,KAAKiW,WACfhY,GAAE,uBAAmB+B,KAAKrC,MAAMwK,QADrC,cACiD,cAAC,IAAD,CAAiBlG,KAAOA,IADzE,OAEA,sBAAKD,QAAUhC,KAAKkW,SACfjY,GAAE,oBAAgB+B,KAAKrC,MAAMwK,QADlC,cAC8C,cAAC,IAAD,CAAiBlG,KAAOoU,WADtE,iB,0CASR7V,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAC9C7E,iBAAiB,YAAatD,KAAKmV,WACtC3U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAC9C7E,iBAAiB,aAActD,KAAKoV,YAGvC5U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAAU/B,MAAQpG,KAAKrC,MAAMyM,KAC9E5J,SAASkC,eAAT,kBAAoC1C,KAAKrC,MAAMwK,SAAU/B,MAAQpG,KAAKrC,MAAMwK,OAC5E3H,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAAU/B,MAAQpG,KAAKrC,MAAMyK,W,6CAI9E5H,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAC9C/D,oBAAoB,YAAapE,KAAKmV,WACzC3U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAC9C/D,oBAAoB,aAAcpE,KAAKoV,c,gCAGlCvQ,GACR,IAAMwQ,EAAW7U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAE5DmN,GADOD,EAAS7Q,cAAc,OACvB6Q,EAAS7Q,cAAc,YAEhC+Q,EAAcF,EAASG,wBACf3Q,EAAM4Q,QAAUF,EAAYzQ,KAC5BD,EAAM6Q,QAAUH,EAAYpG,IAexCmG,EAAKxT,MAAM6T,UAAX,U,iCAIS9Q,GACT,IAAMwQ,EAAW7U,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAC5DlG,EAAOoT,EAAS7Q,cAAc,OAC9B8Q,EAAOD,EAAS7Q,cAAc,WAEpCvC,EAAKH,MAAM8T,OAAS,IACpBN,EAAKxT,MAAM8T,OAAS,M,mCAGR,IAAD,OACX,GAAK5V,KAAKxB,MAAM2X,WAAhB,CAMA,IAAM7R,EAAOa,KAAKC,UAAU,CAAE+C,OAAQnI,KAAKrC,MAAMwK,SACjD9C,MAAM,kBAAmB,CACvBC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SAECkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GAAI,OAAI,EAAK3G,MAAM2Y,gBAChD3Q,OAAM,kBAAM,EAAKhI,MAAM2Y,qBAfxBtW,KAAK0B,SAAS,CAAEyU,YAAY,M,iCAkBpB,IAAD,OAEH/L,EAAO5J,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAAU/B,MAClEgC,EAAW5H,SAASkC,eAAT,oBAAsC1C,KAAKrC,MAAMwK,SAAU/B,MAGtE9B,EAAOa,KAAKC,UAAU,CAC1B+C,OAAQnI,KAAKrC,MAAMwK,OACnBiC,OAAMhC,aAER/C,MAAM,kBAAmB,CACvBC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SAECkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GAAI,OAAI,EAAK3G,MAAM2Y,gBAChD3Q,OAAM,kBAAM,EAAKhI,MAAM2Y,oB,GA5IPnP,IAAMC,WA4JdC,mBAZf,SAAyBC,GACvB,MAAO,MAGT,SAA4BS,GAC1B,MAAO,CACLuO,WAAY,WACVvO,EAASuO,mBAKAjP,CAA6C2O,G,wCC9ItDO,E,kDACJ,WAAY5Y,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACXG,SAAS,EACT6X,aAAa,GAIf,EAAKC,WAAa,EAAKA,WAAWtX,KAAhB,gBAClB,EAAK2W,cAAgB,EAAKA,cAAc3W,KAAnB,gBACrB,EAAKuP,MAAQ,EAAKA,MAAMvP,KAAX,gBACb,EAAKuX,QAAU,EAAKA,QAAQvX,KAAb,gBAZE,E,qDAeT,IAAD,OAGH0K,EAAO,KACP8M,EAAS,KACR3W,KAAKrC,MAAMwC,oBAAuBH,KAAKrC,MAAMyC,gBAGhDyJ,EAAO7J,KAAKrC,MAAMsC,SAAS2G,KAAI,SAACjJ,EAAOmJ,GACrC,OACE,wBAAC,EAAD,2BAAWnJ,GAAX,IAAmBmM,IAAQhD,QAa/B6P,GARAA,EAAS3W,KAAKrC,MAAMsC,SAAS2G,KAAI,SAACjJ,EAAOmJ,GACvC,OACE,wBAAC,EAAD,2BAAgBnJ,GAAhB,IACWmM,IAAQhD,EACRgP,cAAkB,EAAKA,qBAItBrL,QAAO,SAAAC,GAAI,MAAwB,UAApBA,EAAK/M,MAAMkD,QAC1CgJ,EAAOA,EAAKY,QAAO,SAAAC,GAAI,MAAwB,QAApBA,EAAK/M,MAAMkD,SAIxC,IAAI+V,EAAQ,KACP5W,KAAKrC,MAAMkZ,iBAAoB7W,KAAKrC,MAAMmZ,aAC7CF,EAAQ5W,KAAKrC,MAAMiZ,MAAMhQ,KAAI,SAACjJ,EAAOmJ,GACnC,OACE,wBAAC,EAAD,2BAAWnJ,GAAX,IAAmBmM,IAAQhD,SAMjC,IAcI1F,EAdA2V,EAAa,KACbC,EAAK,KACLL,GAAUA,EAAOzY,OAAS,IAC5B6Y,EACE,qBAAK1W,UAAU,gBAAf,SACE,yBAASA,UAAU,QAAnB,SACIsW,MAIRK,EAAK,wBAKkB5V,EAAzBpB,KAAKrC,MAAMyD,MAAMO,OAAgB,cAAC,IAAD,CAAMC,IAAM,cAAC,IAAD,eAAa5B,KAAKxB,MAAMgY,gBAA8B,KAGnG,IAAI7X,EAAU,KAQd,OAPIqB,KAAKxB,MAAMG,UACbA,EAAU,cAACsY,EAAA,EAAD,eAAcjX,KAAKxB,MAAMG,UACnC2C,YAAW,WACT,EAAKI,SAAS,CAAE/C,SAAS,MACxB,MAIH,gCACIyC,EACAzC,EACF,cAACuY,EAAA,EAAD,CAAQC,KAAK,uBACb,qBAAK9W,UAAU,gBAAf,SACE,0BAASA,UAAU,QAAnB,UAQIwJ,EAEF,qBAAKxJ,UAAU,oBAAqBpC,GAAG,yBAAvC,SACE,yBAASoC,UAAU,oBAAoBpC,GAAG,qBAA1C,SACE,qBAAKoC,UAAU,0BAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6J,sBAMhCkL,EAxBJ,IAwBWD,EACT,uBACA,qBAAK1W,UAAU,gBAAf,SACE,0BAASA,UAAU,QAAnB,UAQIuW,EAEF,qBAAKvW,UAAU,oBAAqBpC,GAAG,sBAAvC,SACE,yBAASoC,UAAU,mCAAmCpC,GAAG,kBAAzD,SACE,qBAAKoC,UAAU,+CAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO6J,2B,0CAWtC,IAAMsL,EAAc5W,SAASkC,eAAT,0BACpB0U,EAAY9T,iBAAiB,YAAa,CAAE+T,YAAarX,KAAKmV,UAAWmC,OAAQF,IACjFA,EAAY9T,iBAAiB,aAAc,CAAE+T,YAAarX,KAAKoV,WAAYkC,OAAQF,IAEnF,IAAMG,EAAW/W,SAASkC,eAAT,uBACjB6U,EAASjU,iBAAiB,YAAa,CAAE+T,YAAarX,KAAKmV,UAAWmC,OAAQC,IAC9EA,EAASjU,iBAAiB,aAAc,CAAE+T,YAAarX,KAAKoV,WAAYkC,OAAQC,IAE3EvX,KAAKrC,MAAMuC,mBAAsBF,KAAKrC,MAAMwC,oBAC/CH,KAAKrC,MAAMwF,gBAGTnD,KAAKrC,MAAMyC,gBACbgD,QAAQC,IAAI,8MACZrD,KAAK0B,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAOC,KAAM,iNAG1Cd,KAAKrC,MAAM6Z,gBAAmBxX,KAAKrC,MAAMkZ,iBAC5C7W,KAAKrC,MAAM2Y,aAGTtW,KAAKrC,MAAMmZ,aACb1T,QAAQC,IAAI,8MACZrD,KAAK0B,SAAS,CAAC/C,QAAS,CAAEkC,MAAM,EAAOC,KAAM,qMAG/CN,SAASkC,eAAT,0BAAkDY,iBAAiB,QAAStD,KAAKyW,YACjFjW,SAASkC,eAAT,uBAA+CY,iBAAiB,QAAStD,KAAK0W,SAM/D,IAAI3S,IAAW/D,KAAKrC,MAAMqG,KAAKC,OAAQ,eAAgBjE,KAAKrC,MAAMuG,WAC1EC,Q,6CAIP3D,SAASkC,eAAT,0BAAkD0B,oBAAoB,YAAapE,KAAKmV,WACxF3U,SAASkC,eAAT,0BAAkD0B,oBAAoB,aAAcpE,KAAKoV,YACzF5U,SAASkC,eAAT,0BAAkD0B,oBAAoB,QAASpE,KAAKyW,YACpFjW,SAASkC,eAAT,uBAA+C0B,oBAAoB,QAASpE,KAAK0W,SAEjFlW,SAASkC,eAAT,uBAA+C0B,oBAAoB,YAAapE,KAAKmV,WACrF3U,SAASkC,eAAT,uBAA+C0B,oBAAoB,aAAcpE,KAAKoV,c,mCAItFpV,KAAKrC,MAAMsH,iBAAiBjF,KAAKrC,MAAMyD,MAAMO,OAAQ,S,oCAGzC6U,GACZxW,KAAK0B,SAAS,CAAE8U,gBAChBxW,KAAKrC,MAAMsH,iBAAiBjF,KAAKrC,MAAMyD,MAAMO,OAAQ,S,gCAG5C,IAAD,OAGR0D,MAAM,kBAAmB,CACvBC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,sBAGjBC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GAAI,OAAI,EAAK3G,MAAM2Y,gBAChD3Q,OAAM,kBAAM,EAAKhI,MAAM2Y,kB,8BAI1BtW,KAAK0B,SAAS,CACZN,OAAO,M,gCAIDyD,GACR,IAAI4S,EAAWzX,KAAKsX,OAChBrV,EAAOwV,EAASjT,cAAc,sBAE9B+Q,EAAckC,EAASjC,wBACvBkC,EAAQ7S,EAAM4Q,QAAUF,EAAYzQ,KACpC6S,EAAQ9S,EAAM6Q,QAAUH,EAAYpG,IAGxCuI,IAAU,GAAIA,GAAS,GACvBC,IAAU,KAAMA,GAAS,GAEzB1V,EAAKH,MAAM7C,WAAX,UAAmC,EAARyY,EAA3B,MACAzV,EAAKH,MAAM6T,UAAX,UAAkC,EAARgC,EAA1B,Q,iCAGS9S,GACE7E,KAAKsX,OAAO9S,cAAc,sBAChC1C,MAAM8T,OAAS,Q,GAlOGzO,IAAMC,WA8QlBC,mBAxCf,SAAyBC,GACvB,MAAO,CAGLrH,SAAUqH,EAAMrH,SAASsH,KACzBpH,mBAAoBmH,EAAMrH,SAASuH,WACnCpH,cAAekH,EAAMrH,SAASwH,MAC9BvH,kBAAmBoH,EAAMrH,SAASyH,UAGlCtG,MAAOkG,EAAMQ,cAGb9D,KAAMsD,EAAMK,SAAS3D,KAGrB4S,MAAOtP,EAAMsP,MAAMrP,KACnBsP,gBAAiBvP,EAAMsP,MAAMpP,WAC7BsP,WAAYxP,EAAMsP,MAAMnP,MACxB+P,eAAgBlQ,EAAMsP,MAAMlP,cAIhC,SAA4BK,GAC1B,MAAO,CACL5E,cAAe,WACb4E,EAAS5E,gBAEXmT,WAAY,WACVvO,EAASuO,gBAEXrR,iBAAkB,SAACzG,EAAOC,GACxBsJ,EAAS9C,YAAiBzG,EAAOC,KAEnCyF,UAAW,WACT6D,EAAS7D,mBAKAmD,CAA6CkP,G,kDCxRvCqB,E,kDACnB,WAAYja,GAAQ,IAAD,uBACjB,cAAMA,IAEDa,MAAQ,CACXyC,KAAK,EACL+C,MAAM,EACN4B,KAAK,EACLiS,WAAY,MAId,EAAK5Z,GAAK,EAAKN,MAAMG,SAASga,SAAS9Z,MAAM,KAAK,GAClD,IAAIgN,EAAU,EAAKrN,MAAMG,SAASwV,OAAOtV,MAAM,aAAa,GAZ3C,OAcb,EAAKgN,QADG,UAAZA,EAbiB,E,qDAsBjB,OAAKhL,KAAKxB,MAAMyC,KAAQjB,KAAKxB,MAAMwF,MAAUhE,KAAKxB,MAAMoH,IAOrD5F,KAAKxB,MAAMoH,IAEV,qBAAK9D,MAAO,CAAE9C,MAAO,QAAS2B,OAAQ,SAAtC,SACE,cAACsW,EAAA,EAAD,CAASpW,MAAM,EACNC,KAAK,qJACLC,UAAYf,KAAKxB,MAAMqZ,WACvB7W,QAAQ,MAMrB,sBAAKc,MAAO,CAAE9C,MAAO,QAAS2B,OAAQ,QAAS8H,gBAAiB,SAAhE,UACE,cAAC,IAAD,CAAiBxG,KAAO8V,SAASjW,MAAO,CAAEyJ,QAAS,UACnD,cAACyM,EAAA,EAAD,CACE/W,IAAQjB,KAAKxB,MAAMyC,IACnBhD,GAAG,qBACH+M,QAAUhL,KAAKgL,QACfhH,KAAOhE,KAAKxB,MAAMwF,KAClBhB,MAAQhD,KAAK/B,QAxBf,qBAAK6D,MAAO,CAAE9C,MAAO,QAAS2B,OAAQ,QAAS8H,gBAAiB,a,0CA6BjD,IAAD,OAGlB,IAAKzI,KAAKxB,MAAMyC,IAAK,CACnB,IAAImJ,EAAO,SACPpK,KAAKgL,UAAWZ,EAAO,WAC3B,IAAMnJ,EAAMkE,KAAK6B,MAAMlB,aAAaS,QAAQ6D,EAAOpK,KAAK/B,KAClD+F,EAAOmB,KAAK6B,MAAMlB,aAAaS,QAAQ,SAEzCtF,GAAO+C,EACThE,KAAK0B,SAAS,CAAET,MAAK+C,SAErBgJ,YAAQ,eAAgB,CAAEhK,MAAOhD,KAAK/B,KACnCuH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,OACP,EAAKD,SAAS,CAAET,IAAKqD,EAAKrD,IAAK+C,KAAMM,EAAKN,QAE1C,EAAKtC,SAAS,CAAEkE,KAAK,EAAMiS,WAAYvT,EAAK3F,UAC5CyE,QAAQC,IAAI,kCAEbsC,OAAM,SAAAC,GACPxC,QAAQC,IAAI,8BACZ,EAAK3B,SAAS,CAAEkE,KAAK,EAAMiS,WAAY,+LAKxC7X,KAAKgL,UAGVlH,YAAiB9D,KAAK/B,IAGtB2F,IAAOuJ,GAAG,iBAAiB,SAAA5F,GACrBA,EAAKY,SAAW,OAAS,EAAKlK,IAChCJ,OAAOC,SAAS8E,iB,GAzFUuE,IAAMC,WCHnB6Q,E,kDACnB,WAAYta,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAO,CACVE,KAAM,EACNwZ,OAAQ,EACRC,YAAY,EACZC,YAAY,GAId,EAAKC,MAAQ,EAAKA,MAAMlZ,KAAX,gBACb,EAAKmZ,SAAW,EAAKA,SAASnZ,KAAd,gBAZC,E,qDAiBjB,IAAMH,EAAQwB,SAASC,gBAAgB8X,YACvC,OACE,qBAAKlY,UAAU,sBAAf,SACE,0BAASA,UAAU,yBAAyByB,MAAO,CAAE7C,WAAYe,KAAKxB,MAAME,KAAOM,EAAQ,MAA3F,UACE,yBAAQqB,UAAU,iBAAlB,UACE,sBAAKA,UAAU,qBAAf,UACE,cAAC,IAAD,CAAM0I,GAAG,WAAT,sCACA,cAAC,IAAD,CAAMA,GAAG,WAAT,gFACA,cAAC,IAAD,CAAMA,GAAG,OAAT,yFAEF,iCACE,sBAAK1I,UAAU,YAAYyB,MAAO,CAAEmN,UAAW,YAA/C,UACE,qBAAK3O,IAAI,qBAAqBC,IAAI,IAAIF,UAAU,mBAChD,sBAAMA,UAAU,kBAAhB,uBAEF,uBAAMA,UAAU,sBAAhB,0LACmC,uBADnC,6HAIF,qBAAKA,UAAU,mDAAf,SACE,qBAAKA,UAAU,8BAGnB,0BAASA,UAAU,kBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,qBAAf,8DACA,qBAAKA,UAAU,oBAAf,usDAIF,qBAAKA,UAAU,eAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOuW,gBAG5B,0BAASnY,UAAU,kBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,qBAAf,oHACA,qBAAKA,UAAU,oBAAf,woDAIF,qBAAKA,UAAU,eAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOwW,kBAG5B,0BAASpY,UAAU,kBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,qBAAf,0EACA,qBAAKA,UAAU,oBAAf,4yDAIF,qBAAKA,UAAU,eAAf,SACE,cAAC,IAAD,CAAiB4B,KAAOyW,iBAG5B,0BAASrY,UAAU,kBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,qBAAf,wDACA,qBAAKA,UAAU,oBAAf,2/CAKF,qBAAKA,UAAU,eAAf,SACE,cAAC,IAAD,CAAiB4B,KAAO0W,gBAG5B,yBAAStY,UAAU,kBAAnB,SACE,cAAC,EAAD,a,0CAQRG,SAAS8C,iBAAiB,YAAatD,KAAKqY,OAC5C7X,SAAS8C,iBAAiB,WAAYtD,KAAKsY,Y,6CAI3C9X,SAAS4D,oBAAoB,YAAapE,KAAKqY,OAC/C7X,SAAS4D,oBAAoB,WAAYpE,KAAKsY,Y,4BAG1CzT,GACC7E,KAAKxB,MAAM4Z,WAGdpY,KAAK0B,SAAS,CAAEyW,WAAYtT,EAAMqK,QAAQ,GAAG0J,UAF7C5Y,KAAK0B,SAAS,CAAE0W,WAAYvT,EAAMqK,QAAQ,GAAG0J,Y,+BAMxC/T,GACP,IAAMgU,EAAQ7Y,KAAKxB,MAAM4Z,WAAapY,KAAKxB,MAAM2Z,WACjDnY,KAAK0B,SAAS,CAAE0W,YAAY,EAAOD,WAAY,IAC3CU,EAAQ,IAAM7Y,KAAKxB,MAAME,MAAQ,GACnCsB,KAAK0B,SAAS,CAAEhD,OAAQsB,KAAKxB,MAAME,OAEjCma,GAAS,IAAM7Y,KAAKxB,MAAME,KAAO,GACnCsB,KAAK0B,SAAS,CAAEhD,OAAQsB,KAAKxB,MAAME,W,GAvHJyI,IAAMC,WCHtB6Q,E,kDACnB,WAAYta,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAO,CACVE,KAAM,EACNwZ,OAAQ,GAIV,EAAKY,MAAQ,EAAKA,MAAM3Z,KAAX,gBACb,EAAKD,QAAU,EAAKA,QAAQC,KAAb,gBAVE,E,qDAejB,IAAMwB,EAASH,SAASC,gBAAgBsY,aACxC,OACE,0BAAS1Y,UAAU,UAAnB,UACE,yBAAQyB,MAAO,CAAE6T,UAAW3V,KAAKxB,MAAME,KAAOiC,EAAS,MAAQN,UAAU,iBAAzE,UACE,sBAAKA,UAAU,qBAAf,UACE,cAAC,IAAD,CAAM0I,GAAG,WAAT,sCACA,cAAC,IAAD,CAAMA,GAAG,WAAT,gFACA,cAAC,IAAD,CAAMA,GAAG,QAAT,wDACA,cAAC,IAAD,CAAMA,GAAG,OAAT,yFAEF,iCACE,sBAAK1I,UAAU,YAAYyB,MAAO,CAAEmN,UAAW,YAA/C,UACE,qBAAK3O,IAAI,qBAAqBC,IAAI,IAAIF,UAAU,mBAChD,sBAAMA,UAAU,kBAAhB,uBAEF,uBAAMA,UAAU,sBAAhB,+SACyD,uBADzD,WAEU,mBAAGtC,KAAK,2CAAR,mDAIZ,qBAAKsC,UAAU,sBAAf,SACE,qBAAKA,UAAU,qDAAf,0BAGJ,0BAASA,UAAU,kBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,qBAAf,8DACA,qBAAKA,UAAU,oBAAf,usDAIF,sBAAKA,UAAU,sBAAf,UACE,qBAAKA,UAAU,uBAAf,qBACA,qBAAKA,UAAU,uBAAf,sBACA,qBAAKA,UAAU,uBAAf,4BAGJ,0BAASA,UAAU,kBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,qBAAf,oHACA,qBAAKA,UAAU,oBAAf,woDAIF,sBAAKA,UAAU,sBAAf,UACE,qBAAKA,UAAU,uBAAf,qBACA,qBAAKA,UAAU,uBAAf,sBACA,qBAAKA,UAAU,uBAAf,4BAGJ,0BAASA,UAAU,kBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,qBAAf,0EACA,qBAAKA,UAAU,oBAAf,4yDAIF,sBAAKA,UAAU,sBAAf,UACE,qBAAKA,UAAU,uBAAf,qBACA,qBAAKA,UAAU,uBAAf,sBACA,qBAAKA,UAAU,uBAAf,4BAGJ,0BAASA,UAAU,kBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,qBAAf,wDACA,qBAAKA,UAAU,oBAAf,2/CAKF,sBAAKA,UAAU,sBAAf,UACE,qBAAKA,UAAU,uBAAf,qBACA,qBAAKA,UAAU,uBAAf,sBACA,qBAAKA,UAAU,uBAAf,4BAGJ,yBAASA,UAAU,kBAAnB,SACE,cAAC,EAAD,W,0CAONG,SAAS8C,iBAAiB,QAAStD,KAAK8Y,OACxCtY,SAAS8C,iBAAiB,UAAWtD,KAAKd,W,6CAI1CsB,SAAS4D,oBAAoB,QAASpE,KAAK8Y,OAC3CtY,SAAS4D,oBAAoB,UAAWpE,KAAKd,W,4BAGzC2F,GACJ,IAAIqT,EAASlY,KAAKxB,MAAM0Z,OAASrT,EAAMmU,YACnCta,EAAOua,KAAKC,MAAMhB,EAAS,KAAQ,EACnCxZ,GAAQ,IACVA,GAAQ,EACRwZ,EAASlY,KAAKxB,MAAM0Z,QAElBxZ,EAAO,IACTA,EAAO,EACPwZ,EAASlY,KAAKxB,MAAM0Z,QAEtBlY,KAAK0B,SAAS,CAAEwW,SAAQxZ,W,8BAGlBmG,GACN,GAAmB,UAAfA,EAAM/B,OAAyC,IAArB9C,KAAKxB,MAAME,KACvC,OAAOsB,KAAK0B,SAAS,CAAEhD,KAAM,KAEX,UAAfmG,EAAM/B,MAAmC,cAAf+B,EAAM/B,OAAyB9C,KAAKxB,MAAME,MAAQ,GAC/EsB,KAAK0B,SAAS,CAAEhD,OAAQsB,KAAKxB,MAAME,OAElB,YAAfmG,EAAM/B,MAAsB9C,KAAKxB,MAAME,KAAO,GAChDsB,KAAK0B,SAAS,CAAEhD,OAAQsB,KAAKxB,MAAME,W,GArIJyI,IAAMC,WCAtB6Q,E,kDACnB,WAAYta,GAAQ,uCACZA,G,qDASN,OAFgB,IAAIwb,OAAO,sGAAuG,KAEtH5M,KAAKH,UAAUC,WAUlB,cAAC,EAAD,IAEF,cAAC,EAAD,Q,GAvB0BlF,IAAMC,W,QCLtBgS,G,uKAEjB,OACE,qBAAK/Y,UAAU,YAAf,SACE,gCACE,qBAAKA,UAAU,qBAAf,iBACA,sBAAMA,UAAU,kBAAhB,mL,GAN4B8G,IAAMC,WCS7BiS,I,OAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB/T,MAAK,YAAkD,IAA/CgU,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,QCKRO,GAAcC,QACW,cAA7Bjc,OAAOC,SAASic,UAEe,UAA7Blc,OAAOC,SAASic,UAEhBlc,OAAOC,SAASic,SAASC,MAAM,2DAqCnC,SAASC,GAAgBC,EAAOxO,GAC9BU,UAAU+N,cACPC,SAASF,GACT1U,MAAK,SAAC6U,GACLA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB/b,QACf4N,UAAU+N,cAAcO,YAI1BtX,QAAQC,IACN,+GAKEqI,GAAUA,EAAOiP,UACnBjP,EAAOiP,SAASN,KAMlBjX,QAAQC,IAAI,sCAGRqI,GAAUA,EAAOkP,WACnBlP,EAAOkP,UAAUP,WAO5B1U,OAAM,SAAC8B,GACNrE,QAAQqE,MAAM,4CAA6CA,M,+DC9F1D,IAAMoT,GAAqB,qBACrBC,GAAuB,uBACvBC,GAAsB,sB,SCF5B,IAAMC,GAAsB,sBACtBC,GAAwB,wBACxBC,GAAuB,uB,aCapC,IAAMC,GAAaC,aAAsCC,gBAEnDC,GAAWC,aAAgB,CAG7Btb,SClBG,WAKK,IALoBzB,EAKrB,uDAL6B,CACtC+I,KAAM,GACNC,YAAY,EACZC,OAAO,EACPC,WAAW,GACV8T,EAAQ,uCACT,OAAQA,EAAO3a,MACb,KAAK4a,KACH,OAAO,2BAAKjd,GAAZ,IAAmBgJ,YAAY,EAAMC,OAAO,EAAOC,WAAW,IAEhE,KAAK+T,KACH,OAAO,2BAAKjd,GAAZ,IAAmBgJ,YAAY,EAAOD,KAAMiU,EAAOvH,QAASxM,OAAO,EAAOC,WAAW,IAEvF,KAAK+T,KACH,OAAO,2BAAKjd,GAAZ,IAAmBgJ,YAAY,EAAOD,KAAMiU,EAAOvH,QAASxM,OAAO,IAErE,KAAKgU,KACH,OAAO,2BAAIjd,GAAX,IAAkB+I,KAAMiU,EAAOvH,UAGnC,OAAOzV,GDDLsJ,cEnBG,WAKK,IALyBtJ,EAK1B,uDALkC,CAC3CP,GAAI,GACJ0D,QAAQ,EACRlD,KAAM,MACNwC,IAAK,IACJua,EAAQ,uCACT,OAAQA,EAAO3a,MACb,KAAK6a,KACH,OAAO,2BAAKld,GAAZ,IAAmBmD,OAAQ6Z,EAAOvH,QAAQtS,OAAQlD,KAAM+c,EAAOvH,QAAQxV,KAAMwC,IAAKua,EAAOvH,QAAQhT,MAGrG,OAAOzC,GFSLmJ,SGnBG,WAKK,IALgBnJ,EAKjB,uDALyB,CAClCwF,MAAM,EACNrC,OAAQ,UACR6F,YAAY,EACZ5B,KAAK,GACJ4V,EAAQ,uCACT,OAAQA,EAAO3a,MACb,KAAK8a,GACH,OAAOC,qBAAU,2BAAKpd,GAAN,IAAagJ,YAAY,KAE3C,KAAKmU,GACH,OAAOC,qBAAU,2BAAKpd,GAAN,IAAagJ,YAAY,GAAUgU,EAAOvH,UAE5D,KAAK0H,GACH,OAAOC,qBAAU,2BAAKpd,GAAN,IAAagJ,YAAY,EAAOC,OAAO,KAG3D,OAAOjJ,GHGLoY,MIrBG,WAKK,IALiBpY,EAKlB,uDAL0B,CACnC+I,KAAM,GACNC,YAAY,EACZC,OAAO,EACPC,WAAW,GACV8T,EAAQ,uCACT,OAAQA,EAAO3a,MACb,KAAKgb,GACH,OAAO,2BAAKrd,GAAZ,IAAmBgJ,YAAY,EAAMC,OAAO,EAAOC,WAAW,IAEhE,KAAKmU,GACH,OAAO,2BAAKrd,GAAZ,IAAmBgJ,YAAY,EAAOD,KAAMiU,EAAOvH,QAASxM,OAAO,EAAOC,WAAW,IAEvF,KAAKmU,GACH,OAAO,2BAAKrd,GAAZ,IAAmBgJ,YAAY,EAAOD,KAAMiU,EAAOvH,QAASxM,OAAO,IAGvE,OAAOjJ,GJKLoJ,SKtBG,WAIK,IAJoBpJ,EAIrB,uDAJ6B,CACtCA,MAAO,SACPP,GAAI,GACJ4C,KAAM,OACL2a,EAAQ,uCACT,OAAQA,EAAO3a,MACb,KAAKib,KACH,OAAO,2BAAKtd,GAAUgd,EAAOvH,SAGjC,OAAOzV,KLgBMud,gBAAYT,GAAUH,I,OMkBrCa,IAASC,OACP,cAAC,IAAD,CAAU3U,MAAOA,GAAjB,SACE,cAAC,IAAD,UACE,eAAC,KAAD,WACE,cAAC,KAAD,CAAO4U,OAAK,EAAC/E,KAAK,IAAIgF,UAAYlE,IAClC,cAAC,KAAD,CAAOiE,OAAK,EAAC/E,KAAK,WAAWgF,UAAYC,IACzC,cAAC,KAAD,CAAOF,OAAK,EAAC/E,KAAK,WAAWgF,UAAYE,IACzC,cAAC,KAAD,CAAOH,OAAK,EAAC/E,KAAK,mBAAmBgF,UAAYnH,IACjD,cAAC,KAAD,CAAOkH,OAAK,EAAC/E,KAAK,YAAYgF,UAAYvE,IAC1C,cAAC,KAAD,CAAOsE,OAAK,EAAC/E,KAAK,OAAOgF,UAAYG,MACrC,cAAC,KAAD,CAAOJ,OAAK,EAAC/E,KAAK,YAAlB,SACE,eAACoF,EAAA,EAAD,eAAe,cAAC,EAAD,IAAf,SAEF,cAAC,KAAD,CAAOL,OAAK,EAAC/E,KAAK,gBAAlB,SACE,eAACoF,EAAA,EAAD,eAAe,cAAC7e,EAAA,EAAD,IAAf,SAEF,cAAC,KAAD,CAAOwe,OAAK,EAAC/E,KAAK,QAAlB,SACE,eAACoF,EAAA,EAAD,eAAe,cAACtT,EAAA,EAAD,IAAf,SAEF,cAAC,KAAD,CAAOkT,UAAY/C,YAIzB5Y,SAASkC,eAAe,STjDnB,SAAkBgJ,GACvB,GAA6C,kBAAmBU,UAAW,CAGzE,GADkB,IAAIoQ,IAAInW,GAAwBxI,OAAOC,SAASC,MACpD0e,SAAW5e,OAAOC,SAAS2e,OAIvC,OAGF5e,OAAOyF,iBAAiB,QAAQ,WAC9B,IAAM4W,EAAK,UAAM7T,GAAN,sBAEPwT,KAgEV,SAAiCK,EAAOxO,GAEtCrG,MAAM6U,EAAO,CACX3U,QAAS,CAAE,iBAAkB,YAE5BC,MAAK,SAACoP,GAEL,IAAM8H,EAAc9H,EAASrP,QAAQoX,IAAI,gBAEnB,MAApB/H,EAASjT,QACO,MAAf+a,IAA8D,IAAvCA,EAAYE,QAAQ,cAG5CxQ,UAAU+N,cAAc0C,MAAMrX,MAAK,SAAC6U,GAClCA,EAAayC,aAAatX,MAAK,WAC7B3H,OAAOC,SAAS8E,eAKpBqX,GAAgBC,EAAOxO,MAG1B/F,OAAM,WACLvC,QAAQC,IAAI,oEAtFV0Z,CAAwB7C,EAAOxO,GAI/BU,UAAU+N,cAAc0C,MAAMrX,MAAK,WACjCpC,QAAQC,IACN,+GAMJ4W,GAAgBC,EAAOxO,OS+B/BsR,GAKA3D,M,gHChFqB4D,E,uKAGjB,OACE,qBAAK5c,UAAU,aACVC,IAAG,uBAAmBN,KAAKrC,MAAMyM,MACjC7J,IAAI,+J,yDANoB4G,EAAMC,Y,gCCJzC,gFAGI4D,GAAU,EAKP,SAAS7H,EAAc4M,EAAU9R,GACtC,IAAMqG,EAAOa,KAAKC,UAAU,CAAE2K,WAAU9R,OAOxC,MAAO,CACL4C,KAAM,iBACNoT,QANFjJ,EACwB3F,MAAM,6BAA6BG,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAC7DL,MAAM,oBAAqB,CAAEC,OAAQ,OAAQhB,SAAQkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,WAQ9E,SAASuB,EAAeF,GAC7B,MAAO,CACLlG,KAAM4a,IACNxH,QAASlN,GArBgB,SAAzBlJ,OAAOC,SAASoW,OAClBlJ,GAAU,I,gHCDSkS,E,uKAGjB,OAAO,sBAAK7c,UAAU,YAAYpC,GAAK+B,KAAKrC,MAAMM,GAA3C,UACL,mCAAO+B,KAAKrC,MAAMiL,MAAlB,OACE5I,KAAKrC,MAAMqW,c,yDALkB7M,EAAMC,Y,gCCJ3C,8CAEO,SAASzD,EAAeqE,GAC7B,MAAO,CACLnH,KAAMib,IACN7H,QAASjM,K,0QCCPpE,EAASoF,MAER,SAASlF,EAAiBqE,GAC/BvE,EAAOkJ,KAAK,mBAAoB,CAAE3E,OAAQ,OAASA,IAG9C,SAASnC,EAAcmC,GAC5BvE,EAAOkJ,KAAK,gBAAiB,CAAE3E,OAAQ,OAASA,I,yBAKrCgV,EAAb,kDAKE,WAAYlc,EAAKmc,GAAe,IAAD,6BAE7B,eAF6B,mEAI7B,iCAAYnc,EACZ,EAAKmc,aAAeA,EAEpB,EAAK5e,OAAQ,EACb,EAAK6e,QAAS,EACd,EAAK5V,OAAQ,EACb,EAAKU,QAAS,EACd,EAAKC,UAAW,EAChB,EAAKxI,SAAW,GAEhB,EAAKgE,OAASA,EAGd,EAAK0Z,KAAO,EAAKA,KAAKne,KAAV,gBACZ,EAAK0Q,KAAO,EAAKA,KAAK1Q,KAAV,gBACZ,EAAKoe,MAAQ,EAAKA,MAAMpe,KAAX,gBAnBgB,EALjC,oDAkCI,IAAKa,KAAKxB,MAAS,OAAO4E,QAAQC,IAAI,mFACtC,IAAKrD,KAAKod,aAAgB,OAAOha,QAAQC,IAAI,6JAE7C,IAAMO,EAAS5D,KAAK4D,OACduE,EAASnI,KAAKod,aAAa9Y,KAAK6D,OAChCC,EAAWpI,KAAKod,aAAa9Y,KAAK8D,SAExChF,QAAQC,IAAI,yGAMZrD,KAAKJ,SAAL,2BAHwB,CACtB4d,eAAe,IAEwBxd,KAAKJ,UAG9CgE,EAAOkJ,KAAK,gBAAiB,CAAE3E,SAAQC,WAAU2E,aAAc/M,KAAKxB,UAlDxE,2BAqDO0P,GAEH,IAAM/F,EAASnI,KAAKod,aAAa9Y,KAAK6D,OAChCC,EAAWpI,KAAKod,aAAa9Y,KAAK8D,SAExCpI,KAAK4D,OAAOkJ,KAAK,cAAe,CAAE3E,SAAQC,WAAU8F,WACpD9K,QAAQC,IAAI,2HAEPrD,KAAKJ,SAAS4d,gBACjBxd,KAAKxB,MAAL,2BAAkBwB,KAAKxB,OAAU0P,GACjClO,KAAKqd,OAASrd,KAAKqd,OAAOrd,KAAKxB,OAASwB,KAAK8M,KAAK,SAAU9M,KAAKxB,OACjE4E,QAAQC,IAAI,oIAhElB,qCAoEiB4J,GAAyB,IAAfwQ,EAAc,wDAE/BtV,EAASsV,EAAOA,EAAKtV,OAASnI,KAAKod,aAAa9Y,KAAK6D,OACrDC,EAAWqV,EAAOA,EAAKrV,SAAWpI,KAAKod,aAAa9Y,KAAK8D,SAE/DpI,KAAK4D,OAAOkJ,KAAK,iBAAkB,CAAE3E,SAAQC,WAAU6E,aACvD7J,QAAQC,IAAI,6HA1EhB,4CA6EwB4J,EAAU7G,GAAsB,IAAfqX,EAAc,wDAE7CtV,EAASsV,EAAOA,EAAKtV,OAASnI,KAAKod,aAAa9Y,KAAK6D,OACrDC,EAAWqV,EAAOA,EAAKrV,SAAWpI,KAAKod,aAAa9Y,KAAK8D,SAE/DpI,KAAK4D,OAAOkJ,KAAK,wBAAyB,CAAE3E,SAAQC,WAAU6E,WAAU7G,UACxEhD,QAAQC,IAAI,6HAnFhB,6BAsFU,IAAD,OAGLO,EAAOuJ,GAAG,kBAAkB,SAAA3O,GAC1B,EAAKA,MAAL,2BAAkB,EAAKA,OAAUA,GACjC,EAAK6e,OAAS,EAAKA,OAAO,EAAK7e,OAAS,EAAKsO,KAAK,SAAU,EAAKtO,OACjE4E,QAAQC,IAAI,oIAGZ,EAAKqa,aAAenc,KAAKC,MACzB,EAAKoC,OAAOkJ,KAAK,OAAQ,OAI3BlJ,EAAOuJ,GAAG,eAAe,SAAA3O,GAGnBA,EAAM2J,SAAW,EAAKiV,aAAa9Y,KAAK6D,SAC1C,EAAK3J,MAAL,2BAAkB,EAAKA,OAAUA,EAAM0P,QACvC,EAAKmP,OAAS,EAAKA,OAAO,EAAK7e,OAAS,EAAKsO,KAAK,SAAU,EAAKtO,OACjE4E,QAAQC,IAAI,qIAKhBO,EAAOuJ,GAAG,OAAO,SAAAvH,GACf,EAAK6B,MAAQ,EAAKA,MAAM7B,GAAO,EAAKkH,KAAK,MAAOlH,GAChDxC,QAAQC,IAAR,gBAAsBuC,EAAI/E,UAI5B+C,EAAOuJ,GAAG,QAAQ,WAChB,IAAMwQ,EAAWpc,KAAKC,MAAQ,EAAKkc,aACnCta,QAAQC,IAAR,0CAA4Bsa,EAA5B,uBAvHN,0BA4Bc,OAAO,YAAA3d,KAAP,UA5Bd,GAAyB4d,M,gHCdJC,E,uKAUjB,OACE,qBACExd,UAAS,sCAAkCL,KAAKrC,MAAMmgB,MACtD7f,GAAK+B,KAAKrC,MAAMM,GAChB6D,MAAS,CAAE2G,gBAAiBzI,KAAKrC,MAAM8P,YAHzC,SAIIzN,KAAKrC,MAAMqW,e,UAfe7M,EAAMC,Y,uICGrB6P,E,uKAIjB,IAAIvO,EAAQ,UACP1I,KAAKrC,MAAMkD,OAAS6H,EAAQ,WAGjC,IAAIzG,EAAO,cAAC,IAAD,CAAiBA,KAAO6M,YAC9B9O,KAAKrC,MAAMkD,OAASoB,EAAO,cAAC,IAAD,CAAiBA,KAAO8b,aAGxD,IAAI/c,EAAS,cACRhB,KAAKrC,MAAMqD,SAAWA,EAAU,kCAGrC,IAAID,EAAY,KAGhB,OAFKf,KAAKrC,MAAMoD,YAAcA,EAAYf,KAAKrC,MAAMoD,WAGnD,sBAAKV,UAAU,UAAf,UACE,qBAAKA,UAAU,uBACf,sBAAKA,UAAYW,EAASc,MAAO,CAAE2G,gBAAiBC,GAApD,UACE,sBAAKrI,UAAU,oBAAf,cAAsCL,KAAKrC,MAAMmD,KAAjD,OACA,sBAAKT,UAAU,0BAAf,cAA4CU,EAA5C,OACA,sBAAKV,UAAU,oBAAf,cAAsC4B,EAAtC,iB,GAzB2BkF,IAAMC,Y,gCCP3C,wIAAO,IAAM4W,EAAyB,yBACzBC,EAA2B,2BAC3BC,EAA0B,0BAC1BC,EAAkB,mB,gCCF/B,kCACA,IAAInT,GAAU,EAKP,SAASsL,IAMd,MAAO,CACLzV,KAAM,cACNoT,QANFjJ,EACc3F,MAAM,0BAA0BG,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChDL,MAAM,iBAAkB,CAAEC,OAAQ,SAAUE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,WAR/C,SAAzB7H,OAAOC,SAASoW,OAClBlJ,GAAU,I,gCCJZ,8CAEO,SAAS/F,EAAiBzG,EAAOC,EAAMwC,GAC5C,MAAO,CACLJ,KAAM6a,IACNzH,QAAS,CAAEtS,QAASnD,EAAOC,OAAMwC,U,oGCChB8C,E,WACnB,WAAYqa,EAAMjC,EAAWjY,GAAY,oBACvClE,KAAKoe,KAAOA,EACZpe,KAAKmc,UAAYA,EACjBnc,KAAKkE,UAAYA,EAGjBlE,KAAKqe,MAAQre,KAAKqe,MAAMlf,KAAKa,MAC7BA,KAAKkB,KAAOlB,KAAKkB,KAAK/B,KAAKa,MAC3BA,KAAKse,KAAOte,KAAKse,KAAKnf,KAAKa,MAC3BA,KAAKue,IAAMve,KAAKue,IAAIpf,KAAKa,M,kDAIzB,IAAMwe,EAASxe,KAAKkB,KAAKlB,KAAKoe,MAC9B,IAAKI,EAAO9S,OAAU,OAAO,EAC7B1L,KAAKwe,OAASA,EAAOC,YACrBze,KAAK0L,OAAS8S,EAAO9S,OAErB,IAAMzH,EAAS,GAEfua,EAAOC,YAAYpT,SAAQ,SAAAlK,GACP,kBAAdA,EAAKN,MAA4BoD,EAAOsE,KAAKpH,MAGnDnB,KAAKse,KAAKra,K,4BAGNya,GAAQ,IAAD,OACX,OAAOA,EAAMxd,MAAK,SAAAC,GAAI,MAAkB,kBAAdA,EAAKN,MAC1BM,EAAKgb,YAAc,EAAKA,e,2BAG1BqC,GACH,IADW,EACP9S,GAAS,EACT+S,GAAc,EAFP,cAGSD,GAHT,IAGX,2BAA4B,CAAC,IAAlBE,EAAiB,QAC1B,GAAI1e,KAAKqe,MAAMK,GAAQ,CACrBhT,EAAS1L,KAAKqe,MAAMK,GACpBD,EAAcC,EACd,QAPO,8BAUX,MAAO,CAAEhT,SAAQ+S,iB,gCAGTE,GAGR,IAAMxd,EAAOX,SAASoe,cAAc,OAiBpC,GAhBAzd,EAAKlD,GAAK,oBACVkD,EAAK0d,UAAL,4GAGmBF,EAAK/V,MAHxB,kCAIe+V,EAAK7d,KAJpB,uRAYAN,SAASkC,eAAe,QAAQoc,OAAO3d,GAGnCwd,EAAK7b,KACP,IACeyW,SAASoF,EAAK7b,KAC3BA,GACA,MAAOic,GACP3b,QAAQC,IAAI,sBAAuB0b,GAIvC,OAAO5d,I,gCAGCwd,GAGR,IAAMrH,EAAS9W,SAASgE,cAAcma,EAAKrH,QAC3C,IAAKA,EAAU,OAAO,EAEtBA,EAAO7S,UAAUC,IAAI,aAGrB,IAAMvD,EAAOX,SAASoe,cAAc,OACpCzd,EAAKlD,GAAK,qBACVkD,EAAK0d,UAAL,wOAMeF,EAAK7d,KANpB,uRAcAN,SAASkC,eAAe,QAAQoc,OAAO3d,GAGvC,IAAM6d,EAAQ1H,EAAO9B,wBACfyJ,EAAQ9d,EAAKqD,cAAc,kBAC3B0a,EAAS/d,EAAKqD,cAAc,yBAC5BxF,EAAQwB,SAASC,gBAAgBC,YACjCC,EAASH,SAASC,gBAAgBG,aAEpCoe,EAAM1P,MAAStQ,EAAQ,GACzBkgB,EAAOpd,MAAMwN,MAAQ,QACrB2P,EAAMnd,MAAMgD,KAAOka,EAAMla,KAAOma,EAAMve,YAAc,GAAK,OAEzDwe,EAAOpd,MAAMgD,KAAO,QACpBma,EAAMnd,MAAMgD,KAAOka,EAAM1P,MAAQ,GAAK,MAGxC,IAAM6P,GAAeF,EAAMre,aAAeoe,EAAMre,QAAU,EACtDwO,EAAM6P,EAAMI,EAAID,EAYpB,GAXIhQ,EAAM,KACRA,EAAM,GACN+P,EAAOpd,MAAMqN,IAAM,QAEjBA,EAAMxO,EAASse,EAAMre,aAAe,KACtCuO,EAAMxO,EAASse,EAAMre,aAAe,GACpCse,EAAOpd,MAAMud,OAAS,QAExBJ,EAAMnd,MAAMqN,IAAMA,EAAM,KAGpBwP,EAAK7b,KACP,IACeyW,SAASoF,EAAK7b,KAC3BA,GACA,MAAOic,GACP3b,QAAQC,IAAI,sBAAuB0b,GAIvC,OAAO5d,I,4BAGF,IAAD,OACJ6L,YAAQ,4BAA6B,CAAE5C,KAAMpK,KAAK0L,OAAOtB,OACtD5E,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACR,OAAhBA,EAAK3C,OACP,EAAKuC,YAELd,QAAQC,IAAI,wCAEbsC,OAAM,SAAAC,GACPxC,QAAQC,IAAI,0C,2BAIbY,GAAS,IAAD,OAGX,IAAImJ,SAAQ,SAACkS,GAGX,GAAIrb,EAAO/F,QAAU,EAAK,OAAOohB,GAAQ,GAGzC,IAiBIne,EADEud,EAAQza,EAAO,GAErB,OAAQya,EAAM7d,MACZ,IAAK,QACHM,EAAO,EAAKoe,UAAUb,GACtB,MACF,IAAK,SACHvd,EAAO,EAAKqe,UAAUd,GACtB,MACF,QACE,OAAOY,GAAQ,GAGdne,GAAQme,GAAQ,GAErB,IAAMG,EAAUte,EAAKqD,cAAc,gBAC7Bkb,EAAYve,EAAKqD,cAAc,iBAErCib,EAAQ/b,QAAU,kBA1BL,SAACvC,GACZA,EAAKyD,SACL,IAAM0S,EAAS9W,SAASgE,cAAc,cAClC8S,GAAUA,EAAO7S,UAAUG,OAAO,aACtC0a,GAAQ,GAsBcK,CAAKxe,IAC7Bue,EAAUhc,QAAU,kBAnCL,SAACvC,GACdA,EAAKyD,SACL,IAAM0S,EAAS9W,SAASgE,cAAc,cAClC8S,GAAUA,EAAO7S,UAAUG,OAAO,aACtC0a,GAAQ,GA+BgBM,CAAOze,OAGhCqE,MAAK,SAAAqa,GAGN,IAAKA,EAAO,OAAO,EAAKtB,MAGxBta,EAAO6b,QACP,EAAKxB,KAAKra,U,0FCrLVoL,EAAO,I,WAnCX,aAAe,oBACbrP,KAAK6J,KAAO,GACZ7J,KAAK8G,MAAQ,E,mDAGR7F,GAEDjB,KAAK6J,KAAK7J,KAAK6J,KAAK3L,OAAS,KAAO+C,IAEpCjB,KAAK6J,KAAK3L,OAAS,IAGrB8B,KAAK6J,KAAKiW,QAFV9f,KAAK6J,KAAKtB,KAAKtH,GAKjBjB,KAAK8G,MAAQ9G,KAAK6J,KAAK3L,OAAS,K,6BAIhC,OAAI8B,KAAK8G,MAAQ,IACf9G,KAAK8G,QACE9G,KAAK6J,KAAK7J,KAAK8G,U,8BAMxB,OAAI9G,KAAK8G,MAAQ9G,KAAK6J,KAAK3L,OAAS,IAClC8B,KAAK8G,QACE9G,KAAK6J,KAAK7J,KAAK8G,Y,wICxBPoQ,E,uKAEjB,OACE,sBAAK7W,UAAU,SAAf,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKC,IAAMN,KAAKrC,MAAMwZ,KAAO5W,IAAI,IAAIF,UAAU,qBAC/C,sBAAMA,UAAU,oBAAhB,uBAEF,sBAAKA,UAAU,gBAAf,UACE,qBAAKA,UAAU,eAAf,SACE,cAAC,IAAD,CAAMA,UAAU,eAAe0I,GAAG,YAAlC,4DAEF,qBAAK1I,UAAU,eAAf,SACE,cAAC,IAAD,CAAMA,UAAU,eAAe0I,GAAG,OAAlC,0FAEF,qBAAK1I,UAAU,eAAf,SACE,cAAC,IAAD,CAAMA,UAAU,eAAe0I,GAAG,QAAlC,sE,GAhBwB5B,IAAMC,Y,oICEpC2Y,E,kDACJ,WAAYpiB,GAAQ,IAAD,8BACjB,cAAMA,IAGDqiB,YAAc,EAAKA,YAAY7gB,KAAjB,gBAJF,E,qDAQjB,OACE,sBAAKkB,UAAU,WAAf,UACE,qBACEyB,MAAO,CAAE2G,gBAAiBzI,KAAKrC,MAAM+K,OAAS,WAC9CzK,GAAK+B,KAAKrC,MAAMoM,OAAS/J,KAAKrC,MAAMM,GAFtC,SAGE,cAAC,IAAD,CAAiBgE,KAAO0G,EAAM3I,KAAKrC,MAAMsE,MAAQ,gBAEnD,iCACIjC,KAAKrC,MAAMiL,OAAS,qB,0CAO5BpI,SAASkC,eAAe1C,KAAKrC,MAAMoM,OAAS/J,KAAKrC,MAAMM,IACpDqF,iBAAiB,QAAStD,KAAKggB,e,oCAMlC,IAAMpY,EAAW,CACfpJ,MAAO,SACPP,GAAI+B,KAAKrC,MAAMM,IAAM,aACrB4C,KAAMb,KAAKrC,MAAMkD,MAEnBb,KAAKrC,MAAMgG,eAAeiE,GAEF,QAApB5H,KAAKrC,MAAMkD,MACbwO,IAAKyP,OAAO9e,KAAKrC,MAAMM,M,6CAKzBuC,SAASkC,eAAe1C,KAAKrC,MAAMoM,OAAS/J,KAAKrC,MAAMM,IACpDmG,oBAAoB,QAASpE,KAAKggB,iB,GA7CnB7Y,IAAMC,WAiEbC,iBAZf,SAAyBC,GACvB,MAAO,MAGT,SAA4BS,GAC1B,MAAO,CACLpE,eAAgB,SAACqE,GACfD,EAASpE,YAAeqE,QAKfX,CAA6C0Y,I,yKC5DtDE,E,kDACJ,WAAYtiB,GAAQ,IAAD,8BACjB,cAAMA,IAEDa,MAAQ,CACX8U,OAAQ,GACR4M,eAAe,GAGjB,EAAKje,KAAO,KAGZ,EAAKke,IAAM,EAAKA,IAAIhhB,KAAT,gBACX,EAAKihB,WAAa,EAAKA,WAAWjhB,KAAhB,gBAClB,EAAKkhB,iBAAmB,EAAKA,iBAAiBlhB,KAAtB,gBACxB,EAAKmhB,iBAAmB,EAAKA,iBAAiBnhB,KAAtB,gBACxB,EAAKohB,kBAAoB,EAAKA,kBAAkBphB,KAAvB,gBACzB,EAAKqhB,YAAc,EAAKA,YAAYrhB,KAAjB,gBACnB,EAAKshB,SAAW,EAAKA,SAASthB,KAAd,gBAChB,EAAKuhB,QAAU,EAAKA,QAAQvhB,KAAb,gBACf,EAAK+gB,cAAgB,EAAKA,cAAc/gB,KAAnB,gBACrB,EAAKwhB,UAAY,EAAKA,UAAUxhB,KAAf,gBApBA,E,qDAwBjB,IAAIyhB,EAAQ,GACRC,EAAW,EAGXjY,EAAQ,0IACkB,QAA1B5I,KAAKrC,MAAMyD,MAAM3C,OAAkBmK,EAAQ,oDAE/C,IAAIkY,EACF,sBAAK7iB,GAAG,UAAUoC,UAAU,kCAA5B,UACE,cAAC,IAAD,CACEyd,KAAK,KACLrQ,WAAW,UACXxP,GAAG,kCAHL,0DAIA,cAAC,IAAD,CACE6f,KAAK,KACLrQ,WAAW,UACXxP,GAAG,iCAHL,8DAO0B,QAA1B+B,KAAKrC,MAAMyD,MAAM3C,OACnBqiB,EACE,sBAAK7iB,GAAG,UAAUoC,UAAU,kCAA5B,UACE,cAAC,IAAD,CACEyd,KAAK,KACLrQ,WAAW,UACXxP,GAAG,kCAHL,0DAIA,cAAC,IAAD,CACE6f,KAAK,KACLrQ,WAAW,UACXxP,GAAG,mCAHL,0DAIA,cAAC,IAAD,CACE6f,KAAK,KACLrQ,WAAW,UACXxP,GAAG,iCAHL,0EAQN,IAAI8iB,EAAU,KAcd,GAbI/gB,KAAKxB,MAAM0hB,gBACba,EACE,uBAAM1gB,UAAU,iBAAhB,sMAEE,cAAC,IAAD,CACEyd,KAAK,KACLrQ,WAAW,UACXxP,GAAG,iBAHL,sFASF+B,KAAKxB,MAAM8U,OAAOpV,OAAS,EAAG,CAChC,IAAM8iB,EAAM,IAAI7H,OAAOnZ,KAAKxB,MAAM8U,QACrB9S,SAASkC,eAAe,4BACrC,IAAK,IAAIT,KAAQ0G,EACXqY,EAAIzU,KAAKtK,EAAKgf,gBAA2B,QAAThf,GAA2B,WAATA,IACpD2e,EAAMrY,KACJ,sBAAKlI,UAAU,0BACVpC,GAAE,kCAA+B4iB,GAEjC7e,QAAYhC,KAAKogB,WAHtB,UAIE,qBAAK/f,UAAU,8BACV6gB,YAAYjf,EACZkf,YAAenhB,KAAKsgB,iBACpBc,aAAiBphB,KAAKugB,kBAH3B,SAIE,cAAC,IAAD,CAAiBte,KAAM0G,EAAM1G,OAC/B,+BAAOA,EAAKiF,MAAM,EAAGjF,EAAK/D,YAPf2iB,IASfA,KAKe,IAAjBD,EAAM1iB,SAAc0iB,EAAQ,qBAAKvgB,UAAU,8BAAf,oJAEhC,IAAIghB,EACF,sBAAKhhB,UAAU,yDAAf,UACE,0JACA,8BACE,wBAAOA,UAAU,gDAAjB,UACE,uBAAOQ,KAAK,WAAWR,UAAU,6BAA6BpC,GAAG,iBACjE,qBAAKoC,UAAU,wCASvB,MAJ8B,QAA1BL,KAAKrC,MAAMyD,MAAM3C,MAAsC,UAApBuB,KAAKrC,MAAMkD,OAChDwgB,EAAkB,MAIlB,sBAAKhhB,UAAU,0CAA0CpC,GAAG,oBAA5D,UACE,qBAAKoC,UAAU,2BAAf,SAA0C,mCAAOuI,EAAP,SAC1C,sBAAKvI,UAAU,gCAAf,UACE,qHACA,uBAAOQ,KAAK,OAAOiI,aAAa,QAAQ7K,GAAG,gBAE3CojB,EACF,sBAAKhhB,UAAU,0BAAf,UACE,mGACA,sBAAKpC,GAAG,4BAAR,UACE,uBAAO4C,KAAK,QAAQuJ,KAAK,eAAehE,MAAM,UAAU/F,UAAU,qCAClE,uBAAOQ,KAAK,QAAQuJ,KAAK,eAAehE,MAAM,UAAU/F,UAAU,qCAClE,uBAAOQ,KAAK,QAAQuJ,KAAK,eAAehE,MAAM,UAAU/F,UAAU,qCAClE,uBAAOQ,KAAK,QAAQuJ,KAAK,eAAehE,MAAM,UAAU/F,UAAU,qCAClE,uBAAOQ,KAAK,QAAQuJ,KAAK,eAAehE,MAAM,UAAU/F,UAAU,qCAClE,uBAAOQ,KAAK,QAAQuJ,KAAK,eAAehE,MAAM,UAAU/F,UAAU,qCAClE,uBAAOQ,KAAK,QAAQuJ,KAAK,eAAehE,MAAM,UAAU/F,UAAU,qCAClE,uBAAOQ,KAAK,QAAQuJ,KAAK,eAAehE,MAAM,UAAU/F,UAAU,2CAGtE,sBAAKA,UAAU,8BAAf,UACE,+GACA,uBAAOQ,KAAK,OAAOgI,YAAY,uHAAwB5K,GAAG,+BAA+B6K,aAAa,UACtG,qBAAK7K,GAAG,2BAA2BoC,UAAU,2BAA7C,SACIugB,IAEJ,wBAAOvgB,UAAU,gCAAjB,2HACsB,mBAAGtC,KAAK,2BAAR,+BAGxB,sBAAKsC,UAAU,6BAAf,UACE,qBAAKA,UAAU,8BAA8BpC,GAAG,gCAC9C8iB,EACAD,U,0CAMW,IAAD,QAGJtgB,SAASkC,eAAe,gCAChCY,iBAAiB,QAAStD,KAAKmgB,KAErC3f,SAASkC,eAAe,mCACrBY,iBAAiB,QAAStD,KAAKwgB,aAElChgB,SAASkC,eAAe,kCACrBY,iBAAiB,QAAStD,KAAK0gB,SAGJ,QAA1B1gB,KAAKrC,MAAMyD,MAAM3C,QACnB+B,SAASkC,eAAe,YAAY0D,MAAQpG,KAAKrC,MAAMiL,MAE/B,UAApB5I,KAAKrC,MAAMkD,OACbL,SAASkC,eAAe,gBAAgB4e,QAAUthB,KAAKrC,MAAM0jB,iBAGnD7gB,SACTkC,eAAe,6BACf8B,cAFS,uBAEsBxE,KAAKrC,MAAM+K,MAFjC,OAGN4Y,SAAU,EAEhB9gB,SAASkC,eAAe,gCAAgC0D,MAAQpG,KAAKrC,MAAMsE,KAAKsf,UAAU,GAC1FvhB,KAAKmgB,MAEL9Z,EAAQC,UAAS,WACf,IAAIrE,EAAOzB,SAASgE,cAAT,kDAAmE,EAAK7G,MAAMsE,KAA9E,OACX,EAAKqe,iBAAiB,CAAEhJ,OAAQrV,IAChC,EAAKme,WAAW,CAAE9I,OAAQrV,IAC1B,EAAKse,kBAAkB,CAAEjJ,OAAQrV,OAInCzB,SACGkC,eAAe,oCACfY,iBAAiB,QAAStD,KAAKkgB,kB,oCAMpClgB,KAAKrC,MAAMsH,kBAAiB,EAAM,MAAO,M,6CAI3BzE,SAASkC,eAAe,gCAChC0B,oBAAoB,QAASpE,KAAKmgB,KACxC3f,SAASkC,eAAe,mCACrB0B,oBAAoB,QAASpE,KAAKwgB,aAEP,QAA1BxgB,KAAKrC,MAAMyD,MAAM3C,MACnB+B,SACGkC,eAAe,oCACf0B,oBAAoB,QAASpE,KAAKkgB,iB,iCAI9Brb,GACT7E,KAAKqgB,mBACDxb,EAAMyS,SAAWtX,KAAKiC,MACxBjC,KAAKiC,KAAO4C,EAAMyS,OAClBzS,EAAMyS,OAAO7S,UAAUC,IAAI,oCAE3B1E,KAAKiC,KAAO,KACZ4C,EAAMyS,OAAOxV,MAAM2G,gBAAkB,UACrC5D,EAAMyS,OAAO9S,cAAc,OAAO1C,MAAM2G,gBAAkB,UAC1D5D,EAAMyS,OAAO9S,cAAc,OAAO1C,MAAM4G,MAAQ,a,yCAKlD,IADiB,EACbkY,EAAQpgB,SAASghB,uBAAuB,kCAD3B,cAEAZ,GAFA,IAEjB,2BAAwB,CAAC,IAAhB3e,EAAe,QACtBA,EAAKwC,UAAUG,OAAO,kCACtB3C,EAAKH,MAAM2G,gBAAkB,UAC7BxG,EAAKuC,cAAc,OAAO1C,MAAM2G,gBAAkB,UAClDxG,EAAKuC,cAAc,OAAO1C,MAAM4G,MAAQ,WANzB,iC,uCAUF7D,GACf,IAEI6D,EADEoL,EADatT,SAASkC,eAAe,6BAClB8B,cAAc,iBAEtBkE,EAAP,OAAVoL,EAAyB,UAAoBA,EAAM1N,MAEnDvB,EAAMyS,OAAOxV,MAAM2G,gBAAkBC,EACrC7D,EAAMyS,OAAO9S,cAAc,OAAO1C,MAAM2G,gBAAkBC,EAC1D7D,EAAMyS,OAAO9S,cAAc,OAAO1C,MAAM4G,MAAQ,Y,wCAGhC7D,GACZA,EAAMyS,SAAWtX,KAAKiC,OAC1B4C,EAAMyS,OAAOxV,MAAM2G,gBAAkB,UACrC5D,EAAMyS,OAAO9S,cAAc,OAAO1C,MAAM2G,gBAAkB,UAC1D5D,EAAMyS,OAAO9S,cAAc,OAAO1C,MAAM4G,MAAQ,a,4BAIhD1I,KAAKqgB,mBACLrgB,KAAKiC,KAAO,KACZjC,KAAK0B,SAAS,CACZ4R,OAAQ9S,SAASkC,eAAe,gCAAgC0D,MAAM6a,kB,iCAKxE,IAGIQ,EAHErX,EAAO5J,SAASkC,eAAe,YAAY0D,MACjD,GAAoB,IAAhBgE,EAAKlM,OAAgB,MAAO,CAAE0H,KAAK,EAAMjH,QAAS,+HAIpD8iB,EADsB,UAApBzhB,KAAKrC,MAAMkD,MACOL,SAASkC,eAAe,gBAAgB4e,QAG9D,IAAI5Y,EAAQlI,SACTkC,eAAe,6BACf8B,cAAc,iBACjB,GAAc,OAAVkE,EAAkB,MAAO,CAAE9C,KAAK,EAAMjH,QAAS,mHACnD+J,EAAQA,EAAMtC,MAEd,IAAInE,EAAOjC,KAAKiC,KAChB,OAAkB,OAAdjC,KAAKiC,KAAwB,CAAE2D,KAAK,EAAMjH,QAAS,+HAGhD,CAAEiH,KAAK,EAAOtB,KAAM,CAAE8F,OAAMqX,oBAAmB/Y,QAAOzG,KAF7DA,EAAOA,EAAK4J,aAAa,iB,gCAKhB,IAAD,OACJlK,EAAS3B,KAAKygB,WAClBzgB,KAAK0B,SAAS,CAAEwe,eAAe,IAE/B,IAAIpf,EAAON,SAASkC,eAAe,+BAGnC,GAFA5B,EAAK4gB,UAAY,GAEb/f,EAAOiE,IACT9E,EAAKgQ,UAAYnP,EAAOhD,YAD1B,CAKAmC,EAAKgB,MAAM4G,MAAQ,UACnB5H,EAAKgQ,UAAY,mEAEjBtQ,SAASkC,eAAe,WAAWZ,MAAM4L,WAAa,SAEtD,IAAI6B,EAAM,iBACoB,QAA1BvP,KAAKrC,MAAMyD,MAAM3C,OACnB8Q,EAAM,6BACN5N,EAAO2C,KAAKrG,GAAK+B,KAAKrC,MAAMM,IAE9BmF,QAAQC,IAAI1B,GAGZ,IAAM2C,EAAOa,KAAKC,UAAUzD,EAAO2C,MACnCe,MAAMkK,EAAK,CACTjK,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GACV,OAAhBA,EAAK3C,QACPb,EAAKgB,MAAM4G,MAAQ,UACnB5H,EAAKgQ,UAAY,0DAGjB,EAAKnT,MAAMwF,gBACX,EAAKqd,gBAEL1f,EAAKgB,MAAM4G,MAAQ,UACnB5H,EAAKgQ,UAAY,6GACjBtQ,SAASkC,eAAe,WAAWZ,MAAM4L,WAAa,cAEvD/H,OAAM,SAAAC,GACP9E,EAAKgB,MAAM4G,MAAQ,UACnB5H,EAAKgQ,UAAY,qFACjBtQ,SAASkC,eAAe,WAAWZ,MAAM4L,WAAa,gB,sCAK7ClN,SAASkC,eAAe,+BAC9BoO,UAAY,GACjB9Q,KAAK0B,SAAS,CAAEwe,eAAe,IAC/B1f,SAASkC,eAAe,kBAAkBgB,QAAU1D,KAAK2gB,Y,kCAG9C,IAAD,OACVvd,QAAQC,IAAI,UACZrD,KAAK0B,SAAS,CAAEwe,eAAe,IAE/B,IAAIpf,EAAON,SAASkC,eAAe,+BACnC5B,EAAKgB,MAAM4G,MAAQ,UACnB5H,EAAKgQ,UAAY,uDAGjB,IAAMxM,EAAOa,KAAKC,UAAU,CAAEnH,GAAI+B,KAAKrC,MAAMM,KAC7CoH,MAAM,oBAAqB,CACzBC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,SACCkB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAAQF,MAAK,SAAAlB,GAC9B,GAAoB,OAAhBA,EAAK3C,OAAiB,CAGxB,IAAI0G,EAAkBlD,KAAK6B,MAAO7B,KAAKC,UAAU,EAAKzH,MAAMqG,KAAKpE,WACjEyI,EAAkBA,EAAgBoC,QAAO,SAAAnC,GAAO,OAAIA,EAAQrK,KAAO,EAAKN,MAAMM,MAC9E,IAAM0jB,EAAexc,KAAKC,UAAU,CAAExF,SAAUyI,IAEhDhD,MAAM,qBAAsB,CAC1BC,OAAQ,OACRC,QAAS,CACP,OAAU,oCACV,eAAgB,oBAElBjB,KAAMqd,IACLnc,MAAK,kBAAM,EAAK7H,MAAMuG,eAGzB,EAAKvG,MAAMwF,gBACX,EAAKqd,mBAEL1f,EAAKgB,MAAM4G,MAAQ,UACnB5H,EAAKgQ,UAAY,6GACjBtQ,SAASkC,eAAe,WAAWZ,MAAM4L,WAAa,aAEvD/H,OAAM,SAAAC,GACP9E,EAAKgB,MAAM4G,MAAQ,UACnB5H,EAAKgQ,UAAY,qFACjBtQ,SAASkC,eAAe,WAAWZ,MAAM4L,WAAa,iB,GAzY9BvG,IAAMC,WAmarBC,iBArBf,SAAyBC,GACvB,MAAO,CACLlG,MAAOkG,EAAMQ,cACb9D,KAAMsD,EAAMK,SAAS3D,SAIzB,SAA4B+D,GAC1B,MAAO,CACL9C,iBAAkB,SAACzG,EAAOC,GACxBsJ,EAAS9C,YAAiBzG,EAAOC,KAEnC0E,cAAe,WACb4E,EAAS5E,gBAEXe,UAAW,WACT6D,EAAS7D,mBAKAmD,CAA6C4Y,K,kDCjb5D,kCAAO,IAAMvE,EAAsB,sB,gHCIdnF,E,uKAEjB,OACE,qBAAKlW,UAAU,aAAf,SACML,KAAKrC,MAAMiE,U,UAJmBuF,EAAMC,Y,gCCJhD,kCAAO,IAAMwa,EAAmB,oB,iICMXC,E,uKAGjB,OACE,cAAC,IAAD,CAAM9Y,GAAE,eAAW/I,KAAKrC,MAAMoL,IACxB1I,UAAS,gCAA4BL,KAAKrC,MAAMmkB,SADtD,SAEI9hB,KAAKrC,MAAMiL,U,kDANkBzB,IAAMC,WCAxB2a,E,uKAGjB,OAAO,sBAAK1hB,UAAU,aAAf,UACL,cAAC,EAAD,CAAWuI,MAAM,mDAAWG,GAAG,UAC/B,cAAC,EAAD,CAAWH,MAAM,6CAAUG,GAAG,UAC9B,cAAC,EAAD,CAAWH,MAAM,+DAAaG,GAAG,SACjC,cAAC,EAAD,CAAWH,MAAM,yDAAYG,GAAG,aAChC,cAAC,EAAD,CAAWH,MAAM,qCAAYG,GAAG,cAChC,cAAC,EAAD,CAAWH,MAAM,mDAAWG,GAAG,aAC/B,cAAC,EAAD,CAAWH,MAAM,6CAAUG,GAAG,YAC9B,cAAC,EAAD,CAAWH,MAAM,2EAAeG,GAAG,eACnC,cAAC,EAAD,CAAWH,MAAM,wFAAkBG,GAAG,cACtC,cAAC,EAAD,CAAWH,MAAM,iBAAiBG,GAAG,mBACrC,cAAC,EAAD,CAAWH,MAAM,gBAAgBG,GAAG,kBACpC,cAAC,EAAD,CAAWH,MAAM,yBAAUG,GAAG,0B,kDAfG5B,IAAMC,W,gBCExBkV,E,uKAIjB,MAAwB,QAApBtc,KAAKrC,MAAMc,KACN,qBAAK4B,UAAU,uCAAf,SACL,qBAAKA,UAAU,6BAAf,SACE,cAAC2hB,EAAA,EAAD,QAIG,sBAAK3hB,UAAU,gBAAf,UACH,cAAC6W,EAAA,EAAD,CAAQC,KAAK,uBACb,sBAAK9W,UAAU,WAAf,UACE,cAAC,EAAD,IACA,cAAC2hB,EAAA,EAAD,Y,kDAf0B7a,IAAMC,Y,wICA5C6a,YAAMC,K,IAGAC,E,kDACJ,WAAYxkB,GAAQ,IAAD,8BACjB,cAAMA,IAEDykB,SAAW,GAChB,EAAKC,wBAA0B,CAAC,MAAO,OACvC,EAAKC,uBAAyB,CAAC,SAAU,QACzC,EAAKC,sBAAwB,CAAC,kBAAmB,WAAY,YAE7D,EAAKC,YAAc,GACnB,EAAKC,UAAW,EAGhB,EAAKC,aAAe,EAAKA,aAAavjB,KAAlB,gBACpB,EAAKD,QAAU,EAAKA,QAAQC,KAAb,gBACf,EAAKwjB,KAAO,EAAKA,KAAKxjB,KAAV,gBAdK,E,qDAkBjB,OACE,sBAAKkB,UAAS,kCAA8BL,KAAKrC,MAAMkD,MAAS5C,GAAE,UAAM+B,KAAKrC,MAAMM,GAAjB,SAAlE,UACE,qBAAKoC,UAAU,oBAAf,SAAqCL,KAAKrC,MAAMgB,UAChD,0BAAUyL,KAAK,OAAOnM,GAAK+B,KAAKrC,MAAMM,U,0CAO1C,IAAI2kB,EAAO,CAAC,aAAc,gBACF,iBAApB5iB,KAAKrC,MAAMkD,OACb+hB,EAAO,CACL,IAAO,0BACP,IAAO,yBACP,MAAS,uBACT,aAAc,iBAIlB,IAAIC,GAAkB,EACE,QAApB7iB,KAAKrC,MAAMc,OACbokB,EAAkB,CAAEC,MAAO,IAG7B9iB,KAAK+iB,OAASb,IAAWc,aAAaxiB,SAASkC,eAAgB1C,KAAKrC,MAAMM,IAAM,CAG9EglB,aAAa,EACbC,cAAc,EACdC,eAAe,EACf1kB,KAAMuB,KAAKrC,MAAMkD,KACjBuiB,WAAY,EACZxX,MAAO,UACPyX,UAAWT,EACXU,QAAST,EAGTZ,MAAO,CACLsB,SAAS,KAIbvjB,KAAK+iB,OAAO5V,GAAG,SAAUnN,KAAK0iB,cAC9B1iB,KAAK+iB,OAAOS,SAAUxjB,KAAKrC,MAAMmF,MAEjCtC,SAAS8C,iBAAiB,UAAWtD,KAAKd,W,6CAI1CsB,SAAS4D,oBAAoB,UAAWpE,KAAKd,W,8BAGtC2F,GACP,OAAKA,EAAMsB,SAA0B,SAAftB,EAAM/B,MACvB+B,EAAMoB,SAA0B,SAAfpB,EAAM/B,MAAkC,SAAf+B,EAAM/B,MAAkC,SAAf+B,EAAM/B,OAC5E9C,KAAK2iB,OACL9d,EAAMqB,kBACC,GAELrB,EAAMsB,SAA0B,SAAftB,EAAM/B,MACzB9C,KAAK+iB,OAAOS,SAAUxjB,KAAKrC,MAAMmF,MACjC+B,EAAMqB,kBACC,QAHT,I,6BAOM,IAAD,OACL,IAAIlG,KAAKrC,MAAMwC,mBAAf,CAEA,IAAIwG,EACJ3G,KAAKrC,MAAMsC,SAAS2G,KAAI,SAACC,EAASC,GAC5B,EAAKnJ,MAAMqF,QAAU6D,EAAQ5I,KAC/B0I,EAAYG,MAIhB,IAAIV,EAAQpG,KAAK+iB,OAAOU,WACpB1c,EAAkB/G,KAAKrC,MAAMsC,SAEjC,OAAQD,KAAKrC,MAAMkD,MACjB,IAAK,eACHkG,EAAgBJ,GAAW7D,KAAKC,KAAOqD,EACvC,MACF,IAAK,MACHW,EAAgBJ,GAAW7D,KAAKG,IAAMmD,EACtC,MACF,IAAK,aACHW,EAAgBJ,GAAW7D,KAAKI,GAAKkD,EACrC,MACF,QACEhD,QAAQqE,MAAM,sBAGlBzH,KAAKrC,MAAMsJ,eAAgBF,EAAgBG,Y,qCAI7B,IAAD,OAGTd,EAAQpG,KAAK+iB,OAAOU,WAGlBC,EAAO1jB,KAAK+iB,OAAOY,IAAIC,YAAYF,KACnCG,EAAK7jB,KAAK+iB,OAAOY,IAAIC,YAAYC,GAElC7jB,KAAKwiB,YAAYkB,KACpB1jB,KAAKwiB,YAAYkB,GAAQtd,EAAMpI,MAAM,MAAM0lB,GAAMxlB,QAGnD,IAAI4lB,EAAW1d,EAAMpI,MAAM,MAAM0lB,GAGjC,GAFAI,EAAWA,EAASD,EAAK,GAAKC,EAASD,EAAK,GAExCzd,IAAUpG,KAAKoiB,SACnB,GAAIhc,EAAMpI,MAAM,MAAM0lB,GAAMxlB,OAAS8B,KAAKwiB,YAAYkB,GACpD1jB,KAAKwiB,YAAYkB,GAAQtd,EAAMpI,MAAM,MAAM0lB,GAAMxlB,WADnD,CAaA,GAPwB,iBAApB8B,KAAKrC,MAAMkD,MACbb,KAAKqiB,wBAAwBhX,SAAQ,SAAA0Y,GAC/BA,EAAIxX,KAAKuX,IAAa,EAAKf,OAAOiB,YAAY,mBAK9B,QAApBhkB,KAAKrC,MAAMkD,KAAgB,CAC7B,GAAI,KAAK0L,KAAKuX,GAAa,OAC3B,GAAI,KAAKvX,KAAKuX,GAAa,OAE3B9jB,KAAKsiB,uBAAuBjX,SAAQ,SAAA0Y,GAC9BA,EAAIxX,KAAKuX,IAAa,EAAKf,OAAOiB,YAAY,mBAK9B,eAApBhkB,KAAKrC,MAAMkD,MACbb,KAAKuiB,sBAAsBlX,SAAQ,SAAA0Y,GAC7BA,EAAIxX,KAAKuX,IAAa,EAAKf,OAAOiB,YAAY,mBAIlD5d,IAAUpG,KAAKoiB,WAAYpiB,KAAKikB,oBAAqB,GACzDjkB,KAAKoiB,SAAWhc,EAChBpG,KAAKwiB,YAAYkB,GAAQtd,EAAMpI,MAAM,MAAM0lB,GAAMxlB,Y,GArK5BiJ,IAAMC,WAwLhBC,iBAff,SAAyBC,GACvB,MAAO,CACLrH,SAAUqH,EAAMrH,SAASsH,KACzBpH,mBAAoBmH,EAAMrH,SAASuH,eAIvC,SAA4BO,GAC1B,MAAO,CACLd,eAAgB,SAAEF,GAChBgB,EAASd,YAAgBF,QAKhBM,CAA6C8a,I,4ICxLtD5F,E,kDACJ,WAAY5e,GAAQ,uCACZA,G,qDAGE,IAAD,OAEHwe,EACF,qBAAK9b,UAAU,eAAf,SACE,qBAAKA,UAAU,UAAf,SACE,qBAAKC,IAAI,oBAAoBC,IAAI,QAAQF,UAAU,qBAKrDsB,EAAS,CAAC,UAAW,UAAW,WAGpC,IAAK3B,KAAKrC,MAAMqG,OAAShE,KAAKrC,MAAM6J,WAElC,OADAxH,KAAKrC,MAAMuG,YACJiY,GAEiB,OAAtBnc,KAAKrC,MAAMgE,QAAyC,YAAtB3B,KAAKrC,MAAMgE,QAAwB3B,KAAKrC,MAAM8J,SAC9E0U,EAAY,cAAC,IAAD,CAAUpT,GAAI,CAAE+O,SAAU,cACtCnW,EAAO,GAAK,QAGV3B,KAAKrC,MAAMqG,MAA8B,OAAtBhE,KAAKrC,MAAMgE,QAAoB3B,KAAKrC,MAAM6J,YAAexH,KAAKrC,MAAM8J,QACzF9F,EAAO,GAAK,MAMd0E,EAAQC,UAAS,WACV,EAAK3I,MAAMuC,mBAAsB,EAAKvC,MAAMwC,oBAAsB,EAAKxC,MAAMwF,mBAGhFnD,KAAKrC,MAAMyC,cACbuB,EAAO,GAAK,MACH3B,KAAKrC,MAAMuC,oBAAqByB,EAAO,GAAK,MAKvD0E,EAAQC,UAAS,WACV,EAAK3I,MAAM6Z,gBAAmB,EAAK7Z,MAAMkZ,iBAAmB,EAAKlZ,MAAM2Y,gBAG1EtW,KAAKrC,MAAMmZ,WACbnV,EAAO,GAAK,MACH3B,KAAKrC,MAAM6Z,iBAAkB7V,EAAO,GAAK,MAKpD,IAAIuiB,GAAK,EAOT,OANAviB,EAAO0J,SAAQ,SAAAvI,GACA,OAATA,IAAiBohB,GAAK,MAGxBA,IAAM/H,EAAYnc,KAAKrC,MAAMqW,UAE1BmI,M,GA/DgBhV,IAAMC,WAwGlBC,iBArCf,SAAyBC,GACvB,MAAO,CAGLtD,KAAMsD,EAAMK,SAAS3D,KACrBwD,WAAYF,EAAMK,SAASH,WAC3B7F,OAAQ2F,EAAMK,SAAShG,OACvB8F,MAAOH,EAAMK,SAASF,MAGtBxH,SAAUqH,EAAMrH,SAASsH,KACzBpH,mBAAoBmH,EAAMrH,SAASuH,WACnCpH,cAAekH,EAAMrH,SAASwH,MAC9BvH,kBAAmBoH,EAAMrH,SAASyH,UAGlCkP,MAAOtP,EAAMsP,MAAMrP,KACnBsP,gBAAiBvP,EAAMsP,MAAMpP,WAC7BsP,WAAYxP,EAAMsP,MAAMnP,MACxB+P,eAAgBlQ,EAAMsP,MAAMlP,cAIhC,SAA4BK,GAC1B,MAAO,CACL7D,UAAW,WACT6D,EAAS7D,gBAEXf,cAAe,WACb4E,EAAS5E,gBAEXmT,WAAY,WACVvO,EAASuO,mBAKAjP,CAA6CkV,K,kIChHvCnD,E,uKAEjB,OACE,qBAAK/Y,UAAU,YAAf,SACE,gCACE,qBAAKA,UAAU,qBAAf,iBACA,sBAAMA,UAAU,kBAAhB,yW,UAN4B8G,EAAMC,Y,2KCKvB4Q,E,kDACnB,WAAYra,GAAQ,uCACZA,G,qDAGE,IAAD,OAMP,OAHA0I,EAAQC,UAAS,kBAAM,EAAK6d,UAAU,EAAKxmB,MAAMqG,SAG1C,qBAAK3D,UAAU,cAAcpC,GAAK+B,KAAKrC,MAAMM,O,kCAGzC,IAWPmmB,EAXM,OAiBNrhB,GAJAqhB,EADJpkB,KAAKrC,MAAMqN,QACShL,KAAKrC,MAAMsD,IAAI6B,KACf9C,KAAKrC,MAAMsD,IAAIiE,aAGVnC,KAWzBA,GARAA,GADAA,EAAOA,EAAK/E,MAAM,OACN4I,KAAI,SAAA8D,GACd,MAAO,CACL5H,KAAM4H,EAAK1M,MAAM,MAAM,GACvBqmB,OAAQ3Z,EAAK1M,MAAM,MAAM,QAKjB4I,KAAI,SAAA8D,GAGd,QAAoB3K,IAAhB2K,EAAK2Z,OAAsB,CAC7B,IAGIxjB,EAUAqU,EAbEoP,EAAa5Z,EAAK2Z,OAAOE,WAAW,KAAM,IAIhD,IACE1jB,EAAOyjB,EAAWtK,MAAM,cAAc,GACnCuK,WAAW,IAAK,IAChBtD,cACH,MAAMlC,GACN,MAAO,CAAEjc,KAAM4H,EAAK5H,KAAMuhB,QAAQ,GAKpC,IACEnP,EAAOoP,EAAWtK,MAAM,mBACxB,MAAO+E,GACP7J,EAAO,KAIT,OAAa,OAATA,EAAwB,CAAEpS,KAAM4H,EAAK5H,KAAMuhB,OAAQ,CAAExjB,OAAMqU,KAAM,MAGrEA,EAAOA,EAAKtO,KAAI,SAAA8D,GACd,IAAIN,EAAOM,EAAKsP,MAAM,SAAS,GAC3B5T,EAAQsE,EAAKsP,MAAM,SAAS,GAEhC,MAAO,CAAE5P,OAAMhE,MADfA,EAAQA,EAAMmb,UAAU,EAAGnb,EAAMlI,OAAS,OAIrC,CAAE4E,KAAM4H,EAAK5H,KAAMuhB,OAAQ,CAAExjB,OAAMqU,UAE1C,MAAO,CAAEpS,KAAM4H,EAAK5H,KAAMuhB,QAAQ,MAQtC,IAzEU,EAyENG,EAAc,GACdC,EAAW,GA1EL,cA6EO1hB,GA7EP,yBA6ED2H,EA7EC,QAgFR,GAAIA,EAAK2Z,OAGP,OAAQ3Z,EAAK2Z,OAAOxjB,MAClB,IAAK,OAGH,IAAM6jB,EAAWha,EAAK2Z,OAAOnP,KAAKhU,MAAK,SAAAyjB,GAAG,MAAiB,SAAbA,EAAIva,QAClD,QAAiBrK,IAAb2kB,EAAwB,CAC1BD,EAASlc,KAAK,IAAI6E,SAAQ,SAAAkS,GAAO,OAAIA,EAAS5U,EAAK5H,UACnD,MAIF,IAAMb,EAAO0G,EAAM+b,EAASte,OAC5B,QAAarG,IAATkC,EAAoB,CACtBwiB,EAASlc,KAAK,IAAI6E,SAAQ,SAAAkS,GAAO,OAAIA,EAAS5U,EAAK5H,UACnD,MAIF,IAAMoS,EAAO,CACX,CAAE9K,KAAM,OAAQhE,MAAOnE,EAAK2iB,UAC5B,CAAExa,KAAM,MAAOhE,MAAOnE,EAAKA,KAAK,IAChC,CAAEmI,KAAM,MAAOhE,MAAOnE,EAAKA,KAAK,IAChC,CAAEmI,KAAM,IAAKhE,MAAOnE,EAAKA,KAAK,IAC9B,CAAEmI,KAAM,SAAUhE,MAAOnE,EAAK8H,SAEhCW,EAAK2Z,OAAOnP,KAAOA,EAErB,QACEuP,EAASlc,KAAKlD,MAAM,cAAD,OAAeqF,EAAK2Z,OAAOxjB,KAA3B,SAChB2E,MAAK,SAAAoP,GAAQ,OAAIA,EAAS9T,UAC1B0E,MAAK,SAAA1E,GACJ,IAAI+jB,EAAa/jB,EAMjB,OALA4J,EAAK2Z,OAAOnP,KAAK7J,SAAQ,SAAAsZ,GACvBE,EAAaA,EAAWN,WAAX,aAA4BI,EAAIva,KAAhC,OAA2Cua,EAAIve,UAIvDsE,EAAK5H,KAAO+hB,WAS3BJ,EAASlc,KAAK,IAAI6E,SAAQ,SAAAkS,GAAO,OAAIA,EAAS5U,EAAK5H,WApDvD,2BAAwB,IA7Ed,8BAqIVsK,QAAQC,IAAIoX,GAAUjf,MAAK,SAACsf,GAG1BA,EAAQzZ,SAAQ,SAAC0Z,GACfP,GAAeO,KAIjB,IAAIjiB,EAAI,oCAAiCshB,EAAcnhB,IAA/C,iBAeR,GAZAH,GAAI,UAAQ0hB,EAAR,aAGJhkB,SACGkC,eAAgB,EAAK/E,MAAMM,IAC3B4gB,UAAY/b,EAOV,EAAKnF,MAAMqG,KAAhB,CAGA,IAAM/F,EAAK,EAAKN,MAAMqF,MAChBpD,EAAW,EAAKjC,MAAMqG,KAAKpE,SAASsB,MAAK,SAAAC,GAAI,OAAIA,EAAKlD,KAAOA,KAG7DgD,EAAM,IAAIkc,IAAI,EAAKxf,MAAMsD,IAAKrB,GACpCqB,EAAIqc,OAGJ,IACE,EAAKhf,MAAQib,SAAU,MAAO6K,EAAclhB,IAC5C,EAAK5E,MAAM2C,GACX,MAAM8d,GAAK3b,QAAQqE,MAAM,sJAAoCsX,Y,GAxL5B5X,IAAMC,a,wLCA1B4a,E,uKAIjB,IAAMgD,EAAQ,CAAC,4JAAD,khIAiJd,OACE,sBAAK3kB,UAAU,MAAf,UACE,eAAC,IAAD,CAASuI,MAAM,mDAAW3K,GAAG,QAA7B,UACE,cAAC,IAAD,CAAOmM,KAAK,cACZ,2IAFF,woCAME,uBANF,IAMQ,uBANR,ykCAWE,uBAXF,IAWQ,uBAXR,qwCAiBA,eAAC,IAAD,CAASxB,MAAM,6CAAU3K,GAAG,QAA5B,6gBAEE,cAAC,IAAD,CAAOmM,KAAK,cAFd,ikDAIE,cAAC,IAAD,CAAOA,KAAK,qBAJd,moBAOA,eAAC,IAAD,CAASxB,MAAM,+DAAa3K,GAAG,OAA/B,2mDACwX,uBAAK,uBAD7X,8tCAIA,eAAC,IAAD,CAAS2K,MAAM,yDAAY3K,GAAG,WAA9B,saAEE,cAAC,IAAD,CAAOmM,KAAK,iBAEZ,qJACA,6HALF,kNAME,uBACA,wEAPF,2RAQE,cAAC,IAAD,CAAOA,KAAK,qBAEZ,yIACA,cAAC,IAAD,CAAOA,KAAK,eAXd,2kBAawC,uBAbxC,IAa8C,uBAC5C,6HAdF,0LAeE,uBACA,wEAhBF,mQAiBE,uBACA,oFAlBF,w9BAqBE,uBACA,wEAtBF,+GAsB4C,mBAAGrM,KAAK,2BAAR,yBAtB5C,8JAwBE,uBACA,4GAzBF,4OA0BE,cAAC,IAAD,CAAOqM,KAAK,wBAEZ,uHA5BF,2fA8BwB,uBAAK,uBAC3B,2FA/BF,uSAgCE,uBACA,oFAjCF,+OAkCE,cAAC,IAAD,CAAOA,KAAK,0BAGd,eAAC,IAAD,CAASxB,MAAM,qCAAY3K,GAAG,YAA9B,8tBAEE,kJAFF,ygCAGqM,6eACnM,cAAC,IAAD,UACI+mB,EAAM,KAEV,2FAPF,yiBASE,cAAC,IAAD,UACIA,EAAM,KAEV,+EAZF,miBAcE,cAAC,IAAD,UACIA,EAAM,KAEV,cAAC,IAAD,UACIA,EAAM,KAlBZ,oyBAqBE,4IArBF,kkBAsBqH,6dAtBrH,2bAuBE,cAAC,IAAD,UACIA,EAAM,KAxBZ,oIA0B0B,mJA1B1B,ufA2BE,sIA3BF,2LA6BE,cAAC,IAAD,UACIA,EAAM,KA9BZ,gaAkCA,eAAC,IAAD,CAASpc,MAAM,mDAAW3K,GAAG,WAA7B,24BAEE,cAAC,IAAD,CAAOmM,KAAK,iBAFd,63BAG4K,ucAH5K,wxBAKA,eAAC,IAAD,CAASxB,MAAM,6CAAU3K,GAAG,UAA5B,yxBACwJ,oEADxJ,odAEE,sEAFF,mMAIE,cAAC,IAAD,UACI+mB,EAAM,KAEV,cAAC,IAAD,CAAO5a,KAAK,eACZ,oGARF,0IAUE,cAAC,IAAD,UACI4a,EAAM,KAEV,cAAC,IAAD,CAAO5a,KAAK,eACZ,sEAdF,oNAgBE,cAAC,IAAD,UACI4a,EAAM,KAEV,cAAC,IAAD,CAAO5a,KAAK,aAnBd,oRAsBA,eAAC,IAAD,CAASxB,MAAM,wIAA0B3K,GAAG,aAA5C,8qBAGU,6CAHV,yEAG+C,0CAH/C,IAKE,cAAC,IAAD,UACI+mB,EAAM,MAGV,wHATF,qlBAWgD,8CAXhD,+JAY8B,wCAZ9B,8LAeE,cAAC,IAAD,UACIA,EAAM,SAGZ,eAAC,IAAD,CAASpc,MAAM,wFAAkB3K,GAAG,YAApC,46BAGE,cAAC,IAAD,CAAOmM,KAAK,eAHd,qXAKE,cAAC,IAAD,UACI4a,EAAM,KANZ,4ZASE,cAAC,IAAD,UACIA,EAAM,MAVZ,4jBAaE,cAAC,IAAD,UACIA,EAAM,MAdZ,23BAiBE,cAAC,IAAD,UACIA,EAAM,MAlBZ,y6BAqBE,cAAC,IAAD,UACIA,EAAM,MAtBZ,q0BAyBE,cAAC,IAAD,UACIA,EAAM,MA1BZ,8HA6BE,cAAC,IAAD,CAAO5a,KAAK,gBA7Bd,mjBA+BE,cAAC,IAAD,CAAOA,KAAK,eAEd,eAAC,IAAD,CAASxB,MAAM,iBAAiB3K,GAAG,iBAAnC,8mBAGE,gDAHF,sOAKE,cAAC,IAAD,UACI+mB,EAAM,MANZ,8eASE,uDATF,ujBAWE,cAAC,IAAD,UACIA,EAAM,MAZZ,ifAgBA,eAAC,IAAD,CAASpc,MAAM,gBAAgB3K,GAAG,gBAAlC,umBAEoB,6TAClB,+EACA,cAAC,IAAD,UACI+mB,EAAM,MAEV,kFACA,cAAC,IAAD,UACIA,EAAM,MAEV,0FACA,cAAC,IAAD,UACIA,EAAM,MAEV,qFAfF,6LAiBE,cAAC,IAAD,UACIA,EAAM,SAGZ,eAAC,IAAD,CAASpc,MAAM,8BAAU3K,GAAG,mBAA5B,qUAEE,uNAAwC,mBAAGF,KAAK,oBAAoB8B,SAAS,GAAG+I,MAAM,GAA9C,oE,0CAO3B,IAAD,SAEZqc,EAAczkB,SAAS0K,iBAAiB,eAF5B,cAIK+Z,GAJL,IAIlB,2BAAoC,SACvB3hB,iBAAiB,SAAS,SAACuB,GAAD,OAAW,EAAKqgB,WALrC,8BAQlBllB,KAAKklB,S,6EAQL7e,EAAQC,UAAS,WAGf,IAAMrI,EAAKJ,OAAOC,SAASqnB,KAAK5D,UAAU,GAC1C,GAAKtjB,EAAL,CAEA,IAAMuP,EAAOhN,SAASgE,cAAc,QACpCgJ,EAAK4X,OAAO,EAAG,GAGf,IACMpG,EADQxe,SAASkC,eAAezE,GAClBuX,wBACd6P,EAAU7X,EAAKgI,wBAAwBrG,IACvCiW,EAASpG,EAAM7P,IAAMkW,EAG3B7X,EAAK4X,OAAO,EAAGA,W,GAvZgBje,IAAMC,a","file":"static/js/main.4d847957.chunk.js","sourcesContent":["import React from 'react';\n\nimport {\n  faPlus,\n  faThumbtack,\n  faArrowsAlt,\n  faArrowsAltH,\n  faExpandArrowsAlt,\n  faCompressArrowsAlt,\n  faLock,\n  faPlay,\n  faPaperPlane,\n  faSyncAlt,\n  faExternalLinkAlt,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { fetchProjects, changeProjects } from '../../../actions/projectsActions';\nimport { switchModalState } from \"../../../actions/projectsModalActions\";\nimport { connect } from \"react-redux\";\n\n/* codemirror */\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/darcula.css';\nimport 'codemirror/addon/hint/show-hint.css';\n\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/htmlembedded/htmlembedded';\nimport 'codemirror-minimap';\n\nimport 'codemirror/addon/hint/show-hint.js';\nimport 'codemirror/addon/hint/html-hint.js';\nimport 'codemirror/addon/hint/css-hint';\nimport 'codemirror/addon/hint/javascript-hint';\n\nimport 'codemirror-minimap/src/minimap.css';\n\nimport Button from \"../../../tools/button/Button\";\nimport Error from '../error-404/Error404';\nimport Navbar from '../navbar/Navbar';\nimport AppNavbar from '../app-navbar/AppNavbar';\nimport CodeEditor from '../code-editor/CodeEditor';\nimport Interpreter from '../../../tools/interpreter/Interpreter';\nimport Message from '../../../tools/message/Message';\nimport Window from '../create-app-window/CreateAppWindow';\nimport Wrap from '../../../tools/modal-wrap/ModalWrap';\nimport {connectToDevRoom, socket, updateAppCode} from '../../../socketCore';\nimport { changeAppState } from \"../../../actions/appStateActions\";\nimport { fetchUser } from \"../../../actions/userActions\";\nimport { Link } from \"react-router-dom\";\nimport AlertsView from \"../../../tools/alerts/alertsView\";\n\n/* Component */\nclass ProjectPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    /* settings */\n    this.host = window.location.href.split('projects')[0];\n\n    let id = window.location.href.split('/');\n    id[id.length - 1] !== '' ? this.id = id[id.length - 1] : this.id = id[id.length - 2];\n    this.mouseDown = false;\n    this.hotkey = true;\n    this.downloadFlag = false;\n    this.appJS = null;\n    this.playJSFlag = false;\n\n    this.state = {\n      mode: 'any',\n      page: 0,\n      message: false,\n      emulator: {\n        positionMode: false,\n        resizeMode: false,\n        fullscreenMode: false,\n        width: 445,\n        marginLeft: 20,\n      }\n    }\n\n    // bind\n\n    /* hotkeys */\n    this.keydown = this.keydown.bind(this);\n\n    /* emulator */\n    this.changeEmulatorPositionMode = this.changeEmulatorPositionMode.bind(this);\n    this.changeEmulatorResizeMode = this.changeEmulatorResizeMode.bind(this);\n    this.changeEmulatorFullscreenMode = this.changeEmulatorFullscreenMode.bind(this);\n    this.moveMouseDown = this.moveMouseDown.bind(this);\n    this.resizeMouseDown = this.resizeMouseDown.bind(this);\n    this.resizeEmulator = this.resizeEmulator.bind(this);\n    this.mouseUp = this.mouseUp.bind(this);\n    this.moveEmulator = this.moveEmulator.bind(this);\n    this.settings = this.settings.bind(this);\n\n    /* download */\n    this.download = this.download.bind(this);\n\n    /* upload */\n    this.upload = this.upload.bind(this);\n  }\n\n  render() {\n\n    /* if any err or projects isn`t loaded */\n    if (this.props.projects === undefined ||\n        this.props.projectsFulfilled === false ||\n        this.props.projectsIsFetching ||\n        this.props.projectsError) {\n      return (\n        <div className=\"loading-wrap\">\n          <div className=\"loading\">\n            <img src=\"/images/appex.svg\" alt=\"appex\" className=\"loading__img\"/>\n          </div>\n        </div>\n      );\n    }\n\n    /* if the screen is too small */\n    const width = document.documentElement.offsetWidth;\n    const height = document.documentElement.offsetHeight;\n    if (width < 1080 || height < 910) {\n      return (\n        <Message type={false}\n                 text=\"Ваш экран слишком маленький для отображения редактора кода\"\n                 underText=\"Попробуйте открыть на более большом мониторе или уменьмить масштаб\"\n                 center={true}/>\n      );\n    }\n\n    /* find app */\n    if (this.props.projects.length !== 0) {\n      this.app = this.props.projects.find(elem => elem.id === this.id);\n    } else {\n      this.app = false;\n    }\n\n    /* if app isn`t being */\n    if(!this.app) {\n      return (\n        <Error/>\n      );\n    }\n\n    /* render message */\n    let message = null;\n    if (this.state.message) {\n      message = <Message { ...this.state.message }/>;\n      this.timeout = setTimeout(() => {\n        if (Date.now() - this.state.message.time > 3999) {\n          this.setState({ message: false });\n        }\n      }, 4000);\n    }\n\n    /* render settings window */\n    let modal;\n    this.props.modal.status? modal = <Wrap for={ <Window { ...this.app } /> } />: modal = null;\n\n    return (\n      <div\n        className=\"project-page-container\"\n        onMouseUp={ this.mouseUp }>\n        { message }\n        { modal }\n        <AppNavbar app = { this.app }/>\n        <div\n          className={` app-demo\n            app-demo-position-${ this.state.emulator.positionMode }\n            app-demo-fullscreen-${ this.state.emulator.fullscreenMode } `}\n          style = {{\n            width: this.state.emulator.width + 'px',\n            marginLeft: this.state.emulator.marginLeft + 'px',\n          }}\n          id = 'app-demo'>\n          <div className=\"app-demo__emulator\">\n            <iframe\n              src={`${ this.host }view/${ this.id }?devMode=true`}\n              frameBorder=\"0\"\n              id=\"iframe\"/>\n          </div>\n          <div className=\"app-demo__nav\">\n            <div\n              className={`app-demo__nav-item app-demo__nav-item_${ this.state.emulator.positionMode }`}\n              onClick={ this.changeEmulatorPositionMode }>\n              <FontAwesomeIcon icon={ faThumbtack } className=\"app-demo__nav-item-icon\"/>\n            </div>\n            <div\n              className=\"app-demo__nav-item\"\n              onMouseDown={ this.moveMouseDown }>\n              <FontAwesomeIcon icon={ faArrowsAlt } className=\"app-demo__nav-item-icon\"/>\n            </div>\n            <div className={`app-demo__nav-item app-demo__nav-item_${ this.state.emulator.resizeMode }`}\n                 onClick={ this.changeEmulatorResizeMode }>\n              <FontAwesomeIcon icon={ faLock } className=\"app-demo__nav-item-icon\"/>\n            </div>\n            <div className=\"app-demo__nav-item\"\n                 onMouseDown={ this.resizeMouseDown }>\n              <FontAwesomeIcon icon={ faArrowsAltH } className=\"app-demo__nav-item-icon\"/>\n            </div>\n            <div className={`app-demo__nav-item app-demo__nav-item_${ this.state.emulator.fullscreenMode }`}\n                 onClick={ this.changeEmulatorFullscreenMode }>\n              <FontAwesomeIcon icon={ faExpandArrowsAlt } className=\"app-demo__nav-item-icon\"/>\n            </div>\n            <div className={`app-demo__nav-item`}\n                 onClick={() => {\n                   window.open(`../view/${ this.id }?devMode=true`,\n                     \"Emulator\",\n                     \"width=375,height=812\");\n                 }}>\n              <FontAwesomeIcon icon={ faExternalLinkAlt } className=\"app-demo__nav-item-icon\"/>\n            </div>\n            <div className={`app-demo__nav-item`}\n                 onClick={() => {\n                   document.getElementById('iframe')\n                     .contentWindow.location.reload(true)\n                 }}>\n              <FontAwesomeIcon icon={ faSyncAlt } className=\"app-demo__nav-item-icon\"/>\n            </div>\n          </div>\n        </div>\n        <div\n          className={`editors-wrap-${ this.state.mode } editors-wrap-${ this.state.mode }_${ this.state.page }`}\n          id=\"editors-wrap\">\n          <CodeEditor\n            id='code-editor-htmlembedded'\n            type='htmlembedded'\n            message='HTML'\n            code={ this.app.code.html }\n            appId={ this.id }\n            key={ this.state.mode + '-1' }\n            mode={ this.state.mode }/>\n          <CodeEditor\n            id='code-editor-css'\n            type='css'\n            message='CSS'\n            code={ this.app.code.css }\n            appId={ this.id }\n            key={ this.state.mode + '-2' }\n            mode={ this.state.mode }/>\n          <CodeEditor\n            id='code-editor-javascript'\n            type='javascript'\n            message='JAVASCRIPT'\n            code={ this.app.code.js }\n            appId={ this.id }\n            key={ this.state.mode + '-3' }\n            mode={ this.state.mode }/>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    if (!this.props.projectsFulfilled && !this.props.projectsIsFetching) {\n      this.props.fetchProjects();\n    }\n\n    if (this.props.projectsError) {\n      console.log('Неизвестная ошибка загрузки проектов!');\n      this.setState({message: { type: false, text: 'Неизвестная ошибка загрузки проектов!'}});\n    }\n\n    /* hotkeys */\n    document.addEventListener('keydown', this.keydown);\n    this.pressed = new Set();\n\n    const settingsButton = document.getElementById('app-navbar__settings');\n    if (settingsButton !== null) {\n      setTimeout(() => settingsButton.onclick = this.settings, 100);\n    }\n\n    /* set app state */\n    this.props.changeAppState({ state: 'closed', type: 'my', id: this.id });\n\n    /* connect do devRoom to update interpreter */\n    if (socket.listeners('updateAppCode').length > 0) { return; }\n\n    /* connect to devRoom */\n    connectToDevRoom(this.id);\n\n\n\n    /*   ---==== Alerts ====---   */\n\n    const alerts = new AlertsView(this.props.user.alerts, 'ProjectPage', this.props.fetchUser);\n    alerts.run();\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousemove', this.moveEmulator);\n    document.removeEventListener('keydown', this.keydown);\n  }\n\n\n\n  /*   ---==== Emulator actions ====---   */\n\n  changeEmulatorPositionMode() {\n    const oldState = this.state.emulator;\n    if (oldState.fullscreenMode) { return; }\n    this.setState({ emulator: {...oldState, positionMode: !this.state.emulator.positionMode} });\n  }\n\n  changeEmulatorResizeMode() {\n    const oldState = this.state.emulator;\n    if (oldState.fullscreenMode) { return; }\n    if (oldState.resizeMode === true) {\n      this.setState({ emulator: {...oldState, resizeMode: false, width: 445} });\n    } else {\n      this.setState({ emulator: {...oldState, resizeMode: true} });\n    }\n  }\n\n  changeEmulatorFullscreenMode() {\n    const oldState = this.state.emulator;\n    this.setState({ emulator: {...oldState, fullscreenMode: !this.state.emulator.fullscreenMode} });\n  }\n\n  moveMouseDown() {\n    this.mouseDown = true;\n\n    document.addEventListener('mousemove', this.moveEmulator);\n    document.body.style.userSelect = 'none';\n    document.querySelector('.app-demo__emulator')\n      .classList.add('app-demo__emulator_moving');\n    document.getElementById('app-demo').style.transition = '0s';\n  }\n\n  resizeMouseDown() {\n    this.mouseDown = true;\n\n    document.addEventListener('mousemove', this.resizeEmulator);\n    document.body.style.userSelect = 'none';\n    document.querySelector('.app-demo__emulator')\n      .classList.add('app-demo__emulator_moving');\n    document.getElementById('app-demo').style.transition = '0s';\n  }\n\n  mouseUp() {\n    if (this.mouseDown) {\n      this.mouseDown = false;\n      document.removeEventListener('mousemove', this.moveEmulator);\n      document.removeEventListener('mousemove', this.resizeEmulator);\n      document.body.style.userSelect = 'auto';\n      document.querySelector('.app-demo__emulator')\n        .classList.remove('app-demo__emulator_moving');\n      document.getElementById('app-demo').style.transition = '0.2s';\n    }\n  }\n\n  moveEmulator(event) {\n    const oldState = this.state.emulator;\n    if (this.mouseDown && !oldState.fullscreenMode) {\n      const left = event.pageX - oldState.width + 20;\n      this.setState({ emulator: { ...oldState,\n        marginLeft: left,\n        positionMode: true\n      }});\n    } else {\n      document.removeEventListener('mousemove', this.moveEmulator);\n    }\n  }\n\n  resizeEmulator(event) {\n    const oldState = this.state.emulator;\n    if (this.mouseDown && !oldState.fullscreenMode) {\n      const newWidth = event.pageX - oldState.marginLeft + 20;\n      this.setState({ emulator: { ...oldState,\n        positionMode: true,\n        resizeMode: true,\n        width: newWidth\n      }});\n    } else {\n      document.removeEventListener('mousemove', this.resizeEmulator);\n    }\n  }\n\n  settings() {\n    this.props.switchModalState(this.props.modal.status, 'set');\n  }\n\n  upload() {\n    const code = this.app.code;\n    const releaseCode = this.app.releaseCode;\n    const id = this.app.id;\n\n    /* send code to server */\n    const body = JSON.stringify({ code, releaseCode, id });\n    fetch('../api/change_app/code', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    }).then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n        this.setState({message: { type: true, text: 'Код отправлен!', time: Date.now() }});\n      } else {\n        this.setState({message: { type: false, text: 'Ошибка отправки!', time: Date.now() }});\n      }\n    }).catch(err => {\n      this.setState({message: { type: false, text: 'Ошибка отправки!', time: Date.now() }});\n    }).finally(() => {\n      localStorage.setItem('update-' + id, JSON.stringify(this.app));\n      localStorage.setItem('user', JSON.stringify(this.props.user));\n      setTimeout(() => localStorage.setItem('update-' + id, null), 3000);\n      updateAppCode(this.id);\n    });\n  }\n\n\n\n  /*   ---==== Hotkey events ====---   */\n\n  keydown(event) {\n    this.pressed.add(event.code);\n\n    /* alt + ... */\n    if (event.altKey && this.state.mode === 'one' && this.hotkey) {\n      switch (event.code) {\n        case 'ArrowRight': {\n          event.preventDefault();\n          let page = this.state.page;\n          page < 3 ? this.setState({ page: ++page }) : this.setState({ page: 0 });\n          if (page === 3) {\n            this.hotkey = false;\n            setTimeout(() => {\n              this.setState({ page: 2 });\n              this.hotkey = true;\n            }, 200);\n          }\n          return false;\n        }\n        case 'ArrowLeft': {\n          event.preventDefault();\n          let page = this.state.page;\n          page > -1 ? this.setState({ page: --page }) : this.setState({ page: 2 });\n          if (page === -1) {\n            this.hotkey = false;\n            setTimeout(() => {\n              this.setState({ page: 0 });\n              this.hotkey = true;\n            }, 200);\n          }\n          return false;\n        }\n        default: {}\n      }\n    }\n\n    /* save to localStorage */\n    if (event.ctrlKey && event.code === 'KeyB') {\n      event.preventDefault();\n      try {\n        const value = JSON.stringify( this.app.code );\n        localStorage.setItem(this.app.id, value);\n        process.nextTick(() => {\n          this.setState({message: { type: true, text: 'Бекап сохранен!', time: Date.now() }});\n        });\n      } catch {\n        this.setState({message: { type: true, text: 'Ошибка создания бекапа :(', time: Date.now() }});\n      }\n      return false;\n    }\n\n    /* download from localStorage */\n    if (event.ctrlKey && event.code === 'KeyD') {\n      event.preventDefault();\n      try {\n        let code = localStorage.getItem( this.app.id );\n        if (code === null) {\n          return this.setState({message: { type: false, text: 'Бекапа не найденно!', time: Date.now() }});\n        }\n        this.download(code);\n        this.setState({message: { type: true, text: 'Бекап загружен!', time: Date.now() }});\n      } catch {\n        this.setState({message: { type: true, text: 'Ошибка загрузки бекапа :(', time: Date.now() }});\n      }\n      return false;\n    }\n\n    /* release */\n    process.nextTick(() => {\n      if (event.altKey && event.code === 'KeyR') {\n        event.preventDefault();\n        this.download('_', false);\n        this.setState({message: { type: true, text: 'Релиз кода создан!', time: Date.now() }});\n        return false;\n      }\n    });\n\n    /* Switch mode */\n    if (event.altKey && event.code === 'KeyV') {\n      event.preventDefault();\n      process.nextTick(() => {\n        const mode = this.state.mode;\n        mode === 'any' ? this.setState({ mode: 'one' }) : this.setState({ mode: 'any' });\n      });\n      return false;\n    }\n\n    /* full view */\n    if (event.altKey && event.code === 'KeyF') {\n      event.preventDefault();\n      document.fullscreenElement\n        ? document.exitFullscreen()\n        : document.documentElement.requestFullscreen();\n      return false;\n    }\n\n    /* settings */\n    if (event.altKey && event.code === 'KeyS') {\n      event.preventDefault();\n      this.settings();\n      return false;\n    }\n\n    /* save */\n    if (event.ctrlKey && event.code === 'KeyS') {\n      event.preventDefault();\n      process.nextTick(() => this.upload());\n      return false;\n    }\n  }\n\n\n\n  /*   ---==== Download app code ====---   */\n\n  download(code, mode = true) {\n    if (this.props.projectsIsFetching && this.props.projects.length !== 0) { return; }\n\n    let appNumber;\n    this.props.projects.map((project, index) => {\n      if (this.app.id === project.id) {\n        appNumber = index;\n        return;\n      }\n    });\n\n    let changedProjects = this.props.projects;\n    mode\n      ? changedProjects[appNumber].code = JSON.parse(code)\n      : changedProjects[appNumber].releaseCode = changedProjects[appNumber].code;\n\n    this.props.changeProjects( changedProjects.slice() );\n\n    if(!mode) {\n      setTimeout(() => this.upload(), 4000);\n    }\n  }\n}\n\n\n\n/*   ---==== Connect to redux ====---   */\n\nfunction mapStateToProps(store) {\n  return {\n\n    /* projects */\n    projects: store.projects.data,\n    projectsIsFetching: store.projects.isFetching,\n    projectsError: store.projects.error,\n    projectsFulfilled: store.projects.fulfilled,\n\n    /* user */\n    user: store.userData.user,\n\n    /* app state */\n    appState: store.appState.state,\n    appId: store.appState.id,\n    appType: store.appState.type,\n\n    /* modal */\n    modal: store.projectsModal,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchProjects: () => {\n      dispatch(fetchProjects())\n    },\n    changeProjects: ( changedProjects ) => {\n      dispatch(changeProjects( changedProjects ))\n    },\n    switchModalState: (state, mode) => {\n      dispatch(switchModalState(state, mode))\n    },\n    changeAppState: (changedState) => {\n      dispatch(changeAppState(changedState))\n    },\n    fetchUser: () => {\n      dispatch(fetchUser())\n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectPage);","/* React */\nimport React from 'react';\n\n/* Components */\nimport { Link } from 'react-router-dom';\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { fetchUser } from \"../../../actions/userActions\";\nimport { connect } from \"react-redux\";\n\n/* Component */\nclass AppNavbar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loadState: false,\n    }\n  }\n\n  componentDidMount() {\n\n    /* find room settings */\n    const id = this.props.app.id;\n    const settings = this.props.user.settings.find(elem => elem.id === id);\n\n    if (settings !== undefined) {\n      document.getElementById('room-id').value = settings.body.roomId;\n      document.getElementById('room-pass').value = settings.body.roomPass;\n    }\n\n    /* send settings */\n    document.getElementById('send-settings').onclick = () => {\n      this.setState({ loadState: true });\n      let newUserSettings = this.props.user.settings;\n\n      /* change user settings */\n      if (settings !== undefined) {\n        newUserSettings = newUserSettings.map(setting => {\n          if (setting.id === id) {\n            return {\n              id, body: {\n                ...setting.body,\n                roomId: document.getElementById('room-id').value,\n                roomPass: document.getElementById('room-pass').value,\n              }\n            }\n          } else { return setting; }\n        });\n      } else {\n        newUserSettings.push({\n          id, body: {\n            roomId: document.getElementById('room-id').value,\n            roomPass: document.getElementById('room-pass').value,\n          }\n        });\n      }\n\n      const body = JSON.stringify({\n        settings: newUserSettings,\n      });\n\n      fetch('/api/change_user', {\n        method: \"POST\",\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n        },\n        body\n      }).then(res => res.json()).then(body => {\n        if (body.status === 'ok') {\n          this.setState({ loadState: false });\n          this.props.fetchUser();\n        }\n      });\n    }\n  }\n\n  render() {\n\n    let buttonIcon;\n    if (!this.state.loadState) {\n      buttonIcon = 'faLink';\n    } else {\n      buttonIcon = 'faSpinner';\n    }\n\n    return (\n      <nav className=\"app-navbar\">\n        <div className=\"app-navbar__block app-navbar__block-1\">\n          <div className=\"app-navbar__block app-navbar__item-wrap\">\n            <div className=\"app-navbar__item app-navbar__item-logo\" style={{ backgroundColor: this.props.app.color }}>\n              <FontAwesomeIcon icon={ Icons[this.props.app.icon || 'faMobile'] } />\n            </div>\n            <div className=\"app-navbar__item app-navbar__item-name-wrap\">\n              <div className=\"app-navbar__item app-navbar__item_name\">\n                { this.props.app.title }\n              </div>\n              <div className=\"app-navbar__item app-navbar__item_text\">\n                { this.props.app.id }\n              </div>\n            </div>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item-link\" id=\"app-navbar__settings\">\n            <span> Настойки </span>\n            <span> Alt + S </span>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item-link app-navbar__item-connect\">\n            <span> Подключиться к комнате </span>\n            <div className=\"app-navbar__item-text-inputs\">\n              <div>\n                <input type=\"text\" placeholder=\"id комнаты\" id=\"room-id\" autoComplete=\"off\"/>\n                <input type=\"text\" placeholder=\"пароль\" id=\"room-pass\" autoComplete=\"off\"/>\n              </div>\n              <button id=\"send-settings\"> <FontAwesomeIcon icon={ Icons[buttonIcon] } /> </button>\n            </div>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item-text\">\n            <span> | </span>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item-link\">\n            <Link to=\"/projects\"> Проекты </Link>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item-link\">\n            <Link to=\"/doc\"> Документация </Link>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item-link\">\n            <Link to=\"/main\"> Главная </Link>\n          </div>\n        </div>\n        <div className=\"app-navbar__block app-navbar__block-2\">\n          <div className=\"app-navbar__item app-navbar__item_text-button\">\n            <span> Сохранить </span>\n            <span> Ctrl + S </span>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item_text-button\">\n            <span> Бекап </span>\n            <span> Ctrl + B </span>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item_text-button\">\n            <span> Восстановить </span>\n            <span> Ctrl + D </span>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item_text-button\">\n            <span> Релиз </span>\n            <span> Alt + R </span>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item_text-button\">\n            <span> Сменить вид </span>\n            <span> Alt + V </span>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item_text-button\">\n            <span> Листать </span>\n            <span> Alt + ⯇ </span>\n            <span> Alt + ⯈ </span>\n          </div>\n          <div className=\"app-navbar__item app-navbar__item_text-button\">\n            <span> Во весь экран </span>\n            <span> Alt + F </span>\n          </div>\n        </div>\n      </nav>\n    );\n  }\n}\n\nfunction mapStateToProps(store) {\n  return {\n    user: store.userData.user,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchUser: () => {\n      dispatch(fetchUser())\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppNavbar);","import React from 'react';\n\nimport { changeAppState } from \"../../../actions/appStateActions\";\nimport { fetchUser } from \"../../../actions/userActions\";\nimport { connect } from \"react-redux\";\nimport { request } from \"../../../tools/apiRequest/apiRequest\";\nimport { Link } from \"react-router-dom\";\nimport AlertsView from \"../../../tools/alerts/alertsView\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCompress, faExpand, faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport io from 'socket.io-client';\n\nimport AppIcon from '../app-icon/AppIcon';\nimport SuperButton from '../super-button/SuperButton';\nimport SettingsApp from '../system-apps/settings/SettingsApp';\nimport StoreApp from '../system-apps/store/StoreApp';\nimport DocApp from '../system-apps/doc/DocApp';\nimport Widget from \"../widget/Widget\";\n\nconst socket = io();\n\n/* Component */\nclass MainPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    /* settings */\n    this.host = window.location.href.split('main')[0];\n\n    this.state = {\n      currentPage: 0,\n      touchStart: undefined,\n      touchMove: undefined,\n      lastMove: 0,\n      moveTo: 'center',\n      interpreters: null,\n      fullScreen: false,\n      widgets: false,\n    }\n\n\n    // bind\n    this.keydown = this.keydown.bind(this);\n    this.resize = this.resize.bind(this);\n    this.updateWidgets = this.updateWidgets.bind(this);\n    this.updateTheme = this.updateTheme.bind(this);\n  }\n\n  render() {\n\n    /* my apps */\n    let apps = this.props.projects.map(app => {\n      return <AppIcon { ...app } key={ 'project' + app.id } type=\"app\" prefix=\"icon-app-\"/>;\n    });\n\n    /* system apps */\n    let systemApps = [\n      <AppIcon color=\"#95a5a6\"\n               icon=\"faCog\"\n               title=\"Настройки\"\n               key=\"settings-icon\"\n               type=\"settings\"\n               id=\"settings-system-app\"/>,\n      <AppIcon color=\"#3498db\"\n               icon=\"faShoppingBag\"\n               title=\"Магазин\"\n               key=\"store-icon\"\n               type=\"store\"\n               id=\"store-system-app\"/>,\n      <AppIcon color=\"#2ecc71\"\n               icon=\"faBook\"\n               title=\"Докум-ция\"\n               key=\"doc-icon\"\n               type=\"doc\"\n               id=\"doc-system-app\"/>,\n    ]\n\n    const groups = {};\n    const sortedGroups = [];\n    const groupsMarkup = [];\n\n    const settings = [ ...this.props.user.settings ];\n\n    /* sort apps about groups */\n    settings.map(setting => {\n      const groupName = setting.body.category;\n      if (typeof groupName !== 'string' || groupName === '') { return; }\n\n      /* create group property */\n      if (!sortedGroups.includes(groupName)) {\n        groups[groupName] = {\n          apps: [],\n          body: '',\n        };\n        sortedGroups.push(groupName);\n      }\n\n      /* find app */\n      const sortedApp = apps.find(app => app.props.id === setting.id);\n\n      /* put app to the group */\n      groups[groupName].apps.push(sortedApp);\n\n      /* delete sorted app from arr */\n      apps = apps.filter(item => item !== sortedApp);\n    });\n\n    /* create markup for groups */\n    for (let name in groups) {\n      groupsMarkup.push( this.createGroup(groups[name].apps, name) );\n    }\n\n    /* create markup for apps without group */\n    if (apps.length) {\n      groupsMarkup.push( this.createGroup(apps,\n          'Приложения без группы',\n          'Вы можете назначить группы этим приложениям в настройках.') );\n    }\n\n    /* push system apps */\n    groupsMarkup.push( this.createGroup(systemApps,\n        'Системные приложения',\n        'Тут располагаются системные приложения. Они нужны для настройки системы и для будущих функций.') );\n\n    /* full screen */\n    let fullScreenIcon = <FontAwesomeIcon icon={ faExpand } />;\n    if (this.state.fullScreen) { fullScreenIcon = <FontAwesomeIcon icon={ faCompress } />; }\n\n    /* closing animation */\n    if (this.props.appState === 'closing') {\n      this.closeTimeout = setTimeout(() => {\n        this.props.changeAppState({ state: 'closed' });\n      }, 210);\n    }\n\n    /* devMode */\n    localStorage.getItem('devMode') === 'true'\n      ? this.devMode = true\n      : this.devMode = false;\n\n    /* close all apps */\n    if (this.props.appState === 'closed') {\n      const nodeList = document.querySelectorAll('.multiTasking-interpreter');\n      const interpreters = Array.from(nodeList);\n\n      interpreters.forEach(node => {\n        node.style.display = 'none';\n      });\n    }\n\n    /* set app interpreter */\n    let interpreter = null;\n    if (['opened', 'closing'].includes(this.props.appState) && this.props.appType === 'app') {\n\n      /* find interpreter */\n      const app = document.getElementById('app'+this.props.appId);\n\n      /* show interpreter */\n      app.style.display = 'block';\n\n    /* set system app */\n    } else if (['opened', 'closing'].includes(this.props.appState)) {\n\n      /* switch system app */\n      switch (this.props.appType) {\n        case 'settings':\n          interpreter = <SettingsApp/>;\n          break;\n        case 'store':\n          interpreter = <StoreApp/>;\n          break;\n        case 'doc':\n          interpreter = <DocApp/>;\n          break;\n        default:\n          break;\n      }\n\n      /* set black status bar */\n      if (this.props.appState === 'opened' && this.props.appType !== 'app') {\n        this.setStatusBar('black');\n      }\n    }\n\n\n\n    /*   ---==== App config ====---   */\n\n    /* update system theme */\n    if (this.props.appState === 'closing') {\n      process.nextTick(() => this.updateTheme());\n\n    /* set app theme */\n    } else if (this.props.appState === 'opened' && this.props.appType === 'app') {\n\n      const app = document.getElementById('app'+this.props.appId);\n\n      /* app config */\n      const markup = app.contentDocument || app.contentWindow.document;\n      const config = markup.querySelector('*[data-role=config]');\n\n      if (config) {\n\n        /* setup theme */\n        const theme = config.getAttribute('data-theme');\n        if (theme && theme !== 'auto') {\n          this.setStatusBar(theme);\n        } else if (!theme) {\n          this.setStatusBar('black');\n        }\n      } else {\n        this.setStatusBar('black');\n      }\n    }\n\n\n    return (\n      <div className=\"system-wrap\" id=\"system-wrap\">\n        <div className=\"system-pc\" id=\"system-pc\">\n          <div className=\"system-pc_box\">\n            <div className=\"box-title\">\n              <img src=\"./images/appex.svg\" alt=\"a\" className=\"box-title__img\" />\n              <span className=\"box-title__text\"> ppex </span>\n              <div className=\"box-title__under-text\"> system </div>\n            </div>\n            <div className=\"box-main\">\n              <span> Свернуть </span>\n              <span> ▼ </span>\n            </div>\n            <Link className=\"box-main\" to=\"/projects\">\n              <span> Создать </span>\n              <span> alt </span>\n              <span> <FontAwesomeIcon icon={ faPlus } /> </span>\n            </Link>\n          </div>\n        </div>\n        <div className=\"main-system-page\" id=\"main-system-page\">\n          <div className=\"groups-wrap\" id=\"groups-wrap\">\n\n            { groupsMarkup }\n\n            <div className=\"fullview\" id=\"fullScreen\">\n              { fullScreenIcon }\n            </div>\n          </div>\n          <div className=\"main-app-page\" id=\"main-app-page\" data-state={ this.props.appState }>\n            { interpreter } {/* system apps */}\n            { this.state.interpreters } {/* apps */}\n            <SuperButton multiTasking={ this.multiTasking }/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n\n    /* find OS */\n    const userDeviceArray = [\n      {device: false, platform: /Android/},\n      {device: false, platform: /iPhone/},\n      {device: false, platform: /iPad/},\n      {device: false, platform: /Symbian/},\n      {device: false, platform: /Windows Phone/},\n      {device: false, platform: /Tablet OS/},\n      {device: true, platform: /Linux/},\n      {device: true, platform: /Windows NT/},\n      {device: true, platform: /Macintosh/}\n    ];\n\n    const platform = navigator.userAgent;\n    let device;\n\n    for (let i in userDeviceArray) {\n      if (userDeviceArray[i].platform.test(platform)) {\n        device = userDeviceArray[i].device;\n        break;\n      }\n    }\n\n    /* scroll the menu */\n    const systemWindow = document.getElementById('main-system-page');\n    const systemBackground = document.getElementById('system-pc');\n\n    if (device) {\n      systemWindow.style.width = 500 + 'px';\n      systemWindow.style.marginRight = 100 + 'px';\n      systemWindow.classList.add('main-system-page__pc-mode');\n\n      document.getElementById('fullScreen').style.display = 'none';\n\n      const width = document.getElementById('system-wrap').offsetWidth - systemWindow.offsetWidth - 100;\n      systemBackground.classList.add('system-pc__active');\n      systemBackground.style.width = width + 'px';\n    }\n\n    window.addEventListener('resize', this.resize, device);\n    window.addEventListener('keydown', this.keydown);\n\n    document.querySelector('#fullScreen').onclick = () => {\n      try {\n        if (document.fullscreenElement) {\n          document.exitFullscreen();\n          this.setState({ fullScreen: false });\n        } else {\n          document.documentElement.requestFullscreen();\n          this.setState({ fullScreen: true });\n        }\n      } catch {\n        console.log('full screen error');\n      }\n    }\n\n\n\n    /*   ---==== Theme ====---   */\n\n    this.updateTheme();\n\n\n\n    /*   ---==== Alerts ====---   */\n\n    const alerts = new AlertsView(this.props.user.alerts, 'MainPage', this.props.fetchUser);\n    alerts.run();\n\n\n\n    /*   ---==== Widgets ====---   */\n\n    let widgets = this.props.user.userSettings.widgets;\n\n    if (widgets === undefined) { widgets = []; }\n\n    if (widgets.length > 0) {\n\n      const states = [];\n\n      widgets.forEach(widget => {\n\n        /* connect to the socket room */\n        socket.emit('connectToRoom', {\n          roomId: widget.roomId,\n          roomPass: widget.roomPass,\n          currentState: false\n        });\n\n        /* fetch widgets statuses */\n        const state = request('/core_api/get_property_value', {\n          roomId: widget.roomId,\n          roomPass: widget.roomPass,\n          property: widget.property,\n        }).then(res => res.json())\n          .then(data => {\n            return { res: data, prop: widget.property }\n          });\n\n        states.push(state)\n      });\n\n      /* update widgets state */\n      socket.on('updateState', this.updateWidgets);\n\n      /* set widgets state */\n      Promise.all(states).then(data => {\n        const statuses = {};\n        data.forEach(widgetStatus => {\n          statuses[widgetStatus.res.roomId] = {};\n          statuses[widgetStatus.res.roomId][widgetStatus.prop] = widgetStatus.res.value;\n        });\n        this.setState({ widgets: statuses });\n      }).catch(() => {}/*alert(\"Ошибка добавления виджетов!\")*/);\n    }\n\n\n\n    /*   ---==== Caching apps and user ====---   */\n\n    /* user */\n    localStorage.setItem('user', JSON.stringify(this.props.user));\n\n    /* apps */\n    this.props.projects.forEach(app => {\n      request('/api/get_app', { appId: app.id })\n        .then(res => res.json()).then(body => {\n          if (body.status === 'ok') {\n            localStorage.setItem('cache-' + app.id, JSON.stringify(body.app));\n          } else {\n            console.log('err in caching app ' + app.id);\n          }\n      }).catch(err => console.log('err in caching app ' + app.id));\n    });\n\n\n\n    /*   ---==== MultiTasking ====---   */\n\n    const interpreters = [];\n\n    /* add apps */\n    this.props.projects.forEach((app, index) => {\n      const interpreter = <iframe\n        src={`${ this.host }view/${ app.id }?devMode=${ this.devMode }`}\n        frameBorder=\"0\"\n        id={ 'app' + app.id }\n        className=\"multiTasking-interpreter\"\n        style={{ width: '100%', height: '100%', backgroundColor: 'white', display: 'none'}}\n        key={ 'app-' + index }/>;\n      interpreters.push(interpreter);\n    });\n\n    /* render interpreters */\n    this.setState({ interpreters });\n\n  }\n\n  keydown(event) {\n    switch (event.key) {\n      case 'ArrowDown':\n        this.props.changeAppState({ state: 'closing' });\n        break;\n      case '=':\n        if (!event.altKey) { return; }\n        window.location.href = '/projects';\n        break;\n    }\n  }\n\n  resize(event) {\n    const wrap = document.getElementById('groups-wrap');\n    const background = document.getElementById('system-background');\n\n    if (!wrap || !background) { return; }\n    if (wrap.offsetWidth > background.offsetWidth && !this.device) {\n      background.style.visibility = 'hidden';\n    } else {\n      background.style.visibility = 'visible';\n    }\n  }\n\n  createGroup(apps, name, body = 'Пользовательская группа.') {\n\n    if (this.props.user.userSettings.widgets === undefined) {\n      this.props.user.userSettings.widgets = [];\n    }\n\n    if (this.props.user.userSettings.groups === undefined) {\n      this.props.user.userSettings.groups = [];\n    }\n\n    /* widgets */\n    let widgets = this.props.user.userSettings.widgets\n      .filter(widget => widget.category === name);\n\n    /* render widgets */\n    if (widgets.length && this.state.widgets) {\n      try {\n        widgets = widgets.map((widget, i) => {\n          return <Widget\n            title={ widget.title }\n            value={ this.state.widgets[ widget.roomId ][ widget.property ] }\n            icon={ widget.icon }\n            key={ i }/>\n        });\n      } catch {\n        widgets = null;\n      }\n    } else { widgets = null; }\n\n    /* groups */\n    const groups = this.props.user.userSettings.groups;\n    const group = groups.find(group => group.name === name);\n    if (group) { body = group.description; }\n\n    return (\n        <div className=\"app-group\" key={ name }>\n          <div className=\"app-group-widget\">\n            <div className=\"app-group-widget__title\"> { name } </div>\n            <div className=\"app-group-widget__main\">\n              { body }\n            </div>\n          </div>\n          <div className=\"widgets\">\n            { widgets }\n          </div>\n          <div className=\"app-group__icons\"> { apps } </div>\n        </div>\n    );\n  }\n\n  updateTheme() {\n    const theme = this.props.user.userSettings.theme;\n    switch (theme) {\n      case 1:\n        this.setTheme('rgb(243,236,230)', '#F5C6AA');\n        break;\n      case 2:\n        this.setTheme('rgb(237,231,248)', '#A6B1E1');\n        break;\n      case 3:\n        this.setTheme('rgb(224,260,241)', '#62D2A2');\n        break;\n      case 4:\n        this.setTheme('rgb(252,233,227)', '#FFBBCC');\n        break;\n      default:\n        this.setTheme('rgb(243,236,230)', '#F5C6AA');\n        break;\n    }\n  }\n\n  setTheme(color1, color2) {\n    document.querySelector('.main-system-page')\n        .style.backgroundColor = color1;\n\n    document.querySelector('.fullview')\n        .style.backgroundColor = color2;\n\n    document.getElementById('theme-color')\n      .setAttribute('content', color1);\n\n    document.getElementById('apple-theme-color')\n      .setAttribute('content', color1);\n  }\n\n  setStatusBar(color) {\n    setTimeout(() => {\n      document.getElementById('theme-color')\n        .setAttribute('content', color);\n\n      document.getElementById('apple-theme-color')\n        .setAttribute('content', color);\n    }, 200);\n  }\n\n  updateWidgets(data) {\n\n    /* update widgets state */\n    const newState = this.state.widgets;\n    newState[data.roomId] = { ...newState[data.roomId], ...data.params };\n    this.setState({ widgets: newState });\n  }\n\n  componentWillUnmount() {\n\n    /* remove event listeners */\n    const wrap = document.getElementById('groups-wrap');\n\n    window.removeEventListener('keydown', this.keydown);\n    window.removeEventListener('resize', this.resize);\n\n    this.props.user.userSettings.widgets.forEach(widget => {\n      socket.emit('disconnectFromRoom', widget.roomId);\n    });\n\n    document.getElementById('theme-color')\n      .setAttribute('content', 'black');\n\n    document.getElementById('apple-theme-color')\n      .setAttribute('content', 'black');\n  }\n}\n\n\n\n/*   ---==== Connect to redux ====---   */\n\nfunction mapStateToProps(store) {\n  return {\n\n    /* projects */\n    projects: store.projects.data,\n    projectsIsFetching: store.projects.isFetching,\n    projectsError: store.projects.error,\n    projectsFulfilled: store.projects.fulfilled,\n\n    /* user */\n    user: store.userData.user,\n\n    /* app state */\n    appState: store.appState.state,\n    appId: store.appState.id,\n    appType: store.appState.type,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeAppState: (changedState) => {\n      dispatch(changeAppState(changedState))\n    },\n    fetchUser: () => {\n      dispatch(fetchUser())\n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainPage);","import React from 'react';\n\nimport { changeAppState } from \"../../../actions/appStateActions\";\nimport { connect } from \"react-redux\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes, faArrowsAltH } from \"@fortawesome/free-solid-svg-icons\";\nimport LastApps from \"../../../tools/LastApps/LastApps\";\nimport { list } from \"../../../tools/LastApps/LastApps\";\n\n/* Component */\nclass SuperButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      startTime: Date.now(),\n      touch: false,\n\n      wrapStart: 0,\n      wrapGo: false,\n      wrapTo: false,\n    }\n\n\n    // bind\n    this.touchStart = this.touchStart.bind(this);\n    this.touchEnd = this.touchEnd.bind(this);\n    this.touchMove = this.touchMove.bind(this);\n    this.close = this.close.bind(this);\n\n    this.wrapTouchStart = this.wrapTouchStart.bind(this);\n    this.wrapTouchEnd = this.wrapTouchEnd.bind(this);\n    this.wrapTouchMove = this.wrapTouchMove.bind(this);\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"super-button\"\n             id=\"super-button\"\n             onClick={() => this.props.changeAppState({ state: 'closing' })}>\n          <FontAwesomeIcon icon={ faTimes } className=\"super-button__knob\" id=\"super-button__knob\"/>\n        </div>\n        <div id=\"swipe-wrap\"/>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const button = document.getElementById('super-button');\n    button.addEventListener('touchstart', this.touchStart);\n    button.addEventListener('touchmove', this.touchMove);\n    button.addEventListener('touchend', this.touchEnd);\n    button.addEventListener('click', this.close);\n\n    const wrap = document.getElementById('swipe-wrap');\n    wrap.addEventListener('touchstart', this.wrapTouchStart);\n    wrap.addEventListener('touchmove', this.wrapTouchMove);\n    wrap.addEventListener('touchend', this.wrapTouchEnd);\n    wrap.addEventListener('touchcancel', this.wrapTouchEnd);\n  }\n\n  touchStart(event) {\n    const button = document.getElementById('super-button');\n    this.setState({ startTime: Date.now(), touch: true });\n    document.body.style.userSelect = 'none';\n\n    /* vibrate */\n    setTimeout(() => {\n      if (!this.state.touch) { return; }\n      if ('vibrate' in navigator) {\n        navigator.vibrate([13, 15, 13, 15, 13]);\n      }\n    }, 300);\n  }\n\n  touchEnd(event) {\n    const button = document.getElementById('super-button');\n    button.style.transform = 'scale(1)';\n\n    document.body.style.userSelect = 'auto';\n    this.setState({ touch: false });\n  }\n\n  touchMove(event) {\n    if (Date.now() - this.state.startTime < 300) { return; }\n\n    const button = document.getElementById('super-button');\n    button.style.transform = 'scale(0.9)';\n    button.style.left = event.touches[event.touches.length - 1].pageX - 20 + 'px';\n    button.style.top = event.touches[event.touches.length - 1].pageY - 20 +'px';\n  }\n\n  close() {\n    if (Date.now() - this.state.startTime >= 300) { return; }\n    this.props.changeAppState({ state: 'closing' });\n  }\n\n  wrapTouchStart(event) {\n    this.setState({ wrapStart: event.touches[event.touches.length - 1].pageX });\n  }\n\n  wrapTouchMove(event) {\n    event.preventDefault();\n    let pageX = event.touches[event.touches.length - 1].pageX;\n    if (this.state.wrapStart - pageX > 50) {\n      if (!this.state.wrapGo) {\n        navigator.vibrate([20, 15, 20]);\n        this.setState({ wrapGo: true, wrapTo: 'right' });\n      }\n    } else if (this.state.wrapStart - pageX < -50) {\n      if (!this.state.wrapGo) {\n        navigator.vibrate([20, 15, 20]);\n        this.setState({ wrapGo: true, wrapTo: 'left' });\n      }\n    } else if (this.state.wrapGo) {\n      this.setState({ wrapGo: false, wrapTo: false });\n    }\n  }\n\n  wrapTouchEnd() {\n    if (this.state.wrapTo) {\n      let id;\n      this.state.wrapTo === 'left'\n        ? id = list.left()\n        : id = list.right();\n\n      if (id) {\n\n        /* close all apps */\n        const nodeList = document.querySelectorAll('.multiTasking-interpreter');\n        const interpreters = Array.from(nodeList);\n\n        interpreters.forEach(node => {\n          node.style.display = 'none';\n        });\n\n        /* change new app */\n        this.props.changeAppState({ id });\n      }\n    }\n\n    this.setState({ wrapGo: false, wrapTo: false });\n  }\n\n  componentWillUnmount() {\n    const button = document.getElementById('super-button');\n    button.removeEventListener('touchstart', this.touchStart);\n    button.removeEventListener('touchmove', this.touchMove);\n    button.removeEventListener('touchend', this.touchEnd);\n    button.removeEventListener('click', this.close);\n\n    const wrap = document.getElementById('swipe-wrap');\n    wrap.removeEventListener('touchstart', this.wrapTouchStart);\n    wrap.removeEventListener('touchmove', this.wrapTouchMove);\n    wrap.removeEventListener('touchend', this.wrapTouchEnd);\n    wrap.removeEventListener('touchcancel', this.wrapTouchEnd);\n  }\n}\n\n\n\n/*   ---==== Connect to redux ====---   */\n\nfunction mapStateToProps(store) {\n  return {\n\n    /* app state */\n    appState: store.appState.state,\n    appId: store.appState.id,\n    appType: store.appState.type,\n\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeAppState: (changedState) => {\n      dispatch(changeAppState(changedState))\n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SuperButton);","\n/*   ---==== Automatic user api request ====---   */\n\nconst request = (url, params) => {\n  const body = JSON.stringify({ ...params });\n  return fetch(url, {\n    method: \"POST\",\n    headers: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n    },\n    body\n  });\n}\n\nexport { request };","import React from 'react';\n\nimport Doc from '../../../docs/docs-page/DocsPage';\n\n/* Component */\nexport default class DocApp extends React.Component {\n\n  render() {\n    return <div style={{\n      backgroundColor: 'black',\n      height: '100vh',\n      overflowY: 'scroll',\n    }}>\n      <Doc mode=\"app\"/>\n    </div>;\n  }\n}\n","import React from 'react';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\n\n\n/* Component */\nexport default class Widget extends React.Component {\n\n  render() {\n\n    let value = this.props.value;\n    switch (this.props.value) {\n      case true:\n        value = 'ON';\n        break;\n      case false:\n        value = 'OFF';\n        break;\n    }\n\n    let title = null;\n    if (this.props.title !== '') {\n      title = <section> { this.props.title } </section>;\n    }\n\n    return (\n      <div className=\"widget-wrap\">\n        <section>\n          <FontAwesomeIcon icon={ Icons[this.props.icon || 'faThermometerHalf'] } />\n        </section>\n        <section> { value } </section>\n        { title }\n      </div>\n    );\n  }\n}","import React from 'react';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faUser} from \"@fortawesome/free-solid-svg-icons\";\nimport { fetchUser } from \"../../../../../actions/userActions\";\n\nimport { request } from '../../../../../tools/apiRequest/apiRequest';\nimport {connect} from \"react-redux\";\n\n/* Component */\nexport default class ChangeUserName extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n\n    // bind\n    this.send = this.send.bind(this);\n  }\n\n  render() {\n\n    let errs = [null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"reg-window\">\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faUser } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"никнейм\" id=\"reg-username\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_blue\" onClick={ this.send }>\n            Сменить имя пользователя!\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  async send() {\n\n    /* Clear warnings */\n    this.setState({\n      errs: ['']\n    });\n\n    const username = document.getElementById('reg-username').value;\n    if (username.length < 3) {\n      this.setState({\n        errs: ['Слишком короткое имя пользователя!']\n      });\n      return;\n    } else {\n\n      /*return this.changeUsername(username); // TODO: delete this string*/\n\n      /* checking username available */\n      await request('/sign_up/is_param_available', { username })\n        .then(res => res.text()).then(text => {\n        if (text === 'used') {\n          this.setState({\n            errs: ['Такой пользователь уже есть в системе!']\n          });\n          return;\n        } else if (text === 'available') {\n          this.changeUsername(username);\n        } else {\n          console.log('Ahtung in checking username!');\n        }\n      }).catch(err => console.log('Ahtung in checking username!', new Error(err)));\n    }\n  }\n\n  changeUsername(username) {\n    return request(`/api/change_user_private`, { username })\n      .then(res => res.json()).then(body => {\n        if (body.status === 'ok') {\n          this.props.fetchUser();\n        } else {\n          console.log(body);\n          this.setState({\n            errs: ['Ошибка смены имени пользователя!']\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          errs: ['Ошибка запроса!']\n        });\n      });\n  }\n}","import React from 'react';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faEnvelope, faKey, faPaperPlane, faUser} from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class ChangeUserName extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n\n    // bind\n    this.send = this.send.bind(this);\n  }\n\n  render() {\n\n    let errs = [null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"reg-window\">\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faEnvelope } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"почта\" id=\"reg-email\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_blue\" onClick={ this.send }>\n            Сменить почту!\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  async send() {\n\n    /* Clear warnings */\n    this.setState({\n      errs: ['']\n    });\n\n    const email = document.getElementById('reg-email').value;\n    if (!/\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,6}/.test(email)) {\n      this.setState({\n        errs: ['Неверно введен email адрес!']\n      });\n      return;\n    } else {\n\n      /* checking username available */\n      await request('/sign_up/is_param_available', { email })\n        .then(res => res.text()).then(text => {\n          if (text === 'used') {\n            this.setState({\n              errs: ['Такая почта уже есть в системе!']\n            });\n            return;\n          } else if (text === 'available') {\n            this.changeMail(email);\n          } else {\n            console.log('Ahtung in checking email!');\n          }\n        }).catch(err => console.log('Ahtung in checking email!', new Error(err)));\n    }\n  }\n\n  changeMail(email) {\n    return request(`/api/change_user_private`, { email })\n      .then(res => res.json()).then(body => {\n        if (body.status === 'ok') {\n          this.props.fetchUser();\n        } else {\n          console.log(body);\n          this.setState({\n            errs: ['Ошибка смены почты!']\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          errs: ['Ошибка запроса!']\n        });\n      });\n  }\n}","import React from 'react';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faLock, faUser} from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class ChangeUserName extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: ['', '', ''],\n    }\n\n    // bind\n    this.send = this.send.bind(this);\n  }\n\n  render() {\n\n    let errs = [null, null, null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"reg-window\">\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLock } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"старый пароль\" id=\"old-password\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLock } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"новый пароль\" id=\"new-password\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[1] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLock } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"повторите пароль\" id=\"repeat-password\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[2] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_blue\" onClick={ this.send }>\n            Сменить пароль!\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  send() {\n\n    /* Clear warnings */\n    this.setState({\n      errs: ['', '', '']\n    });\n\n    const oldPassword = document.getElementById('old-password').value;\n    if (!/(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{6,}/.test(oldPassword)) {\n      this.setState({\n        errs: ['Неверный старый пароль!', '', '']\n      });\n      return;\n    }\n\n    const newPassword = document.getElementById('new-password').value;\n    if (!/(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{6,}/.test(newPassword)) {\n      this.setState({\n        errs: ['', 'Слишком легкий пароль!', '']\n      });\n      return;\n    }\n\n    const repeatPassword = document.getElementById('repeat-password').value;\n    if (newPassword !== repeatPassword) {\n      this.setState({\n        errs: ['', '', 'Пароли не совпадают!']\n      });\n      return;\n    }\n\n    this.changePassword({ newPassword, oldPassword });\n  }\n\n  changePassword(passwords) {\n    request(`/api/change_password`, { ...passwords })\n      .then(res => res.json()).then(body => {\n        if (body.status === 'ok') {\n          this.props.fetchUser();\n        } else if (body.message === 'not coincide') {\n          console.log(body);\n          this.setState({\n            errs: ['Неверный старый пароль!', '', '']\n          });\n        } else {\n          console.log(body);\n          this.setState({\n            errs: ['Ошибка смены пароля!', '', '']\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          errs: ['Ошибка запроса!', '', '']\n        });\n      });\n  }\n}","import React from 'react';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faTrashAlt, faUser, faAt, faIdBadge, faUserTag} from \"@fortawesome/free-solid-svg-icons\";\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class ChangeUserName extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n\n    // bind\n    this.deleteAccount = this.deleteAccount.bind(this);\n    this.logOut = this.logOut.bind(this);\n    this.devMode = this.devMode.bind(this);\n  }\n\n  render() {\n\n    let errs = [null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"apps-settings-wrap\">\n        <div className=\"reg-window\">\n          <div className=\"app-block\">\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faUser } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\" className=\"reg-window__input\" value={ this.props.user.username } readOnly={true}/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faAt } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\" className=\"reg-window__input\" value={ this.props.user.email} readOnly={true}/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faIdBadge } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\" className=\"reg-window__input\" value={ this.props.user.id } readOnly={true}/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faUserTag } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\" className=\"reg-window__input\" value={ this.props.user.type } readOnly={true}/>\n              </div>\n            </div>\n          </div>\n          <div className=\"app-block\">\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__button reg-window__button_blue\" onClick={ this.logOut }>\n                Выйти из аккаунта\n              </div>\n            </div>\n          </div>\n          <div className=\"app-block\">\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faTrashAlt } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\" placeholder=\"введите слово 'удалить'\" id=\"test-word\" className=\"reg-window__input\"/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__button reg-window__button_red\" onClick={ this.deleteAccount }>\n                Удалить аккаунт\n              </div>\n            </div>\n          </div>\n          <div className=\"app-block\">\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__button reg-window__button_green\"\n                   id=\"devMode-btn\"\n                   onClick={ this.devMode }>\n                Включить режим разработчика\n              </div>\n            </div>\n          </div>\n          { errs[0] }\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount = () => this.updateDevModeBtn();\n\n  deleteAccount = () =>  {\n    const word = document.getElementById('test-word').value;\n    if (word === 'удалить') {\n      this.send('/api/delete_user');\n    } else {\n      this.setState({\n        errs: [\"Введите слово 'удалить'\"]\n      });\n    }\n  }\n\n  logOut = () => this.send('/api/log_out');\n\n  devMode = () => {\n    let devMode = localStorage.getItem('devMode');\n    devMode === 'true'\n      ? localStorage.setItem('devMode', 'false')\n      : localStorage.setItem('devMode', 'true');\n    this.updateDevModeBtn();\n  }\n\n  updateDevModeBtn = () => {\n    const btn = document.getElementById('devMode-btn');\n    let devMode = localStorage.getItem('devMode');\n    devMode === 'true'\n      ? btn.innerText = 'Выключить режим разработчика'\n      : btn.innerText = 'Включить режим разработчика';\n  }\n\n  send(url) {\n\n    /* clear errs */\n    this.setState({\n      errs: ['']\n    });\n\n    /* do request */\n    request(url, {})\n      .then(res => res.json()).then(body => {\n        if (body.status === 'ok') {\n          this.props.fetchUser();\n        } else {\n          console.log(body);\n          this.setState({\n            errs: ['Ошибка!']\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          errs: ['Ошибка запроса!']\n        });\n      });\n  }\n}","import React from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faKey, faIdBadge, faLayerGroup } from \"@fortawesome/free-solid-svg-icons\";\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class AppBlock extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n\n    // bind\n    this.send = this.send.bind(this);\n  }\n\n  render() {\n\n    /* find settings */\n    const id = this.props.id;\n    const settings = this.props.user.settings.find(elem => elem.id === id);\n\n    if (settings !== undefined) {\n      this.roomId = settings.body.roomId;\n      this.roomPass = settings.body.roomPass;\n      this.category = settings.body.category;\n    }\n\n    let errs = [null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"app-block\">\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <div className=\"app-block__icon\" style={{ backgroundColor: this.props.color }}>\n              <FontAwesomeIcon icon={ Icons[this.props.icon] }/>\n            </div>\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" readOnly={ true } value={ this.props.title } className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faIdBadge } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"id комнаты\"\n                   id={`room-id-${ this.props.id }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faKey } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"пароль комнаты\"\n                   id={`room-pass-${ this.props.id }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLayerGroup } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"группа\"\n                   id={`group-${ this.props.id }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_green\" id=\"reg-btn\" onClick={ this.send }>\n            Сохранить\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const id = document.getElementById(`room-id-${ this.props.id }`);\n    const pass = document.getElementById(`room-pass-${ this.props.id }`);\n    const category = document.getElementById(`group-${ this.props.id }`);\n\n    id.value = this.roomId || '';\n    pass.value = this.roomPass || '';\n    category.value = this.category || '';\n  }\n\n  send() {\n\n    /* clear errs */\n    this.setState({\n      errs: ['']\n    });\n\n    const roomId = document.getElementById(`room-id-${ this.props.id }`).value;\n    const roomPass = document.getElementById(`room-pass-${ this.props.id }`).value;\n    const category = document.getElementById(`group-${ this.props.id }`).value;\n\n    if (!roomId || !roomPass) {\n      return this.setState({\n        errs: ['Введите айди и пароль комнаты!']\n      });\n    }\n\n    const id = this.props.id;\n    const settings = this.props.user.settings.find(elem => elem.id === id);\n    let newUserSettings = this.props.user.settings;\n\n    /* change user settings */\n    if (settings !== undefined) {\n      newUserSettings = newUserSettings.map(setting => {\n        if (setting.id === id) {\n          return {\n            id, body: {\n              ...setting.body,\n              roomId, roomPass, category\n            }\n          }\n        } else { return setting; }\n      });\n    } else {\n      newUserSettings.push({\n        id, body: { roomId, roomPass, category }\n      });\n    }\n\n    /* do request */\n    this.userRequest({ settings: newUserSettings });\n  }\n\n  userRequest(params) {\n    request(`/api/change_user`, params)\n      .then(res => res.json()).then(body => {\n        if (body.status === 'ok') {\n          this.props.fetchUser();\n        } else {\n          console.log(body);\n          this.setState({\n            errs: ['Ошибка!']\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          errs: ['Ошибка запроса!']\n        });\n      });\n  }\n}","import React from 'react';\nimport AppBlock from './AppBlock';\n\n/* Component */\nexport default class ChangeUserName extends React.Component {\n  constructor(props) {\n    super(props);\n\n  }\n\n  render() {\n\n    /* apps */\n    let apps = this.props.projects.map(app => {\n      return <AppBlock { ...app }\n                       user={{ ...this.props.user }}\n                       key={ app.id }\n                       fetchUser={ this.props.fetchUser }/>;\n    });\n\n    return (\n      <div className=\"apps-settings-wrap\">\n        <div className=\"reg-window\">\n          { apps }\n        </div>\n      </div>\n    );\n  }\n}","import React from 'react';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faEnvelope, faIdBadge, faKey, faLayerGroup, faPaperPlane, faUser} from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\n\n/* Component */\nexport default class ChangeUserName extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n  }\n\n  render() {\n    return (\n        <div className=\"reg-window\">\n          <div className=\"app-block user-settings-block\">\n            <header> Тема: </header>\n            <div className=\"theme\" id=\"theme-choice\">\n              <section onClick={() => this.setTheme(1)}/>\n              <section onClick={() => this.setTheme(2)}/>\n              <section onClick={() => this.setTheme(3)}/>\n              <section onClick={() => this.setTheme(4)}/>\n            </div>\n          </div>\n        </div>\n    );\n  }\n\n  componentDidMount() {\n    this.viewTheme();\n  }\n\n  viewTheme() {\n    const theme = this.props.user.userSettings.theme;\n    if (!theme) { return; }\n    document.getElementById('theme-choice')\n        .querySelector(`section:nth-child(${ theme })`)\n        .classList.add('active');\n  }\n\n  setTheme(number) {\n\n    const userSettings = this.props.user.userSettings;\n    userSettings.theme = number;\n\n    return request(`/api/change_user`, { userSettings })\n     .then(res => res.json()).then(body => {\n       if (body.status === 'ok') {\n         this.props.fetchUser();\n       } else {\n         alert('Ошибка запроса :(');\n       }\n     }).catch(err => {\n       alert('Ошибка запроса :(');\n     });\n  }\n}","import React from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faKey, faIdBadge, faLayerGroup, faAlignLeft, faCode, faThermometerHalf } from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class WidgetBlock extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n\n    // bind\n    this.send = this.send.bind(this);\n    this.delete = this.delete.bind(this);\n  }\n\n  render() {\n\n    /* errs */\n    let errs = [null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"app-block\">\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faIdBadge } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"id комнаты\"\n                   id={`room-id-${ this.props.number }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faKey } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"пароль комнаты\"\n                   id={`room-pass-${ this.props.number }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLayerGroup } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"группа\"\n                   id={`group-${ this.props.number }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faCode } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"свойство\"\n                   id={`prop-${ this.props.number }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faThermometerHalf } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"значок fontawesome\"\n                   id={`icon-${ this.props.number }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faAlignLeft } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"наименование\"\n                   id={`title-${ this.props.number }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_green\" onClick={ this.send }>\n            Сохранить\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_red\" onClick={ this.delete }>\n            Удалить\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const id = document.getElementById(`room-id-${ this.props.number }`);\n    const pass = document.getElementById(`room-pass-${ this.props.number }`);\n    const category = document.getElementById(`group-${ this.props.number }`);\n    const property = document.getElementById(`prop-${ this.props.number }`);\n    const icon = document.getElementById(`icon-${ this.props.number }`);\n    const title = document.getElementById(`title-${ this.props.number }`);\n\n    id.value = this.props.roomId || '';\n    pass.value = this.props.roomPass || '';\n    category.value = this.props.category || '';\n    property.value = this.props.property || '';\n    icon.value = this.props.icon || '';\n    title.value = this.props.title || '';\n  }\n\n  send() {\n\n    /* clear errs */\n    this.setState({\n      errs: ['']\n    });\n\n    const roomId = document.getElementById(`room-id-${ this.props.number }`).value;\n    const roomPass = document.getElementById(`room-pass-${ this.props.number }`).value;\n    const category = document.getElementById(`group-${ this.props.number }`).value;\n    const property = document.getElementById(`prop-${ this.props.number }`).value;\n    const icon = document.getElementById(`icon-${ this.props.number }`).value;\n    const title = document.getElementById(`title-${ this.props.number }`).value;\n\n    if (!roomId || !roomPass || !category || !icon || !property) {\n      return this.setState({\n        errs: ['Введите недостающие значения!']\n      });\n    }\n\n    let newUserSettings = JSON.stringify(this.props.user.userSettings);\n    newUserSettings = JSON.parse(newUserSettings);\n    newUserSettings.widgets[this.props.number] = {\n      roomId, roomPass, category, property, icon, title,\n    };\n\n    /* do request */\n    this.userRequest({ userSettings: newUserSettings });\n  }\n\n  delete() {\n\n    /* clear errs */\n    this.setState({\n      errs: ['']\n    });\n\n    let newUserSettings = JSON.stringify(this.props.user.userSettings);\n    newUserSettings = JSON.parse(newUserSettings);\n    newUserSettings.widgets.splice(this.props.number, 1);\n\n    /* do request */\n    this.userRequest({ userSettings: newUserSettings });\n  }\n\n  userRequest(params) {\n    request(`/api/change_user`, params)\n      .then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n        this.props.fetchUser();\n      } else {\n        console.log(body);\n        this.setState({\n          errs: ['Ошибка!']\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        errs: ['Ошибка запроса!']\n      });\n    });\n  }\n}","import React from 'react';\n\nimport WidgetBlock from './WidgetBlock';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {\n  faAlignLeft,\n  faCode,\n  faIdBadge,\n  faKey,\n  faLayerGroup,\n  faThermometerHalf\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class Widgets extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n\n    // bind\n    this.create = this.create.bind(this);\n  }\n\n  render() {\n\n    if (this.props.user.userSettings.widgets === undefined) {\n      this.props.user.userSettings.widgets = [];\n    }\n\n    /* widgets */\n    let widgets = this.props.user.userSettings.widgets.map((widget, i) => {\n      return <WidgetBlock { ...widget }\n                       user={{ ...this.props.user }}\n                       key={ i }\n                       number={ i }\n                       fetchUser={ this.props.fetchUser }/>;\n    });\n\n    let errs = [null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"apps-settings-wrap\">\n        <div className=\"reg-window\">\n          { widgets }\n\n          <div className=\"app-block\">\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faIdBadge } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\"\n                       placeholder=\"id комнаты\"\n                       id={`room-id-widget-create`}\n                       className=\"reg-window__input\"/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faKey } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\"\n                       placeholder=\"пароль комнаты\"\n                       id={`room-pass-widget-create`}\n                       className=\"reg-window__input\"/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faLayerGroup } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\"\n                       placeholder=\"группа\"\n                       id={`group-widget-create`}\n                       className=\"reg-window__input\"/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faCode } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\"\n                       placeholder=\"свойство\"\n                       id={`prop-widget-create`}\n                       className=\"reg-window__input\"/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faThermometerHalf } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\"\n                       placeholder=\"значок fontawesome\"\n                       id={`icon-widget-create`}\n                       className=\"reg-window__input\"/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faAlignLeft } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\"\n                       placeholder=\"наименование\"\n                       id={`title-widget-create`}\n                       className=\"reg-window__input\"/>\n              </div>\n            </div>\n            { errs[0] }\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__button reg-window__button_blue\" onClick={ this.create }>\n                Создать\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  create() {\n\n    /* clear errs */\n    this.setState({\n      errs: ['']\n    });\n\n    const roomId = document.getElementById('room-id-widget-create').value;\n    const roomPass = document.getElementById('room-pass-widget-create').value;\n    const category = document.getElementById('group-widget-create').value;\n    const property = document.getElementById('prop-widget-create').value;\n    const icon = document.getElementById('icon-widget-create').value;\n    const title = document.getElementById('title-widget-create').value;\n\n    if (!roomId || !roomPass || !category || !icon || !property) {\n      return this.setState({\n        errs: ['Введите недостающие значения!']\n      });\n    }\n\n    let newUserSettings = JSON.stringify(this.props.user.userSettings);\n    newUserSettings = JSON.parse(newUserSettings);\n    newUserSettings.widgets.push({\n      roomId, roomPass, category, property, icon, title,\n    });\n\n    /* do request */\n    this.userRequest({ userSettings: newUserSettings });\n  }\n\n  userRequest(params) {\n    request(`/api/change_user`, params)\n      .then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n        this.props.fetchUser();\n      } else {\n        this.setState({\n          errs: ['Ошибка!']\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        errs: ['Ошибка запроса!']\n      });\n    });\n  }\n}","import React from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faLayerGroup, faAlignLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class GroupsBlock extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n\n    // bind\n    this.send = this.send.bind(this);\n    this.delete = this.delete.bind(this);\n  }\n\n  render() {\n\n    /* errs */\n    let errs = [null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"app-block\">\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLayerGroup } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"имя группы\"\n                   id={`group-name-${ this.props.number }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faAlignLeft } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\"\n                   placeholder=\"описание\"\n                   id={`group-description-${ this.props.number }`}\n                   className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_green\" onClick={ this.send }>\n            Сохранить\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_red\" onClick={ this.delete }>\n            Удалить\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const name = document.getElementById(`group-name-${ this.props.number }`);\n    const des = document.getElementById(`group-description-${ this.props.number }`);\n\n    name.value = this.props.name || '';\n    des.value = this.props.description || '';\n  }\n\n  send() {\n\n    /* clear errs */\n    this.setState({\n      errs: ['']\n    });\n\n    const name = document.getElementById(`group-name-${ this.props.number }`).value;\n    const description = document.getElementById(`group-description-${ this.props.number }`).value;\n\n    if (!name || !description) {\n      return this.setState({\n        errs: ['Введите недостающие значения!']\n      });\n    }\n\n    let newUserSettings = JSON.stringify(this.props.user.userSettings);\n    newUserSettings = JSON.parse(newUserSettings);\n    newUserSettings.groups[this.props.number] = {\n      name, description,\n    };\n\n    /* do request */\n    this.userRequest({ userSettings: newUserSettings });\n  }\n\n  delete() {\n\n    /* clear errs */\n    this.setState({\n      errs: ['']\n    });\n\n    let newUserSettings = JSON.stringify(this.props.user.userSettings);\n    newUserSettings = JSON.parse(newUserSettings);\n    newUserSettings.groups.splice(this.props.number, 1);\n\n    /* do request */\n    this.userRequest({ userSettings: newUserSettings });\n  }\n\n  userRequest(params) {\n    request(`/api/change_user`, params)\n      .then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n        this.props.fetchUser();\n      } else {\n        console.log(body);\n        this.setState({\n          errs: ['Ошибка!']\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        errs: ['Ошибка запроса!']\n      });\n    });\n  }\n}","import React from 'react';\n\nimport GroupsBlock from './GroupBlock';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport { faLayerGroup, faAlignLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport {request} from \"../../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class Groups extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errs: [''],\n    }\n\n    // bind\n    this.create = this.create.bind(this);\n  }\n\n  render() {\n\n    if (this.props.user.userSettings.groups === undefined) {\n      this.props.user.userSettings.groups = [];\n    }\n\n    /* widgets */\n    let widgets = this.props.user.userSettings.groups.map((widget, i) => {\n      return <GroupsBlock { ...widget }\n                          user={{ ...this.props.user }}\n                          key={ i }\n                          number={ i }\n                          fetchUser={ this.props.fetchUser }/>;\n    });\n\n    let errs = [null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"apps-settings-wrap\">\n        <div className=\"reg-window\">\n          { widgets }\n\n          <div className=\"app-block\">\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faLayerGroup } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\"\n                       placeholder=\"имя группы\"\n                       id={`group-name-create`}\n                       className=\"reg-window__input\"/>\n              </div>\n            </div>\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__item-block\">\n                <FontAwesomeIcon icon={ faAlignLeft } />\n              </div>\n              <div className=\"reg-window__item-block\">\n                <input type=\"text\"\n                       placeholder=\"описание\"\n                       id={`group-description-create`}\n                       className=\"reg-window__input\"/>\n              </div>\n            </div>\n            { errs[0] }\n            <div className=\"reg-window__input-item\">\n              <div className=\"reg-window__button reg-window__button_blue\" onClick={ this.create }>\n                Создать\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  create() {\n\n    /* clear errs */\n    this.setState({\n      errs: ['']\n    });\n\n    const name = document.getElementById(`group-name-create`).value;\n    const description = document.getElementById(`group-description-create`).value;\n\n    if (!name || !description) {\n      return this.setState({\n        errs: ['Введите недостающие значения!']\n      });\n    }\n\n    let newUserSettings = JSON.stringify(this.props.user.userSettings);\n    newUserSettings = JSON.parse(newUserSettings);\n    newUserSettings.groups.push({\n      name, description,\n    });\n\n    /* do request */\n    this.userRequest({ userSettings: newUserSettings });\n  }\n\n  userRequest(params) {\n    request(`/api/change_user`, params)\n      .then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n        this.props.fetchUser();\n      } else {\n        this.setState({\n          errs: ['Ошибка!']\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        errs: ['Ошибка запроса!']\n      });\n    });\n  }\n}","import React from 'react';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUser, faLock, faAt, faUserCog,\n  faMobile, faArrowLeft, faInfoCircle, faBoxes, faLayerGroup} from \"@fortawesome/free-solid-svg-icons\";\n\nimport { fetchUser } from \"../../../../actions/userActions\";\nimport { connect } from \"react-redux\";\n\n/* input menus */\nimport ChangeUserName from './InputMenus/ChangeUserName';\nimport ChangeMail from './InputMenus/ChangeMail';\nimport ChangePassword from './InputMenus/ChangePassword';\nimport AccountInfo from './InputMenus/AccountInfo';\nimport AppsSettings from './InputMenus/AppsSettings';\nimport UserSettings from './InputMenus/UserSettings';\nimport Widgets from './InputMenus/Widgets';\nimport Groups from  './InputMenus/Groups';\n\n/* Component */\nclass SettingsApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      menu: false,\n    }\n\n    // bind\n    this.close = this.close.bind(this);\n  }\n\n  render() {\n\n    /* menu */\n    const closeButton = <div className=\"super-button\">\n      <FontAwesomeIcon className=\"super-button__knob\" onClick={ this.close } icon={ faArrowLeft }/>\n    </div>;\n\n    const allMenus = [\n      <div className=\"input-menu\">\n        { closeButton }\n        <div className=\"main-settings-title\">Сменить имя пользователя</div>\n        <ChangeUserName fetchUser={ this.props.fetchUser }/>\n      </div>,\n      <div className=\"input-menu\">\n        { closeButton }\n        <div className=\"main-settings-title\">Сменить пароль</div>\n        <ChangePassword fetchUser={ this.props.fetchUser }/>\n      </div>,\n      <div className=\"input-menu\">\n        { closeButton }\n        <div className=\"main-settings-title\">Сменить почту</div>\n        <ChangeMail fetchUser={ this.props.fetchUser }/>\n      </div>,\n      <div className=\"input-menu\">\n        { closeButton }\n        <div className=\"main-settings-title\">Настройки приложений</div>\n        <AppsSettings { ...this.props } fetchUser={ this.props.fetchUser }/>\n      </div>,\n      <div className=\"input-menu\">\n        { closeButton }\n        <div className=\"main-settings-title\">Настройки пользователя</div>\n        <UserSettings { ...this.props } fetchUser={ this.props.fetchUser }/>\n      </div>,\n      <div className=\"input-menu\">\n        { closeButton }\n        <div className=\"main-settings-title\">Настройки виджетов</div>\n        <Widgets { ...this.props } fetchUser={ this.props.fetchUser }/>\n      </div>,\n      <div className=\"input-menu\">\n        { closeButton }\n        <div className=\"main-settings-title\">Настройки групп</div>\n        <Groups { ...this.props } fetchUser={ this.props.fetchUser }/>\n      </div>,\n      <div className=\"input-menu\">\n        { closeButton }\n        <div className=\"main-settings-title\">Об аккаунте</div>\n        <AccountInfo { ...this.props } fetchUser={ this.props.fetchUser }/>\n      </div>,\n    ];\n\n    let inputMenu = null;\n    if (typeof this.state.menu === 'number') { inputMenu = allMenus[this.state.menu]; }\n\n    return (\n      <div className=\"main-settings-wrap\">\n        <div className={`input-menu-wrap input-menu-wrap_${ this.state.menu }`}>{ inputMenu }</div>\n        <div className=\"main-settings-title\">Настройки</div>\n        <ul className=\"settings-list\">\n          <li className=\"apps-params\" onClick={ () => this.setState({ menu: 0 }) }>\n            <FontAwesomeIcon icon={ faUser } style={{ color: '#1abc9c' }}/>\n            <span> Сменить имя пользователя </span>\n            <div/>\n          </li>\n          <li className=\"apps-params\" onClick={ () => this.setState({ menu: 1 }) }>\n            <FontAwesomeIcon icon={ faLock } style={{ color: '#3498db' }}/>\n            <span> Сменить пароль </span>\n            <div/>\n          </li>\n          <li className=\"apps-params\" onClick={ () => this.setState({ menu: 2 }) }>\n            <FontAwesomeIcon icon={ faAt } style={{ color: '#e67e22' }}/>\n            <span> Сменить почту </span>\n            <div/>\n          </li>\n        </ul>\n        <hr className=\"settings-line\"/>\n        <ul className=\"settings-list\">\n          <li className=\"apps-params\" onClick={ () => this.setState({ menu: 3 }) }>\n            <FontAwesomeIcon icon={ faMobile } style={{ color: '#9b59b6' }}/>\n            <span> Настройки приложений </span>\n            <div/>\n          </li>\n          <li className=\"apps-params\" onClick={ () => this.setState({ menu: 4 }) }>\n            <FontAwesomeIcon icon={ faUserCog } style={{ color: '#63cdda' }}/>\n            <span> Настройки пользователя </span>\n            <div/>\n          </li>\n          <li className=\"apps-params\" onClick={ () => this.setState({ menu: 5 }) }>\n            <FontAwesomeIcon icon={ faBoxes } style={{ color: '#f5cd79' }}/>\n            <span> Настройки виджетов </span>\n            <div/>\n          </li>\n          <li className=\"apps-params\" onClick={ () => this.setState({ menu: 6 }) }>\n            <FontAwesomeIcon icon={ faLayerGroup } style={{ color: '#1abc9c' }}/>\n            <span> Настройки групп </span>\n            <div/>\n          </li>\n        </ul>\n        <hr className=\"settings-line\"/>\n        <ul className=\"settings-list\">\n          <li className=\"apps-params\" onClick={ () => this.setState({ menu: 7 }) }>\n            <FontAwesomeIcon icon={ faInfoCircle } style={{ color: '#2ecc71' }}/>\n            <span> Об аккаунте </span>\n            <div/>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n\n  close() { this.setState({ menu: false }); }\n}\n\n\nfunction mapStateToProps(store) {\n  return {\n    user: store.userData.user,\n    projects: store.projects.data,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchUser: () => {\n      dispatch(fetchUser())\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsApp);","import React from 'react';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\nimport {faIdBadge, faKey, faSearch} from \"@fortawesome/free-solid-svg-icons\";\nimport {fetchUser} from \"../../../../actions/userActions\";\nimport {fetchProjects} from \"../../../../actions/projectsActions\";\nimport {connect} from \"react-redux\";\nimport {request} from \"../../../../tools/apiRequest/apiRequest\";\n\n/* Component */\nclass AppDownload extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // bind\n    this.clone = this.clone.bind(this);\n  }\n\n  render() {\n\n    const id = this.props.id;\n\n    let button = <div className=\"reg-window__input-item\">\n      <div className=\"reg-window__button reg-window__button_green\" onClick={ this.clone }>\n        Клонировать\n      </div>\n    </div>;\n\n    return (\n      <div className=\"app-block app-download-block\">\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <div className=\"app-block__icon\" style={{ backgroundColor: this.props.color }}>\n              <FontAwesomeIcon icon={ Icons[this.props.icon] }/>\n            </div>\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" readOnly={ true } value={ this.props.title } className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { button }\n      </div>\n    );\n  }\n\n  clone() {\n\n    const id = this.props.id;\n\n    this.cloneApp({ appId: id });\n\n    this.forceUpdate();\n  }\n\n  cloneApp(params) {\n    request(`/api/create_clone`, params)\n      .then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n        this.props.fetchProjects();\n      } else {\n        console.log(body);\n      }\n    }).catch(err => {\n      console.error('Ошибка запроса!\\n\\n', err);\n    });\n  }\n}\n\n\nfunction mapStateToProps(store) {\n  return {\n    user: store.userData.user,\n    projects: store.projects.data,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchUser: () => {\n      dispatch(fetchUser())\n    },\n    fetchProjects: () => {\n      dispatch(fetchProjects())\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppDownload);","import React from 'react';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {faSearch, faCircleNotch} from \"@fortawesome/free-solid-svg-icons\";\n\nimport { fetchUser } from \"../../../../actions/userActions\";\nimport { connect } from \"react-redux\";\nimport {request} from \"../../../../tools/apiRequest/apiRequest\";\n\nimport AppDownload from \"./AppDownload\";\n\n/* Component */\nclass StoreApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      search: false,\n      lastApps: false,\n      findApps: false,\n    }\n\n    // bind\n    this.focusIn = this.focusIn.bind(this);\n    this.focusOut = this.focusOut.bind(this);\n    this.typing = this.typing.bind(this);\n    this.findApps = this.findApps.bind(this);\n  }\n\n  render() {\n\n    let lastApps = <div className=\"apps-loader\">\n      <FontAwesomeIcon icon={ faCircleNotch }/>\n    </div>;\n    let findApps = null;\n\n    if (this.state.findApps && this.state.search) {\n      findApps = this.state.findApps.map((app, index) => {\n        return <AppDownload { ...app } key={index}/>;\n      });\n    } else if (!this.state.findApps && this.state.search) {\n      findApps = <div className=\"apps-loader\">\n        <FontAwesomeIcon icon={ faCircleNotch }/>\n      </div>;\n    }\n\n    if (this.state.lastApps) {\n      lastApps = this.state.lastApps.map((app, index) => {\n        return <AppDownload { ...app } key={index}/>;\n      });\n    }\n\n    return (\n      <div className=\"main-settings-wrap main-store-wrap\" id=\"main-store-wrap\">\n        <div className=\"main-settings-title\">Магазин</div>\n        <div className=\"app-block store-search-block app-download-block\" id=\"search-block\">\n          <div className=\"reg-window__input-item\">\n            <div className=\"reg-window__item-block\">\n              <FontAwesomeIcon icon={ faSearch } />\n            </div>\n            <div className=\"reg-window__item-block\">\n              <input type=\"text\"\n                     className=\"reg-window__input\"\n                     placeholder=\"Название или ID\"\n                     id=\"search\"\n                     autoComplete=\"off\"/>\n            </div>\n          </div>\n          <div className=\"reg-window__input-item\">\n            <div>\n              { findApps }\n            </div>\n          </div>\n        </div>\n        { lastApps }\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const input = document.getElementById('search');\n    input.addEventListener('focusin', this.focusIn);\n    input.addEventListener('focusout', this.focusOut);\n    input.addEventListener('input', this.typing);\n\n    if (!this.state.lastApps) {\n      request('/api/get_last_apps', {})\n        .then(res => res.json()).then(body => {\n          if (body.status === 'ok') {\n            this.setState({ lastApps: body.apps });\n          } else {\n            console.log('Ahtung in downloading last apps!');\n          }\n        }).catch(err => {\n          console.log('Ahtung in downloading last apps!');\n        });\n\n      /*this.setState({ lastApps: [\n          {\n            title: \"Скачаное приложение\", icon: \"faUtensils\", color: \"#f1c40f\", id: \"hHud&snkxkhs&9467\"\n          },\n          {\n            title: \"Скачаное приложение 2\", icon: \"faUtensils\", color: \"#f1c40f\", id: \"hHui&snkxkhs&9468\"\n          },\n          {\n            title: \"Скачаное приложение 3\", icon: \"faUtensils\", color: \"#f1c40f\", id: \"hHui&snkxkhs&9469\"\n          },\n          {\n            title: \"Скачаное приложение 4\", icon: \"faUtensils\", color: \"#f1c40f\", id: \"hHui&snkxkhs&9470\"\n          }\n      ]});*/\n    }\n  }\n\n  focusIn() {\n    document.getElementById('search-block')\n      .classList.add('store-search-block_active');\n  }\n\n  focusOut() {\n    const input = document.getElementById('search');\n    if (!this.state.findApps || input.value.length === 0) {\n      this.setState({ search: false });\n      document.getElementById('search-block')\n        .classList.remove('store-search-block_active');\n    }\n  }\n\n  typing() {\n    const input = document.getElementById('search');\n    if (input.value.length !== 0) {\n      this.findApps(input.value);\n      this.setState({ search: true });\n    } else {\n      this.setState({ search: false });\n    }\n  }\n\n  findApps(search) {\n    request('/api/get_find_apps', { search })\n      .then(res => res.json()).then(body => {\n        if (body.status === 'ok') {\n          this.setState({ findApps: body.apps });\n        } else {\n          console.log('Ahtung in downloading last apps!');\n        }\n      }).catch(err => {\n        console.log('Ahtung in downloading last apps!');\n      });\n  }\n\n  componentWillUnmount() {\n    const input = document.getElementById('search');\n    input.removeEventListener('focusin', this.focusIn);\n    input.removeEventListener('focusout', this.focusOut);\n    input.removeEventListener('input', this.typing);\n  }\n}\n\n\nfunction mapStateToProps(store) {\n  return {\n    user: store.userData.user,\n    projects: store.projects.data,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchUser: () => {\n      dispatch(fetchUser())\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoreApp);","/* React */\nimport React from 'react';\n\n/* Component */\nexport default class Code extends React.Component {\n\n  render() {\n    return (\n      <pre className=\"doc__code\">\n        <code>\n          { this.props.children }\n        </code>\n      </pre>\n    );\n\n  }\n\n  componentDidMount() {\n\n  }\n}","\n/* develop mode */\nlet devMode = false;\nif (window.location.port === '3000') {\n  devMode = true;\n}\n\nexport function fetchUser() {\n  let request;\n  devMode\n    ? request = fetch('../testJson/user.json').then(res => res.json())\n    : request = fetch('/api/get_user', { method: 'POST' }).then(res => res.json());\n\n  return {\n    type: 'FETCH_USER',\n    payload: request,\n  }\n}","/* React */\nimport React from 'react';\n\n/* Components */\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser, faLock, faEnvelope, faKey, faPaperPlane } from '@fortawesome/free-solid-svg-icons';\nimport { Link } from 'react-router-dom';\n\n/* Component */\nexport default class RegWindow extends React.Component {\n  constructor(props) {\n    super (props);\n\n    this.state = {\n      errs: ['', '', '', ''],\n      emailCode: false,\n      password: '',\n      email: '',\n      username: '',\n      code: '',\n      codeID: '',\n    }\n\n    // bind\n    this.btnClicked = this.btnClicked.bind(this);\n    this.hotkey = this.hotkey.bind(this);\n    this.sendCode = this.sendCode.bind(this);\n    this.codeRequest = this.codeRequest.bind(this);\n  }\n\n  render() {\n\n    let errs = [null, null, null, null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    let codeButton = null;\n    if (!this.state.emailCode) {\n      codeButton = (\n        <div className=\"reg-window__input-button\" id=\"send-code-button\">\n          <FontAwesomeIcon icon={ faPaperPlane } />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"reg-window reg-window_center\">\n        <div className=\"reg-window__text-item\">\n          <img src=\"./images/appex.svg\" alt=\"a\" className=\"appex-logo\"/>\n          <span className=\"logo-text\">ppex</span>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faUser } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"никнейм\" id=\"reg-username\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLock } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"пароль\" id=\"reg-password\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[1] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faEnvelope } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"почта\" id=\"reg-email\" className=\"reg-window__input\"/>\n            { codeButton }\n          </div>\n        </div>\n        { errs[2] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faKey } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"ключ\" id=\"reg-key\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[3] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_blue\" id=\"reg-btn\"> \n            Зарегистрироваться!\n          </div>\n        </div>\n        <div className=\"reg-window__under-text\">\n          Уже зарегистрированны? <Link to=\"/sign_in\"> Войти </Link>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    document.getElementById('reg-btn').addEventListener('click', this.btnClicked);\n    if (!this.state.emailCode) {\n      document.getElementById('send-code-button').addEventListener('click', this.sendCode);\n    }\n    document.addEventListener('keydown', this.hotkey);\n  }\n\n  componentWillUnmount() {\n    document.getElementById('reg-btn').removeEventListener('click', this.btnClicked);\n    if (!this.state.emailCode) {\n      document.getElementById('send-code-button').removeEventListener('click', this.sendCode);\n    }\n    document.removeEventListener('keydown', this.hotkey);\n  }\n\n  hotkey(event) {\n    if (event.key === 'Enter') {\n      this.btnClicked();\n    }\n  }\n\n  async btnClicked() {\n\n    /* Clear warnings */\n    this.setState({\n      errs: ['', '', '', '']\n    });\n\n    const username = document.getElementById('reg-username').value;\n    if (username.length < 3) {\n      this.setState({\n        errs: ['Слишком короткое имя пользователя!', '', '', '']\n      });\n      return;\n    } else {\n\n      /* checking username available */\n      const body = JSON.stringify({ username });\n      await fetch('/sign_up/is_param_available', {\n        method: \"POST\",\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n        },\n        body\n      }).then(res => res.text()).then(text => {\n        if (text === 'used') {\n          this.setState({\n            errs: ['Такой пользователь уже есть в системе!', '', '', '']\n          });\n          return;\n        } else { this.setState({ username }); }\n      }).catch(err => console.log('Ahtung in checking username!', new Error(err)));\n    }\n\n    const password = document.getElementById('reg-password').value;\n    if (!/[0-9a-z]{6,}/.test(password)) {\n      this.setState({\n        errs: ['', 'Слишком легкий пароль!', '', '']\n      });\n      return;\n    } else { this.setState({ password }); }\n\n    const email = document.getElementById('reg-email').value;\n    if (!/\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,6}/.test(email)) {\n      return this.setState({\n        errs: ['', '', 'Неверно введен email адрес!', '']\n      });\n    }\n\n    const code = document.getElementById('reg-key').value;\n    if (!/[0-9a-zA-Z]{8}/.test(code)) {\n      this.setState({\n        errs: ['', '', '', 'Неверный формат кода! Он должен прийти вам на почту.']\n      });\n      return;\n    } else { this.setState({ code }); }\n\n    /* if email code isn`t posted */\n    if (this.state.email === '' || this.state.codeID === '' || !this.state.emailCode) {\n      this.setState({\n        errs: ['', '', '', 'Вы не отправили код!']\n      });\n      return;\n    }\n\n    /* if all data is here */\n    if (this.state.username === '' || this.state.password === '') { return; }\n\n    /* if all is ok */\n    const body = JSON.stringify({\n      username: this.state.username,\n      password: this.state.password,\n      email: this.state.email,\n      code: this.state.code,\n      codeID: this.state.codeID,\n    });\n    fetch('/sign_up/', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    }).then(response => response.text()).then(text => {\n      switch (text) {\n        case 'ok':\n          console.log('ok!');\n          document.location.href = '/sign_in';\n          break;\n        case 'invalidCode':\n          this.setState({ errs: ['', '', '', 'Неправильный код!'] });\n          break;\n        case 'used':\n          this.setState({ errs: ['Такие username или email уже существуют!', '', '', ''], emailCode: false });\n          break;\n        default:\n          this.setState({ errs: ['Неизвестная ошибка :(', '', '', ''] });\n          break;\n      }\n    });\n  }\n\n  sendCode() {\n    const email = document.getElementById('reg-email').value;\n    if (!/\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,6}/.test(email)) {\n      return this.setState({\n        errs: ['', '', 'Неверно введен email адрес!', '']\n      });\n    } else {\n\n      /* checking email available */\n      const body = JSON.stringify({ email });\n      fetch('/sign_up/is_param_available', {\n        method: \"POST\",\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n        },\n        body\n      }).then(res => res.text()).then(text => {\n        if (text === 'used') {\n          return this.setState({\n            errs: ['', '', 'Такой email адрес уже есть в системе!', ''], emailCode: false\n          });\n        } else {\n          this.setState({ email });\n          this.codeRequest();\n        }\n      }).catch(err => console.log('Ahtung in checking email!', new Error(err)));\n    }\n  }\n\n  codeRequest() {\n\n    /* generate code and send email */\n    const email = this.state.email;\n    const body = JSON.stringify({ email });\n    fetch('/sign_up/secure_code', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    }).then(res => res.json()).then(body => {\n      if (body.status !== 'ok') {\n        return this.setState({\n          errs: ['', '', '', 'Ошибка отправки кода. Попробуйте еще раз.'],\n          emailCode: false,\n        });\n      }\n      this.setState({ emailCode: true, email, codeID: body.codeID });\n    });\n  }\n}","/* React */\nimport React from 'react';\n\n/* Components */\nimport Window from '../RegWindow/reg-window';\n\n/* Component */\nexport default class RegWrap extends React.Component {\n  render() {\n    return (\n      <div className=\"reg-wrap\">\n        <Window />\n      </div>\n    );\n  }\n}","/* React */\nimport React from 'react';\n\n/* Components */\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser, faLock } from '@fortawesome/free-solid-svg-icons';\nimport { Link, Redirect } from 'react-router-dom';\n\n/* Component */\nexport default class RegWindow extends React.Component {\n  constructor(props) {\n    super (props);\n\n    this.state = {\n      errs: ['', '', ''],\n    }\n\n    // bind\n    this.btnClicked = this.btnClicked.bind(this);\n    this.hotkey = this.hotkey.bind(this);\n  }\n\n  render() {\n\n    let errs = [null, null, null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    return (\n      <div className=\"reg-window reg-window_center\">\n        <div className=\"reg-window__text-item\">\n          <img src=\"./images/appex.svg\" alt=\"a\" className=\"appex-logo\"/>\n          <span className=\"logo-text\">ppex</span>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faUser } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"никнейм\" id=\"reg-username\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLock } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"password\" placeholder=\"пароль\" id=\"reg-password\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[1] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_red\" id=\"reg-btn\"> \n            Войти!\n          </div>\n        </div>\n        { errs[2] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__under-text\">\n            Ещё не зарегистрировались? <Link to=\"/sign_up\"> Регистрация </Link>\n          </div>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__under-text reg-window__under-text_not-first\">\n            Забыли пароль? <Link to=\"/change_password\"> Восстановить </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    document.getElementById('reg-btn').addEventListener('click', this.btnClicked);\n    document.addEventListener('keydown', this.hotkey);\n  }\n\n  componentWillUnmount() {\n    document.getElementById('reg-btn').removeEventListener('click', this.btnClicked);\n    document.removeEventListener('keydown', this.hotkey);\n  }\n\n  hotkey(event) {\n    if (event.key === 'Enter') {\n      this.btnClicked();\n    }\n  }\n\n  btnClicked() {\n\n    /* Clear warnings */\n    this.setState({\n      errs: ['', '', '']\n    });\n\n    /* check username */\n    const username = document.getElementById('reg-username').value;\n    if (username.length === 0) {\n      this.setState({\n        errs: ['Введите имя пользователя!', '', '']\n      });\n      return;\n    }\n\n    /* check password */\n    const password = document.getElementById('reg-password').value;\n    if (!/[0-9a-z]{6,}/.test(password)) {\n      this.setState({\n        errs: ['', 'Неверный пароль!', '']\n      });\n      return;\n    }\n\n    /* send to the server */\n    const body = JSON.stringify({\n      username: username,\n      password: password,\n    });\n    fetch('/sign_in/', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    }).then(response => response.json()).then(body => {\n      if (body.status === 'ok') {\n        console.log('ok');\n\n        /* redirect to main page */\n        const location = window.location.href;\n        window.location.href = location.replace('sign_in', 'main');\n      } else {\n        this.setState({\n          errs: ['', '', 'Неверный логин или пароль!']\n        });\n      }\n    });\n  }\n} ","/* React */\nimport React from 'react';\n\n/* Components */\nimport Window from '../LogWindow/log-window';\n\n/* Component */\nexport default class LogWrap extends React.Component {\n  render() {\n    return (\n      <div className=\"reg-wrap\">\n        <Window />\n      </div>\n    );\n  }\n}","/* React */\nimport React from 'react';\n\n/* Components */\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser, faLock, faEnvelope, faKey, faPaperPlane, faUnlock} from '@fortawesome/free-solid-svg-icons';\nimport { Link } from 'react-router-dom';\n\n/* Component */\nexport default class ChangePass extends React.Component {\n  constructor(props) {\n    super (props);\n\n    this.state = {\n      errs: ['', '', '', ''],\n      emailCode: false,\n      password: '',\n      email: '',\n      username: '',\n      code: '',\n      codeID: '',\n    }\n\n    // bind\n    this.btnClicked = this.btnClicked.bind(this);\n    this.hotkey = this.hotkey.bind(this);\n    this.sendCode = this.sendCode.bind(this);\n  }\n\n  render() {\n\n    let errs = [null, null, null, null];\n    errs = errs.map((item, index) => {\n      if (this.state.errs[index] !== '') {\n        return (\n          <div className=\"reg-window__err-item\">\n            { this.state.errs[index] }\n          </div>\n        );\n      }\n    });\n\n    let codeButton = null;\n    if (!this.state.emailCode) {\n      codeButton = (\n        <div className=\"reg-window__input-button\" id=\"send-code-button\">\n          <FontAwesomeIcon icon={ faPaperPlane } />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"reg-window reg-window_center\">\n        <div className=\"reg-window__text-item\">\n          <img src=\"./images/appex.svg\" alt=\"a\" className=\"appex-logo\"/>\n          <span className=\"logo-text\">ppex</span>\n        </div>\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faUser } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"никнейм\" id=\"reg-username\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[0] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faEnvelope } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"почта\" id=\"reg-email\" className=\"reg-window__input\"/>\n            { codeButton }\n          </div>\n        </div>\n        { errs[1] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faKey } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"ключ\" id=\"reg-key\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[2] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__item-block\">\n            <FontAwesomeIcon icon={ faLock } />\n          </div>\n          <div className=\"reg-window__item-block\">\n            <input type=\"text\" placeholder=\"новый пароль\" id=\"reg-new-password\" className=\"reg-window__input\"/>\n          </div>\n        </div>\n        { errs[3] }\n        <div className=\"reg-window__input-item\">\n          <div className=\"reg-window__button reg-window__button_green\" id=\"reg-btn\">\n            Сменить пароль!\n          </div>\n        </div>\n        <div className=\"reg-window__under-text\">\n          Введите логин и email. На него вам придет код для создания нового пароля.\n        </div>\n        <div className=\"reg-window__under-text reg-window__under-text_not-first\">\n          Перейти на\n          <Link to=\"/sign_in\">страницу входа</Link>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    document.getElementById('reg-btn').addEventListener('click', this.btnClicked);\n    document.addEventListener('keydown', this.hotkey);\n    if (!this.state.emailCode) {\n      document.getElementById('send-code-button').addEventListener('click', this.sendCode);\n    }\n  }\n\n  componentWillUnmount() {\n    document.getElementById('reg-btn').removeEventListener('click', this.btnClicked);\n    document.removeEventListener('keydown', this.hotkey);\n    if (!this.state.emailCode) {\n      document.getElementById('send-code-button').removeEventListener('click', this.sendCode);\n    }\n  }\n\n  hotkey(event) {\n    if (event.key === 'Enter') {\n      this.btnClicked();\n    }\n  }\n\n  async btnClicked() {\n\n    /* Clear warnings */\n    this.setState({\n      errs: ['', '', '', '']\n    });\n\n    const username = document.getElementById('reg-username').value;\n    if (username.length < 3) {\n      this.setState({\n        errs: ['Слишком короткое имя пользователя!', '', '', '']\n      });\n      return;\n    } else {\n\n      /* checking username available */\n      const body = JSON.stringify({ username });\n      await fetch('/sign_up/is_param_available', {\n        method: \"POST\",\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n        },\n        body\n      }).then(res => res.text()).then(text => {\n        if (text !== 'used') {\n          this.setState({\n            errs: ['Такого пользователя нет в системе!', '', '', '']\n          });\n          return;\n        } else { this.setState({ username }); }\n      }).catch(err => console.log('Ahtung in checking username!', new Error(err)));\n    }\n\n    const password = document.getElementById('reg-new-password').value;\n    if (!/[0-9a-z]{6,}/.test(password)) {\n      this.setState({\n        errs: ['', '', '', 'Слишком легкий пароль!']\n      });\n      return;\n    } else { this.setState({ password }); }\n\n    const email = document.getElementById('reg-email').value;\n    if (!/\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,6}/.test(email)) {\n      this.setState({\n        errs: ['', 'Неверно введен email адрес!', '', '']\n      });\n      return;\n    } else {\n\n      /* checking email available */\n      const body = JSON.stringify({ email });\n      await fetch('/sign_up/is_param_available', {\n        method: \"POST\",\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n        },\n        body\n      }).then(res => res.text()).then(text => {\n        if (text !== 'used') {\n          this.setState({\n            errs: ['', 'Такого адреса нет в системе!', '', ''], emailCode: false\n          });\n          return;\n        } else { this.setState({ email }); }\n      }).catch(err => console.log('Ahtung in checking email!', new Error(err)));\n    }\n\n    const code = document.getElementById('reg-key').value;\n    if (!/[0-9a-zA-Z]{8}/.test(code)) {\n      this.setState({\n        errs: ['', '', 'Неверный формат кода! Он должен прийти вам на почту.', '']\n      });\n      return;\n    } else { this.setState({ code }); }\n\n    /* if email code isn`t posted */\n    if (this.state.email === '' || this.state.codeID === '' || !this.state.emailCode) {\n      this.setState({\n        errs: ['', '', 'Вы не отправили код!', '']\n      });\n      return;\n    }\n\n    /* if all data is here */\n    if (this.state.username === '' || this.state.password === '') { return; }\n\n    /* if all is ok */\n    const body = JSON.stringify({\n      username: this.state.username,\n      newPassword: this.state.password,\n      email: this.state.email,\n      code: this.state.code,\n      codeID: this.state.codeID,\n    });\n\n    fetch('/change_password/', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    }).then(response => response.text()).then(text => {\n      switch (text) {\n        case 'ok':\n          console.log('ok!');\n          document.location.href = '/sign_in';\n          break;\n        case 'invalidCode':\n          this.setState({ errs: ['', '', 'Неправильный код!', ''] });\n          break;\n        case 'used':\n          this.setState({ errs: ['Такие username или email уже существуют!', '', '', ''], emailCode: false });\n          break;\n        default:\n          this.setState({ errs: ['Неизвестная ошибка :(', '', '', ''] });\n          break;\n      }\n    });\n  }\n\n  sendCode() {\n    const email = document.getElementById('reg-email').value;\n    if (!/\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,6}/.test(email)) {\n      this.setState({\n        errs: ['', 'Неверно введен email адрес!', '', '']\n      });\n      return;\n    }\n\n    /* generate code and send email */\n    const body = JSON.stringify({ email });\n    fetch('/change_password/secure_code', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    }).then(res => res.json()).then(body => {\n      if (body.status !== 'ok') {\n        this.setState({\n          errs: ['', '', 'Ошибка отправки кода. Попробуйте еще раз.', ''],\n          emailCode: false,\n        });\n        return; }\n      this.setState({ emailCode: true, email, codeID: body.codeID });\n    });\n  }\n} ","/* React */\nimport React from 'react';\n\n/* Components */\nimport Window from '../ChangePassWindow/change-pass-window';\n\n/* Component */\nexport default class RegWrap extends React.Component {\n  render() {\n    return (\n      <div className=\"reg-wrap\">\n        <Window />\n      </div>\n    );\n  }\n}","/* React */\nimport React from 'react';\n\n/* Components */\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Link } from 'react-router-dom';\nimport {request} from \"../../../tools/apiRequest/apiRequest\";\nimport {fetchUser} from \"../../../actions/userActions\";\nimport {fetchProjects} from \"../../../actions/projectsActions\";\nimport {connect} from \"react-redux\";\n\n/* Component */\nclass ProjectCard extends React.Component {\n  constructor(args) {\n    super(args);\n\n    // bind\n    this.mousemove = this.mousemove.bind(this);\n    this.mouseleave = this.mouseleave.bind(this);\n  }\n\n  render() {\n    return (\n      <div className=\"project-card-wrap\" id={`card-wrap-${ this.props.id }`}>\n        <section className=\"project-card project-card-clone-available\">\n          <header className=\"project-card__header\"> { this.props.title || 'application' } </header>\n          <div className=\"project-card__clone\"\n               onClick={() => this.cloneApp({ appId: this.props.id })}>\n            <FontAwesomeIcon icon={ Icons['faClone'] } />\n          </div>\n          <Link\n            style={{ backgroundColor: this.props.color || '#1abc9c' }}\n            className=\"project-card__icon\"\n            to={`/projects/${ this.props.id }`}>\n            <FontAwesomeIcon icon={ Icons[this.props.icon || 'faMobile'] } />\n          </Link>\n          <footer className=\"project-card__footer\">\n            { this.props.id }\n          </footer>\n        </section>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    document.getElementById(`card-wrap-${ this.props.id }`).addEventListener('mousemove', this.mousemove);\n    document.getElementById(`card-wrap-${ this.props.id }`).addEventListener('mouseleave', this.mouseleave);\n  }\n\n  componentWillUnmount() {\n    document.getElementById(`card-wrap-${ this.props.id }`).removeEventListener('mousemove', this.mousemove);\n    document.getElementById(`card-wrap-${ this.props.id }`).removeEventListener('mouseleave', this.mouseleave);\n  }\n\n  cloneApp(params) {\n    request(`/api/create_clone`, params)\n      .then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n        this.props.fetchProjects();\n      } else {\n        console.log(body);\n        alert('Ошибка клонирования!');\n      }\n    }).catch(err => {\n      console.error('Ошибка запроса!\\n\\n', err);\n      alert('Ошибка клонирования!');\n    });\n  }\n\n  mousemove(event) {\n    const cardWrap = document.getElementById(`card-wrap-${ this.props.id }`);\n    const icon = cardWrap.querySelector('a');\n    const card = cardWrap.querySelector('section');\n\n    let targetCords = cardWrap.getBoundingClientRect();\n    let xCord = event.clientX - targetCords.left;\n    let yCord = event.clientY - targetCords.top;\n\n    /* Trim */\n    xCord /= -10; xCord += 11;\n    yCord /= -14.2; yCord += 11;\n\n    /* Выглядит не особо удобно, но выпиливать пока не буду */\n    /*\n    icon.style.marginLeft = `${xCord * 2}px`;\n    icon.style.marginTop = `${yCord * 2}px`;\n\n    card.style.marginLeft = `${xCord * 1.5}px`;\n    card.style.marginTop = `${yCord * 1.5}px`;\n    */\n\n    card.style.marginTop = `-20px`;\n\n  }\n\n  mouseleave(event) {\n    const cardWrap = document.getElementById(`card-wrap-${ this.props.id }`);\n    const icon = cardWrap.querySelector('a');\n    const card = cardWrap.querySelector('section');\n\n    icon.style.margin = '0';\n    card.style.margin = '0';\n  }\n}\n\nfunction mapStateToProps(store) {\n  return {}\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchProjects: () => {\n      dispatch(fetchProjects())\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectCard);","/* React */\nimport React from 'react';\n\n/* Components */\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Link } from 'react-router-dom';\n\n/* Component */\nexport default class CloneCard extends React.Component {\n  constructor(args) {\n    super(args);\n\n    // bind\n    this.mousemove = this.mousemove.bind(this);\n    this.mouseleave = this.mouseleave.bind(this);\n  }\n\n  render() {\n    return (\n      <div className=\"project-card-wrap clone-card-wrap\" id={`card-wrap-${ this.props.id }`}>\n        <section className=\"project-card\">\n          <header className=\"project-card__header\"> { this.props.title || 'application' } </header>\n          <div className=\"clone-info\"\n               onClick={ () => this.props.cloneSettings(this.props) }>\n            <div className=\"parentId\">\n              { this.props.clonedFrom }\n            </div>\n            <div className=\"arrow\">\n              <FontAwesomeIcon icon={ Icons['faArrowDown']} />\n            </div>\n            <div\n              style={{ backgroundColor: this.props.color || '#1abc9c' }}\n              className=\"project-card__icon\">\n              <FontAwesomeIcon icon={ Icons[this.props.icon || 'faMobile'] } />\n            </div>\n          </div>\n          <footer className=\"project-card__footer\">\n            { this.props.id }\n          </footer>\n        </section>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    document.getElementById(`card-wrap-${ this.props.id }`).addEventListener('mousemove', this.mousemove);\n    document.getElementById(`card-wrap-${ this.props.id }`).addEventListener('mouseleave', this.mouseleave);\n  }\n\n  componentWillUnmount() {\n    document.getElementById(`card-wrap-${ this.props.id }`).removeEventListener('mousemove', this.mousemove);\n    document.getElementById(`card-wrap-${ this.props.id }`).removeEventListener('mouseleave', this.mouseleave);\n  }\n\n  mousemove(event) {\n    const cardWrap = document.getElementById(`card-wrap-${ this.props.id }`);\n    const icon = cardWrap.querySelector('a');\n    const card = cardWrap.querySelector('section');\n\n    let targetCords = cardWrap.getBoundingClientRect();\n    let xCord = event.clientX - targetCords.left;\n    let yCord = event.clientY - targetCords.top;\n\n    /* Trim */\n    xCord /= -10; xCord += 11;\n    yCord /= -14.2; yCord += 11;\n\n    /* Выглядит не особо удобно, но выпиливать пока не буду */\n    /*\n    icon.style.marginLeft = `${xCord * 2}px`;\n    icon.style.marginTop = `${yCord * 2}px`;\n\n    card.style.marginLeft = `${xCord * 1.5}px`;\n    card.style.marginTop = `${yCord * 1.5}px`;\n    */\n\n    card.style.marginTop = `-20px`;\n\n  }\n\n  mouseleave(event) {\n    const cardWrap = document.getElementById(`card-wrap-${ this.props.id }`);\n    // const icon = cardWrap.querySelector('a');\n    const card = cardWrap.querySelector('section');\n\n    // icon.style.margin = '0';\n    card.style.margin = '0';\n  }\n}","/* React */\nimport React from 'react';\n\n/* Components */\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrashAlt, faSave, faCheckCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { fetchRooms } from \"../../../actions/roomsActions\";\nimport { connect } from \"react-redux\";\n\n/* Component */\nclass RoomCard extends React.Component {\n  constructor(args) {\n    super(args);\n\n    // bind\n    this.mousemove = this.mousemove.bind(this);\n    this.mouseleave = this.mouseleave.bind(this);\n    this.deleteRoom = this.deleteRoom.bind(this);\n    this.saveRoom = this.saveRoom.bind(this);\n\n    this.state = {\n      deleteFlag: false,\n    }\n  }\n\n  render() {\n\n    /* render icons */\n    let icon = faTrashAlt;\n    if (this.state.deleteFlag) {\n      icon = faCheckCircle;\n    }\n\n    const open = '{';\n    const close = '}';\n\n    return (\n      <div className=\"project-card-wrap room-card-wrap\" id={`room-wrap-${ this.props.roomId }`}>\n        <section className=\"project-card room-card\">\n          <pre className=\"room-card__text\">\n            { open } <br/>\n            &nbsp; name: <input type=\"text\" id={`room-name-${ this.props.roomId }`}/> <br/>\n            &nbsp; id: <input type=\"text\" readOnly id={`room-id-${ this.props.roomId }`}/> <br/>\n            &nbsp; pass: <input type=\"text\" id={`room-pass-${ this.props.roomId }`}/> <br/>\n            { close }\n          </pre>\n          <div className=\"icons\">\n            <div onClick={ this.deleteRoom }\n                 id={`confirm-icon-${ this.props.roomId }`}> <FontAwesomeIcon icon={ icon }/> </div>\n            <div onClick={ this.saveRoom }\n                 id={`save-icon-${ this.props.roomId }`}> <FontAwesomeIcon icon={ faSave }/> </div>\n          </div>\n        </section>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    document.getElementById(`room-wrap-${ this.props.roomId}`)\n      .addEventListener('mousemove', this.mousemove);\n    document.getElementById(`room-wrap-${ this.props.roomId }`)\n      .addEventListener('mouseleave', this.mouseleave);\n\n    /* set props */\n    document.getElementById(`room-name-${ this.props.roomId}`).value = this.props.name;\n    document.getElementById(`room-id-${ this.props.roomId}`).value = this.props.roomId;\n    document.getElementById(`room-pass-${ this.props.roomId}`).value = this.props.roomPass;\n  }\n\n  componentWillUnmount() {\n    document.getElementById(`room-wrap-${ this.props.roomId}`)\n      .removeEventListener('mousemove', this.mousemove);\n    document.getElementById(`room-wrap-${ this.props.roomId}`)\n      .removeEventListener('mouseleave', this.mouseleave);\n  }\n\n  mousemove(event) {\n    const cardWrap = document.getElementById(`room-wrap-${ this.props.roomId}`);\n    const icon = cardWrap.querySelector('pre');\n    const card = cardWrap.querySelector('section');\n\n    let targetCords = cardWrap.getBoundingClientRect();\n    let xCord = event.clientX - targetCords.left;\n    let yCord = event.clientY - targetCords.top;\n\n    /* Trim */\n    xCord /= -10; xCord += 11;\n    yCord /= -14.2; yCord += 11;\n\n    /* Выглядит не особо удобно, но выпиливать пока не буду */\n    /*\n    icon.style.marginLeft = `${xCord * 0.5}px`;\n    icon.style.marginTop = `${yCord * 0.5}px`;\n\n    card.style.marginLeft = `${xCord}px`;\n    card.style.marginTop = `${yCord}px`;\n    */\n\n    card.style.marginTop = `-20px`;\n\n  }\n\n  mouseleave(event) {\n    const cardWrap = document.getElementById(`room-wrap-${ this.props.roomId }`);\n    const icon = cardWrap.querySelector('pre');\n    const card = cardWrap.querySelector('section');\n\n    icon.style.margin = '0';\n    card.style.margin = '0';\n  }\n\n  deleteRoom() {\n    if (!this.state.deleteFlag) {\n      this.setState({ deleteFlag: true });\n      return;\n    }\n\n    /* delete room */\n    const body = JSON.stringify({ roomId: this.props.roomId });\n    fetch('api/delete_room', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    })\n      .then(res => res.json()).then(body => this.props.fetchRooms())\n      .catch(() => this.props.fetchRooms());\n  }\n\n  saveRoom() {\n\n    const name = document.getElementById(`room-name-${ this.props.roomId}`).value;\n    const roomPass = document.getElementById(`room-pass-${ this.props.roomId}`).value\n\n    /* save changes */\n    const body = JSON.stringify({\n      roomId: this.props.roomId,\n      name, roomPass\n    });\n    fetch('api/change_room', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    })\n      .then(res => res.json()).then(body => this.props.fetchRooms())\n      .catch(() => this.props.fetchRooms());\n  }\n}\n\nfunction mapStateToProps(store) {\n  return {}\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchRooms: () => {\n      dispatch(fetchRooms())\n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomCard);","/* React */\nimport React from 'react';\n\n/* Components */\nimport Navbar from '../navbar/Navbar';\nimport Card from '../project-card/ProjectCard';\nimport CloneCard from \"../clone-card/CloneCard\";\nimport Room from '../room-card/RoomCard';\nimport Window from '../create-app-window/CreateAppWindow';\nimport Wrap from '../../../tools/modal-wrap/ModalWrap';\n\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { connect } from 'react-redux';\nimport { fetchProjects } from '../../../actions/projectsActions';\nimport { fetchRooms } from '../../../actions/roomsActions';\nimport { fetchUser } from \"../../../actions/userActions\";\nimport { switchModalState } from '../../../actions/projectsModalActions';\nimport Message from \"../../../tools/message/Message\";\n\nimport AlertsView from \"../../../tools/alerts/alertsView\";\n\n/* Component */\nclass ProjectsWrap extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      message: false,\n      cloneParams: false,\n    }\n\n    // bind\n    this.newProject = this.newProject.bind(this);\n    this.cloneSettings = this.cloneSettings.bind(this);\n    this.close = this.close.bind(this);\n    this.newRoom = this.newRoom.bind(this);\n  }\n\n  render() {\n\n    /* all cards */\n    let apps = null;\n    let clones = null;\n    if (!this.props.projectsIsFetching && !this.props.projectsError) {\n\n      /* apps */\n      apps = this.props.projects.map((props, index) => {\n        return (\n          <Card { ...props } key = { index }/>\n        );\n      });\n\n      /* clones */\n      clones = this.props.projects.map((props, index) => {\n        return (\n          <CloneCard { ...props }\n                     key = { index }\n                     cloneSettings = { this.cloneSettings }/>\n        );\n      });\n\n      clones = clones.filter(item => item.props.type === 'clone');\n      apps = apps.filter(item => item.props.type === 'app');\n    }\n\n    /* all rooms */\n    let rooms = null;\n    if (!this.props.roomsIsFetching && !this.props.roomsError) {\n      rooms = this.props.rooms.map((props, index) => {\n        return (\n          <Room { ...props } key = { index }/>\n        );\n      });\n    }\n\n    /* clones */\n    let clonedApps = null;\n    let hr = null;\n    if (clones && clones.length > 0) {\n      clonedApps = (\n        <div className=\"projects-wrap\">\n          <article className=\"cards\">\n            { clones }\n          </article>\n        </div>\n      );\n      hr = <hr/>;\n    }\n\n    /* rendering window */\n    let modal;\n    this.props.modal.status? modal = <Wrap for={ <Window { ...this.state.cloneParams }/> } />: modal = null;\n\n    /* render message */\n    let message = null;\n    if (this.state.message) {\n      message = <Message { ...this.state.message }/>;\n      setTimeout(() => {\n        this.setState({ message: false });\n      }, 600);\n    }\n\n    return (\n      <div>\n        { modal }\n        { message }\n        <Navbar path=\"./images/appex.svg\" />\n        <div className=\"projects-wrap\">\n          <article className=\"cards\">\n            {/*  <Card\n            title=\"макароно-варка\"\n            icon=\"faUtensils\"\n            color=\"#3498db\"\n            id=\"hGud&snkxkhs&6467\"\n           />  */}\n\n            { apps }\n\n            <div className=\"project-card-wrap\"  id=\"project-card-plus-wrap\">\n              <section className=\"project-card_plus\" id=\"project-card__plus\">\n                <div className=\"project-card__plus-wrap\">\n                  <FontAwesomeIcon icon={ faPlus } />\n                </div>\n              </section>\n            </div>\n          </article>\n        </div>\n        { hr } { clonedApps }\n        <hr/>\n        <div className=\"projects-wrap\">\n          <article className=\"cards\">\n            {/*  <Room\n            title=\"макароно-варка\"\n            icon=\"faUtensils\"\n            color=\"#3498db\"\n            id=\"hGud&snkxkhs&6467\"\n           />  */}\n\n            { rooms }\n\n            <div className=\"project-card-wrap\"  id=\"room-card-plus-wrap\">\n              <section className=\"project-card_plus room-card_plus\" id=\"room-card__plus\">\n                <div className=\"project-card__plus-wrap room-card__plus-wrap\">\n                  <FontAwesomeIcon icon={ faPlus } />\n                </div>\n              </section>\n            </div>\n          </article>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const projectCard = document.getElementById(`project-card-plus-wrap`);\n    projectCard.addEventListener('mousemove', { handleEvent: this.mousemove, target: projectCard });\n    projectCard.addEventListener('mouseleave', { handleEvent: this.mouseleave, target: projectCard });\n\n    const roomCard = document.getElementById(`room-card-plus-wrap`);\n    roomCard.addEventListener('mousemove', { handleEvent: this.mousemove, target: roomCard });\n    roomCard.addEventListener('mouseleave', { handleEvent: this.mouseleave, target: roomCard });\n\n    if (!this.props.projectsFulfilled && !this.props.projectsIsFetching) {\n      this.props.fetchProjects();\n    }\n\n    if (this.props.projectsError) {\n      console.log('Неизвестная ошибка загрузки проектов!');\n      this.setState({message: { type: false, text: 'Неизвестная ошибка загрузки проектов!'}});\n    }\n\n    if (!this.props.roomsFulfilled && !this.props.roomsIsFetching) {\n      this.props.fetchRooms();\n    }\n\n    if (this.props.roomsError) {\n      console.log('Неизвестная ошибка загрузки проектов!');\n      this.setState({message: { type: false, text: 'Неизвестная ошибка загрузки комнат!'}});\n    }\n\n    document.getElementById(`project-card-plus-wrap`).addEventListener('click', this.newProject);\n    document.getElementById(`room-card-plus-wrap`).addEventListener('click', this.newRoom);\n\n\n\n    /*   ---==== Alerts ====---   */\n\n    const alerts = new AlertsView(this.props.user.alerts, 'ProjectsWrap', this.props.fetchUser);\n    alerts.run();\n  }\n\n  componentWillUnmount() {\n    document.getElementById(`project-card-plus-wrap`).removeEventListener('mousemove', this.mousemove);\n    document.getElementById(`project-card-plus-wrap`).removeEventListener('mouseleave', this.mouseleave);\n    document.getElementById(`project-card-plus-wrap`).removeEventListener('click', this.newProject);\n    document.getElementById(`room-card-plus-wrap`).removeEventListener('click', this.newRoom);\n\n    document.getElementById(`room-card-plus-wrap`).removeEventListener('mousemove', this.mousemove);\n    document.getElementById(`room-card-plus-wrap`).removeEventListener('mouseleave', this.mouseleave);\n  }\n\n  newProject() {\n    this.props.switchModalState(this.props.modal.status, 'new');\n  }\n\n  cloneSettings(cloneParams) {\n    this.setState({ cloneParams });\n    this.props.switchModalState(this.props.modal.status, 'set');\n  }\n\n  newRoom() {\n\n    /* create new room */\n    fetch('api/create_room', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(res => res.json()).then(body => this.props.fetchRooms())\n      .catch(() => this.props.fetchRooms());\n  }\n\n  close() {\n    this.setState({\n      modal: false\n    })\n  }\n\n  mousemove(event) {\n    let iconWrap = this.target;\n    let icon = iconWrap.querySelector('.project-card_plus');\n\n    let targetCords = iconWrap.getBoundingClientRect();\n    let xCord = event.clientX - targetCords.left;\n    let yCord = event.clientY - targetCords.top;\n\n    /* Trim */\n    xCord /= -10; xCord += 11;\n    yCord /= -14.2; yCord += 11;\n\n    icon.style.marginLeft = `${xCord * 2}px`;\n    icon.style.marginTop = `${yCord * 2}px`;\n  }\n\n  mouseleave(event) {\n    let icon = this.target.querySelector('.project-card_plus');\n    icon.style.margin = '0';\n  }\n}\n\nfunction mapStateToProps(store) {\n  return {\n\n    /* projects */\n    projects: store.projects.data,\n    projectsIsFetching: store.projects.isFetching,\n    projectsError: store.projects.error,\n    projectsFulfilled: store.projects.fulfilled,\n\n    /* modal */\n    modal: store.projectsModal,\n\n    /* user */\n    user: store.userData.user,\n\n    /* rooms */\n    rooms: store.rooms.data,\n    roomsIsFetching: store.rooms.isFetching,\n    roomsError: store.rooms.error,\n    roomsFulfilled: store.rooms.fulfilled,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchProjects: () => {\n      dispatch(fetchProjects())\n    },\n    fetchRooms: () => {\n      dispatch(fetchRooms())\n    },\n    switchModalState: (state, mode) => {\n      dispatch(switchModalState(state, mode))\n    },\n    fetchUser: () => {\n      dispatch(fetchUser())\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectsWrap);","/* React */\nimport React from 'react';\n\nimport Interpreter from \"../../tools/interpreter/Interpreter\";\nimport Error from \"../projects/error-404/Error404\";\nimport Message from \"../../tools/message/Message\";\n\nimport { socket, connectToDevRoom } from '../../socketCore';\n\nimport { faPlay } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { request } from \"../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class View extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      app: false,\n      user: false,\n      err: false,\n      errMessage: null,\n    }\n\n    /* find app id and devMode */\n    this.id = this.props.location.pathname.split('/')[2];\n    let devMode = this.props.location.search.split('?devMode=')[1];\n    devMode === 'false'\n      ? this.devMode = false\n      : this.devMode = true;\n\n  }\n\n  render() {\n\n    /* if app isn`t being */\n    if((!this.state.app || !this.state.user) && !this.state.err) {\n      return (\n        <div style={{ width: '100vw', height: '100vh', backgroundColor: 'white' }}/>\n      );\n    }\n\n    /* any error */\n    if(this.state.err) {\n      return (\n        <div style={{ width: '100vw', height: '100vh' }}>\n          <Message type={false}\n                   text=\"Ошибка открытия приложения\"\n                   underText={ this.state.errMessage }\n                   center={true}/>\n        </div>\n      );\n    }\n\n    return (\n      <div style={{ width: '100vw', height: '100vh', backgroundColor: 'white' }}>\n        <FontAwesomeIcon icon={ faPlay } style={{ display: 'none'}}/>\n        <Interpreter\n          app = { this.state.app }\n          id=\"interpreter-mobile\"\n          devMode={ this.devMode }\n          user={ this.state.user }\n          appId={ this.id }/>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n\n    /* download app and user */\n    if (!this.state.app) {\n      let name = 'cache-';\n      if (this.devMode) { name = 'update-'; }\n      const app = JSON.parse(localStorage.getItem(name + this.id));\n      const user = JSON.parse(localStorage.getItem('user'));\n\n      if (app && user) {\n        this.setState({ app, user });\n      } else {\n        request('/api/get_app', { appId: this.id })\n          .then(res => res.json()).then(body => {\n          if (body.status === 'ok') {\n            this.setState({ app: body.app, user: body.user });\n          } else {\n            this.setState({ err: true, errMessage: body.message });\n            console.log('Ahtung in downloading app!');\n          }\n        }).catch(err => {\n          console.log('Ahtung in downloading app!');\n          this.setState({ err: true, errMessage: 'Проверьте соединение с интернетом' });\n        });\n      }\n    }\n\n    if (!this.devMode) { return; }\n\n    /* connect to devRoom */\n    connectToDevRoom(this.id);\n\n    /* update appCode */\n    socket.on('updateAppCode', data => {\n      if (data.roomId === 'dev=' + this.id) {\n        window.location.reload();\n      }\n    });\n  }\n}","/* React */\nimport React from 'react';\n\nimport { Link } from \"react-router-dom\";\n\nimport RegWindow from '../register/RegWindow/reg-window';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFire, faWrench, faUsers, faShip } from \"@fortawesome/free-solid-svg-icons\";\n\n/* Component */\nexport default class Lending extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state ={\n      page: 0,\n      deltaY: 0,\n      deltaTouch: false,\n      oldScreenX: false,\n    }\n\n    // bind\n    this.swipe = this.swipe.bind(this);\n    this.swipeEnd = this.swipeEnd.bind(this);\n  }\n\n  render() {\n\n    const width = document.documentElement.clientWidth;\n    return (\n      <div className=\"lending-mobile-wrap\">\n        <article className=\"lending lending-mobile\" style={{ marginLeft: this.state.page * width + 'px' }}>\n          <header className=\"lending-header\">\n            <nav className=\"lending-header_nav\">\n              <Link to=\"/sign_in\">вход</Link>\n              <Link to=\"/sign_up\">регистрация</Link>\n              <Link to=\"/doc\">документация</Link>\n            </nav>\n            <main>\n              <div className=\"box-title\" style={{ transform: \"scale(2)\" }}>\n                <img src=\"./images/appex.svg\" alt=\"a\" className=\"box-title__img\" />\n                <span className=\"box-title__text\"> ppex </span>\n              </div>\n              <span className=\"lending-description\">\n                Новейшая система умного дома для <br/> самодельных проектов\n              </span>\n            </main>\n            <div className=\"lending-header_down lending-header_down__animate\">\n              <div className=\"lending-header_swipe\"/>\n            </div>\n          </header>\n          <section className=\"lending-section\">\n            <div className=\"lending-text\">\n              <div className=\"lending-text_title\">Быстрота</div>\n              <div className=\"lending-text_main\">\n                Система умного дома appex разрабатывается с упором на быстродействие. Благодаря использованию современных технологий, тщательной оптимизации и гибкости системы через неё можно управлять различными устройствами прямо в реальном времени. Теперь Вашими дронами и роботами можно управлять через интернет из любой точки земного шара!\n              </div>\n            </div>\n            <div className=\"lending-icon\">\n              <FontAwesomeIcon icon={ faFire } />\n            </div>\n          </section>\n          <section className=\"lending-section\">\n            <div className=\"lending-text\">\n              <div className=\"lending-text_title\">Кастомизируемость</div>\n              <div className=\"lending-text_main\">\n                С помощью магии HTML5 и CSS3 Вы можете создавать любые интерфейсы для своих приложений во встроенном редакторе кода. Следом добавьте любую логику на JS, а затем оживите всё это с помощью простого встроенного класса App. Не знаете web? Для этого случая имеется набор готовых элементов от кнопок до иконок. Воплотите все свои задумки в жизнь!\n              </div>\n            </div>\n            <div className=\"lending-icon\">\n              <FontAwesomeIcon icon={ faWrench } />\n            </div>\n          </section>\n          <section className=\"lending-section\">\n            <div className=\"lending-text\">\n              <div className=\"lending-text_title\">Сообщество</div>\n              <div className=\"lending-text_main\">\n                Обычно умные дома создаются без четкого разделения на устройства, но, как Вы уже поняли, в appex для каждого отдельного устройства создается отдельное приложение. Это позволяет любому пользователю делиться какими угодно частями своего умного дома. Со временем сообщество будет возрастать, а в магазине Вы сможете найти готовое приложение под свои задачи.\n              </div>\n            </div>\n            <div className=\"lending-icon\">\n              <FontAwesomeIcon icon={ faUsers } />\n            </div>\n          </section>\n          <section className=\"lending-section\">\n            <div className=\"lending-text\">\n              <div className=\"lending-text_title\">Свобода</div>\n              <div className=\"lending-text_main\">\n                В appex практически нет рамок, а следовательно, нет и ограничений.\n                Это бесплатный open source проект. Вы можете создавать сколько угодно приложений любой сложности, подключать сколько угодно устройств и совершать до 600 запросов на сервер в минуту. Этого достаточно, чтобы Вас ограничивало только воображение!\n              </div>\n            </div>\n            <div className=\"lending-icon\">\n              <FontAwesomeIcon icon={ faShip } />\n            </div>\n          </section>\n          <section className=\"lending-section\">\n            <RegWindow/>\n          </section>\n        </article>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"touchmove\", this.swipe);\n    document.addEventListener(\"touchend\", this.swipeEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"touchmove\", this.swipe);\n    document.removeEventListener(\"touchend\", this.swipeEnd);\n  }\n\n  swipe(event) {\n    if (!this.state.oldScreenX) {\n      this.setState({ oldScreenX: event.touches[0].screenX });\n    } else {\n      this.setState({ deltaTouch: event.touches[0].screenX });\n    }\n  }\n\n  swipeEnd(event) {\n    const delta = this.state.oldScreenX - this.state.deltaTouch;\n    this.setState({ oldScreenX: false, deltaTouch: 0 });\n    if (delta > 50 && this.state.page > -5) {\n      this.setState({ page: --this.state.page });\n    }\n    if (delta < -50 && this.state.page < 0) {\n      this.setState({ page: ++this.state.page });\n    }\n  }\n}","/* React */\nimport React from 'react';\n\nimport { Link } from \"react-router-dom\";\n\nimport RegWindow from '../register/RegWindow/reg-window';\n\n/* Component */\nexport default class Lending extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state ={\n      page: 0,\n      deltaY: 0,\n    }\n\n    // bind\n    this.wheel = this.wheel.bind(this);\n    this.keydown = this.keydown.bind(this);\n  }\n\n  render() {\n\n    const height = document.documentElement.clientHeight;\n    return (\n      <article className=\"lending\">\n        <header style={{ marginTop: this.state.page * height + 'px' }} className=\"lending-header\">\n          <nav className=\"lending-header_nav\">\n            <Link to=\"/sign_in\">вход</Link>\n            <Link to=\"/sign_up\">регистрация</Link>\n            <Link to=\"/main\">главная</Link>\n            <Link to=\"/doc\">документация</Link>\n          </nav>\n          <main>\n            <div className=\"box-title\" style={{ transform: \"scale(2)\" }}>\n              <img src=\"./images/appex.svg\" alt=\"a\" className=\"box-title__img\" />\n              <span className=\"box-title__text\"> ppex </span>\n            </div>\n            <span className=\"lending-description\">\n              Новейшая система умного дома для самодельных проектов. <br/>\n              Github: <a href=\"https://github.com/andaran/appex-system/\">\n                github.com/andaran/appex-system</a>\n            </span>\n          </main>\n          <div className='lending-header_down'>\n            <div className=\"lending-header_space lending-header_space__animate\"> space </div>\n          </div>\n        </header>\n        <section className=\"lending-section\">\n          <div className=\"lending-text\">\n            <div className=\"lending-text_title\">Быстрота</div>\n            <div className=\"lending-text_main\">\n              Система умного дома appex разрабатывается с упором на быстродействие. Благодаря использованию современных технологий, тщательной оптимизации и гибкости системы через неё можно управлять различными устройствами прямо в реальном времени. Теперь Вашими дронами и роботами можно управлять через интернет из любой точки земного шара!\n            </div>\n          </div>\n          <div className='lending-header_down'>\n            <div className=\"lending-header_space\"> space </div>\n            <div className=\"lending-header_arrow\"> ▼ </div>\n            <div className=\"lending-header_arrow\"> ▲ </div>\n          </div>\n        </section>\n        <section className=\"lending-section\">\n          <div className=\"lending-text\">\n            <div className=\"lending-text_title\">Кастомизируемость</div>\n            <div className=\"lending-text_main\">\n              С помощью магии HTML5 и CSS3 Вы можете создавать любые интерфейсы для своих приложений во встроенном редакторе кода. Следом добавьте любую логику на JS, а затем оживите всё это с помощью простого встроенного класса App. Не знаете web? Для этого случая имеется набор готовых элементов от кнопок до иконок. Воплотите все свои задумки в жизнь!\n            </div>\n          </div>\n          <div className='lending-header_down'>\n            <div className=\"lending-header_space\"> space </div>\n            <div className=\"lending-header_arrow\"> ▼ </div>\n            <div className=\"lending-header_arrow\"> ▲ </div>\n          </div>\n        </section>\n        <section className=\"lending-section\">\n          <div className=\"lending-text\">\n            <div className=\"lending-text_title\">Сообщество</div>\n            <div className=\"lending-text_main\">\n              Обычно умные дома создаются без четкого разделения на устройства, но, как Вы уже поняли, в appex для каждого отдельного устройства создается отдельное приложение. Это позволяет любому пользователю делиться какими угодно частями своего умного дома. Со временем сообщество будет возрастать, а в магазине Вы сможете найти готовое приложение под свои задачи.\n            </div>\n          </div>\n          <div className='lending-header_down'>\n            <div className=\"lending-header_space\"> space </div>\n            <div className=\"lending-header_arrow\"> ▼ </div>\n            <div className=\"lending-header_arrow\"> ▲ </div>\n          </div>\n        </section>\n        <section className=\"lending-section\">\n          <div className=\"lending-text\">\n            <div className=\"lending-text_title\">Свобода</div>\n            <div className=\"lending-text_main\">\n              В appex практически нет рамок, а следовательно, нет и ограничений.\n              Это бесплатный open source проект. Вы можете создавать сколько угодно приложений любой сложности, подключать сколько угодно устройств и совершать до 600 запросов на сервер в минуту. Этого достаточно, чтобы Вас ограничивало только воображение!\n            </div>\n          </div>\n          <div className='lending-header_down'>\n            <div className=\"lending-header_space\"> space </div>\n            <div className=\"lending-header_arrow\"> ▼ </div>\n            <div className=\"lending-header_arrow\"> ▲ </div>\n          </div>\n        </section>\n        <section className=\"lending-section\">\n          <RegWindow/>\n        </section>\n      </article>\n    );\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"wheel\", this.wheel);\n    document.addEventListener(\"keydown\", this.keydown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"wheel\", this.wheel);\n    document.removeEventListener(\"keydown\", this.keydown);\n  }\n\n  wheel(event) {\n    let deltaY = this.state.deltaY + event.wheelDeltaY;\n    let page = Math.floor(deltaY / 2000) + 1;\n    if (page < -5) {\n      page = -5;\n      deltaY = this.state.deltaY;\n    }\n    if (page > 0) {\n      page = 0;\n      deltaY = this.state.deltaY;\n    }\n    this.setState({ deltaY, page });\n  }\n\n  keydown(event) {\n    if (event.code === 'Space' && this.state.page === -5) {\n      return this.setState({ page: 0 });\n    }\n    if ((event.code === 'Space' || event.code === 'ArrowDown') && this.state.page > -5) {\n      this.setState({ page: --this.state.page });\n    }\n    if (event.code === 'ArrowUp' && this.state.page < 0) {\n      this.setState({ page: ++this.state.page });\n    }\n  }\n}","/* React */\nimport React from 'react';\n\nimport LendingMobile from './LendingMobile';\nimport LendingPC from './LendingPC';\nimport { request } from \"../../tools/apiRequest/apiRequest\";\n\n/* Component */\nexport default class Lending extends React.Component {\n  constructor(props) {\n    super(props);\n\n  }\n\n  render() {\n\n    /* find device */\n    const devices = new RegExp('Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini', \"i\");\n\n    if (devices.test(navigator.userAgent)) {\n\n      /* redirect to main page */\n      /*request(`/api/get_user`, {})\n        .then(res => res.json()).then(body => {\n          if (body.status === 'ok') {\n            window.location.pathname = 'main';\n          }\n        }).catch(err => {});*/\n\n      return <LendingMobile/>;\n    }\n    return <LendingPC/>\n  }\n}","import React from 'react';\n\n/* Component */\nexport default class Error404 extends React.Component {\n  render() {\n    return (\n      <div className=\"error-404\">\n        <div>\n          <div className=\"error-404__message\">404</div>\n          <span className=\"error-404__text\">\n            Такой страницы не существует :(\n          </span>\n        </div>\n      </div>\n    );\n  }\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","export const FETCH_USER_PENDING = 'FETCH_USER_PENDING';\nexport const FETCH_USER_FULFILLED = 'FETCH_USER_FULFILLED';\nexport const FETCH_USER_REJECTED = 'FETCH_USER_REJECTED';","export const FETCH_ROOMS_PENDING = 'FETCH_ROOMS_PENDING';\nexport const FETCH_ROOMS_FULFILLED = 'FETCH_ROOMS_FULFILLED';\nexport const FETCH_ROOMS_REJECTED = 'FETCH_ROOMS_REJECTED';","import { createStore, combineReducers, applyMiddleware } from 'redux';\n\nimport { createPromise } from 'redux-promise-middleware';\nimport { createLogger } from 'redux-logger';\n\n/*   ---==== Reducers ====---   */\n\nimport { projectsReducer } from './Reducers/projectsReducer';\nimport { projectsModalReducer } from \"./Reducers/projectsModalReducer\";\nimport { userReducer } from './Reducers/userReducer';\nimport { roomsReducer } from './Reducers/roomsReducer';\nimport { appStateReducer } from './Reducers/appStateReducer';\n\n/*   --=== End reducers ===--   */\n\nconst middleware = applyMiddleware(/* createLogger(), */ createPromise());\n\nconst reducers = combineReducers({\n\n    /* reducers here */\n    projects: projectsReducer,\n    projectsModal: projectsModalReducer,\n    userData: userReducer,\n    rooms: roomsReducer,\n    appState: appStateReducer,\n\n});\n\nexport default createStore(reducers, middleware);","import * as PROJECTS from '../Constants/projectsConstants';\n\nexport function projectsReducer(state = {\n  data: [],\n  isFetching: false,\n  error: false,\n  fulfilled: false,\n}, action) {\n  switch (action.type) {\n    case PROJECTS.FETCH_PROJECTS_PENDING:\n      return { ...state, isFetching: true, error: false, fulfilled: false };\n\n    case PROJECTS.FETCH_PROJECTS_FULFILLED:\n      return { ...state, isFetching: false, data: action.payload, error: false, fulfilled: true };\n\n    case PROJECTS.FETCH_PROJECTS_REJECTED:\n      return { ...state, isFetching: false, data: action.payload, error: true };\n\n    case PROJECTS.CHANGE_PROJECTS:\n      return {...state, data: action.payload};\n  }\n\n  return state;\n}","import { SWITCH_MODAL_STATE } from '../Constants/newProjectModalConstants';\n\nexport function projectsModalReducer(state = {\n  id: '',\n  status: false,\n  mode: 'new',\n  app: {},\n}, action) {\n  switch (action.type) {\n    case SWITCH_MODAL_STATE:\n      return { ...state, status: action.payload.status, mode: action.payload.mode, app: action.payload.app };\n  }\n\n  return state;\n}","import * as USER from '../Constants/userConstants';\nimport { cloneDeep } from 'lodash';\n\nexport function userReducer(state = {\n  user: false,\n  status: 'loading',\n  isFetching: false,\n  err: false,\n}, action) {\n  switch (action.type) {\n    case USER.FETCH_USER_PENDING:\n      return cloneDeep({ ...state, isFetching: true });\n\n    case USER.FETCH_USER_FULFILLED:\n      return cloneDeep({ ...state, isFetching: false, ...action.payload  });\n\n    case USER.FETCH_USER_REJECTED:\n      return cloneDeep({ ...state, isFetching: false, error: true });\n  }\n\n  return state;\n}","import * as ROOMS from '../Constants/roomsConstants';\n\nexport function roomsReducer(state = {\n  data: [],\n  isFetching: false,\n  error: false,\n  fulfilled: false,\n}, action) {\n  switch (action.type) {\n    case ROOMS.FETCH_ROOMS_PENDING:\n      return { ...state, isFetching: true, error: false, fulfilled: false };\n\n    case ROOMS.FETCH_ROOMS_FULFILLED:\n      return { ...state, isFetching: false, data: action.payload, error: false, fulfilled: true };\n\n    case ROOMS.FETCH_ROOMS_REJECTED:\n      return { ...state, isFetching: false, data: action.payload, error: true };\n  }\n\n  return state;\n}","import * as APP from '../Constants/appStateConstants';\n\nexport function appStateReducer(state = {\n  state: 'closed',\n  id: '',\n  type: 'app',\n}, action) {\n  switch (action.type) {\n    case APP.CHANGE_APP_STATE:\n      return { ...state, ...action.payload };\n  }\n\n  return state;\n}","/*\n *  Main page of appex-system app\n *  Author: Andrey ( https://github.com/andaran )\n *  Development started on 11.11.2020 19:10\n *  \n */\n\n/* React */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n/* Components */\nimport Register from './Components/register/RegWrap/reg-wrap';\nimport Login from './Components/login/LogWrap/log-wrap';\nimport ChangePass from './Components/change_pass/ChangePassWrap/change-pass-wrap';\nimport Projects from './Components/projects/projects-wrap/ProjectsWrap';\nimport ProjectPage from './Components/projects/project-page/ProjectPage';\nimport PrivateRoute from \"./Components/additComponents/PrivateRoute\";\nimport MainPage from './Components/main/main-page/MainPage';\nimport View from './Components/view/View';\nimport Lending from './Components/lending/Lending';\nimport DocsPage from './Components/docs/docs-page/DocsPage';\nimport Error404 from './Components/additComponents/Error404';\n\n/* Libraries */\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport reportWebVitals from './reportWebVitals';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\n\nimport { Provider } from 'react-redux';\nimport store from './store';\n\n/* Styles */\nimport './Styles/style.sass';\n\n\n\n/*   ---==== Render ====---   */\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <Switch>\n        <Route exact path=\"/\" component={ Lending }/>\n        <Route exact path=\"/sign_up\" component={ Register }/>\n        <Route exact path=\"/sign_in\" component={ Login }/>\n        <Route exact path=\"/change_password\" component={ ChangePass }/>\n        <Route exact path=\"/view/:id\" component={ View }/>\n        <Route exact path=\"/doc\" component={ DocsPage }/>\n        <Route exact path=\"/projects\">\n          <PrivateRoute> <Projects/> </PrivateRoute>\n        </Route>\n        <Route exact path=\"/projects/:id\">\n          <PrivateRoute> <ProjectPage/> </PrivateRoute>\n        </Route>\n        <Route exact path=\"/main\">\n          <PrivateRoute> <MainPage/> </PrivateRoute>\n        </Route>\n        <Route component={ Error404 }/>\n      </Switch>\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n\n\n\n/*   ---==== Other features ====---   */\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();","/* React */\nimport React from 'react';\n\n/* Component */\nexport default class Image extends React.Component {\n\n  render() {\n    return (\n      <img className=\"doc__image\"\n           src={`./images/doc/${ this.props.name }`}\n           alt=\"Изображение из документации\"/>\n    );\n\n  }\n\n  componentDidMount() {\n\n  }\n}","import * as PROJECTS from '../Constants/projectsConstants';\n\n/* develop mode */\nlet devMode = false;\nif (window.location.port === '3000') {\n  devMode = true;\n}\n\nexport function fetchProjects(username, id) {\n  const body = JSON.stringify({ username, id });\n\n  let request;\n  devMode\n    ? request = request = fetch('../testJson/projects.json').then(res => res.json())\n    : request = fetch('/api/get_projects', { method: 'POST', body }).then(res => res.json());\n\n  return {\n    type: 'FETCH_PROJECTS',\n    payload: request,\n  }\n}\n\nexport function changeProjects(changedProjects) {\n  return {\n    type: PROJECTS.CHANGE_PROJECTS,\n    payload: changedProjects\n  }\n}","/* React */\nimport React from 'react';\n\n/* Component */\nexport default class DocItem extends React.Component {\n\n  render() {\n    return <div className=\"doc__item\" id={ this.props.id }>\n      <h2> { this.props.title } </h2>\n      { this.props.children }\n    </div>\n  }\n\n  componentDidMount() {\n\n  }\n}","import * as APP from '../Constants/appStateConstants';\n\nexport function changeAppState(changedState) {\n  return {\n    type: APP.CHANGE_APP_STATE,\n    payload: changedState\n  }\n}","\n/* import sockets */\nimport io from 'socket.io-client';\nimport EventEmitter from 'events';\n\nconst port = 3001;\nconst socket = io();\n\nexport function connectToDevRoom(roomId) {\n  socket.emit('connectToDevRoom', { roomId: 'dev=' + roomId });\n}\n\nexport function updateAppCode(roomId) {\n  socket.emit('updateAppCode', { roomId: 'dev=' + roomId });\n}\n\nexport { socket };\n\nexport class App extends EventEmitter {\n\n  /* private fields */\n  #app;\n\n  constructor(app, roomSettings) {\n\n    super();\n\n    this.#app = app;\n    this.roomSettings = roomSettings;\n\n    this.state = false;\n    this.update = false;\n    this.error = false;\n    this.roomId = false;\n    this.roomPass = false;\n    this.settings = {};\n\n    this.socket = socket;\n\n    // bind\n    this.init = this.init.bind(this);\n    this.send = this.send.bind(this);\n    this.start = this.start.bind(this);\n  }\n\n  /* get app object */\n  get app() { return this.#app; }\n\n  /* start app */\n  start() {\n\n    /* check params */\n    if (!this.state) { return console.log('[Err] Отсутствует state!'); }\n    if (!this.roomSettings) { return console.log('[Err] Отсутствуют данные комнаты!'); }\n\n    const socket = this.socket;\n    const roomId = this.roomSettings.body.roomId;\n    const roomPass = this.roomSettings.body.roomPass;\n\n    console.log('[log] Старт приложения ...');\n\n    /* change settings */\n    const defaultSettings = {\n      awaitResponse: true,\n    }\n    this.settings = { ...defaultSettings, ...this.settings };\n\n    /* connect to room */\n    socket.emit('connectToRoom', { roomId, roomPass, currentState: this.state });\n  }\n\n  send(params) {\n\n    const roomId = this.roomSettings.body.roomId;\n    const roomPass = this.roomSettings.body.roomPass;\n\n    this.socket.emit('updateState', { roomId, roomPass, params });\n    console.log('[log] Отправка параметров ...');\n\n    if (!this.settings.awaitResponse) {\n      this.state = { ...this.state, ...params };\n      this.update ? this.update(this.state) : this.emit('update', this.state);\n      console.log('[log] Обновление состояния ...');\n    }\n  }\n\n  invertProperty(property, room = false) {\n\n    const roomId = room ? room.roomId : this.roomSettings.body.roomId;\n    const roomPass = room ? room.roomPass : this.roomSettings.body.roomPass;\n\n    this.socket.emit('invertProperty', { roomId, roomPass, property });\n    console.log('[log] Отправка параметров ...');\n  }\n\n  changeNumericProperty(property, value, room = false) {\n\n    const roomId = room ? room.roomId : this.roomSettings.body.roomId;\n    const roomPass = room ? room.roomPass : this.roomSettings.body.roomPass;\n\n    this.socket.emit('changeNumericProperty', { roomId, roomPass, property, value });\n    console.log('[log] Отправка параметров ...');\n  }\n\n  init() {\n\n    /* init app */\n    socket.on('connectSuccess', state => {\n      this.state = { ...this.state, ...state };\n      this.update ? this.update(this.state) : this.emit('update', this.state);\n      console.log('[log] Приложение подключено!');\n\n      /* ping test */\n      this.testPingTime = Date.now();\n      this.socket.emit('ping', {});\n    });\n\n    /* update */\n    socket.on('updateState', state => {\n\n      /* update if id is true */\n      if (state.roomId === this.roomSettings.body.roomId) {\n        this.state = { ...this.state, ...state.params };\n        this.update ? this.update(this.state) : this.emit('update', this.state);\n        console.log('[log] Обновление состояния ...');\n      }\n    });\n\n    /* error */\n    socket.on('err', err => {\n      this.error ? this.error(err) : this.emit('err', err);\n      console.log(`[Err] ${ err.type }`);\n    });\n\n    /* ping test */\n    socket.on('ping', () => {\n      const pingTime = Date.now() - this.testPingTime;\n      console.log(`[log] Пинг: ${ pingTime }мс.`);\n    });\n  }\n}\n","/* React */\nimport React from 'react';\n\n/* Component */\nexport default class Button extends React.Component {\n  render() {\n\n    /* DOCUMENTATION:\n    {\n      background: 'anyBackgroundColor',\n      size: 'md',  // sm - 30px, md - 50px, lg - 70px\n    }\n    */\n\n    return (\n      <div\n        className={`preset-button preset-button_${ this.props.size }`}\n        id={ this.props.id }\n        style = {{ backgroundColor: this.props.background }}>\n        { this.props.children }\n      </div>\n    );\n  }\n}","/* React */\nimport React from 'react';\n\nimport {faCheck, faTimes} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\n/* Component */\nexport default class Message extends React.Component {\n  render() {\n\n    /* change BG color */\n    let color = '#e74c3c';\n    if ( this.props.type ) { color = '#2ecc71'; }\n\n    /* change icon */\n    let icon = <FontAwesomeIcon icon={ faTimes }/>;\n    if ( this.props.type ) { icon = <FontAwesomeIcon icon={ faCheck }/>; }\n\n    /* center */\n    let center = 'message-box';\n    if ( this.props.center ) { center =  'message-box message-box_center'}\n\n    /* under text */\n    let underText = null;\n    if ( this.props.underText ) { underText = this.props.underText; }\n\n    return (\n      <div className=\"message\">\n        <div className=\"message-background\"/>\n        <div className={ center } style={{ backgroundColor: color }}>\n          <div className=\"message-box__text\"> { this.props.text } </div>\n          <div className=\"message-box__under-text\"> { underText } </div>\n          <div className=\"message-box__icon\"> { icon } </div>\n        </div>\n      </div>\n    );\n  }\n}","export const FETCH_PROJECTS_PENDING = 'FETCH_PROJECTS_PENDING';\nexport const FETCH_PROJECTS_FULFILLED = 'FETCH_PROJECTS_FULFILLED';\nexport const FETCH_PROJECTS_REJECTED = 'FETCH_PROJECTS_REJECTED';\nexport const CHANGE_PROJECTS = 'CHANGE_PROJECTS';","\n/* develop mode */\nlet devMode = false;\nif (window.location.port === '3000') {\n  devMode = true;\n}\n\nexport function fetchRooms() {\n  let request;\n  devMode\n    ? request = fetch('../testJson/rooms.json').then(res => res.json())\n    : request = fetch('/api/get_rooms', { method: 'POST' }).then(res => res.json());\n\n  return {\n    type: 'FETCH_ROOMS',\n    payload: request,\n  }\n}","import { SWITCH_MODAL_STATE } from '../Constants/newProjectModalConstants';\n\nexport function switchModalState(state, mode, app) {\n  return {\n    type: SWITCH_MODAL_STATE,\n    payload: { status: !state, mode, app },\n  }\n}","import { request } from '../apiRequest/apiRequest';\n\n\n\n/*   ---==== AlertsView ====---   */\n\nexport default class AlertsView {\n  constructor(mess, component, fetchUser) {\n    this.mess = mess;\n    this.component = component;\n    this.fetchUser = fetchUser;\n\n    // bind\n    this.check = this.check.bind(this);\n    this.find = this.find.bind(this);\n    this.step = this.step.bind(this);\n    this.end = this.end.bind(this);\n  }\n\n  run() {\n    const chains = this.find(this.mess);\n    if (!chains.config) { return false; }\n    this.chains = chains.alertChains;\n    this.config = chains.config;\n\n    const alerts = [];\n\n    chains.alertChains.forEach(elem => {\n      if (elem.type !== 'CONFIGURATION') { alerts.push(elem); }\n    });\n\n    this.step(alerts);\n  }\n\n  check(chain) {\n    return chain.find(elem => elem.type === 'CONFIGURATION'\n      && elem.component === this.component);\n  }\n\n  find(chains) {\n    let config = false;\n    let alertChains = false;\n    for (const chain of chains) {\n      if (this.check(chain)) {\n        config = this.check(chain);\n        alertChains = chain;\n        break;\n      }\n    }\n    return { config, alertChains };\n  }\n\n  sendAlert(conf) {\n\n    /* generate alert */\n    const elem = document.createElement('div');\n    elem.id = 'system-alert-wrap';\n    elem.innerHTML = `\n        <div id=\"system-alert\">\n            <div id=\"system-alert__main\">\n                <h4>${ conf.title }</h4>\n                ${ conf.text }\n            </div>\n            <div id=\"system-alert__buttons\">\n                <div id=\"button-close\">закрыть</div>\n                <div id=\"button-next\">далее</div>\n            </div>\n        </div>  \n    `\n    document.getElementById('root').append(elem);\n\n    /* play js */\n    if (conf.code) {\n      try {\n        const code = Function(conf.code);\n        code();\n      } catch (e) {\n        console.log('Ahtung in play code', e);\n      }\n    }\n\n    return elem;\n  }\n\n  sendPopUp(conf) {\n\n    /* highlight target */\n    const target = document.querySelector(conf.target);\n    if (!target) { return false; }\n\n    target.classList.add('top-index');\n\n    /* generate pop up */\n    const elem = document.createElement('div');\n    elem.id = 'system-pop-up-wrap';\n    elem.innerHTML = `\n        <div id=\"system-pop-up\">\n            <div id=\"system-pop-up-corner-wrap\"> \n                <div id=\"system-pop-up-corner\"></div>\n            </div> \n            <div id=\"system-alert__main\">\n                ${ conf.text }\n            </div>\n            <div id=\"system-alert__buttons\">\n                <div id=\"button-close\">закрыть</div>\n                <div id=\"button-next\">далее</div>\n            </div>\n        </div>  \n    `\n    document.getElementById('root').append(elem);\n\n    /* move pop up */\n    const cords = target.getBoundingClientRect();\n    const popUp = elem.querySelector(\"#system-pop-up\");\n    const corner = elem.querySelector(\"#system-pop-up-corner\");\n    const width = document.documentElement.offsetWidth;\n    const height = document.documentElement.offsetHeight;\n\n    if (cords.right > (width / 2)) {\n      corner.style.right = '-10px';\n      popUp.style.left = cords.left - popUp.offsetWidth - 30 + 'px';\n    } else {\n      corner.style.left = '-10px';\n      popUp.style.left = cords.right + 30 + 'px';\n    }\n\n    const deltaHeight = (popUp.offsetHeight - cords.height) / 2;\n    let top = cords.y - deltaHeight;\n    if (top < 10) {\n      top = 10\n      corner.style.top = 10 + 'px';\n    }\n    if (top > height - popUp.offsetHeight - 10) {\n      top = height - popUp.offsetHeight - 10\n      corner.style.bottom = 10 + 'px';\n    }\n    popUp.style.top = top + 'px';\n\n    /* play js */\n    if (conf.code) {\n      try {\n        const code = Function(conf.code);\n        code();\n      } catch (e) {\n        console.log('Ahtung in play code', e);\n      }\n    }\n\n    return elem;\n  }\n\n  end() {\n    request('/api/remove_alerts_chains', { name: this.config.name })\n      .then(res => res.json()).then(body => {\n        if (body.status === 'ok') {\n          this.fetchUser();\n        } else {\n          console.log('Ahtung in removing alerts chains!');\n        }\n      }).catch(err => {\n        console.log('Ahtung in removing alerts chains!');\n      });\n  }\n\n  step(alerts) {\n\n    /* add alert and event listeners */\n    new Promise((resolve) => {\n\n      /* if alerts chains done */\n      if (alerts.length <= 0) { return resolve(false) }\n\n      /* cancel alert */\n      const cancel = (elem) => {\n        elem.remove();\n        const target = document.querySelector('.top-index');\n        if (target) { target.classList.remove('top-index'); }\n        resolve(false);\n      }\n\n      /* next alert */\n      const next = (elem) => {\n        elem.remove();\n        const target = document.querySelector('.top-index');\n        if (target) { target.classList.remove('top-index'); }\n        resolve(true);\n      }\n\n      /* switch alert type */\n      const chain = alerts[0];\n      let elem;\n      switch (chain.type) {\n        case 'ALERT':\n          elem = this.sendAlert(chain);\n          break;\n        case 'POP_UP':\n          elem = this.sendPopUp(chain);\n          break;\n        default:\n          return resolve(true);\n      }\n\n      if (!elem) { resolve(true); }\n\n      const btnNext = elem.querySelector('#button-next');\n      const btnCancel = elem.querySelector('#button-close');\n\n      btnNext.onclick = () => next(elem);\n      btnCancel.onclick = () => cancel(elem);\n\n    /* if button pressed */\n    }).then(ans => {\n\n      /* end or close the alerts */\n      if (!ans) { return this.end(); }\n\n      /* go to the next alert */\n      alerts.shift();\n      this.step(alerts);\n    });\n  }\n}\n","\nexport default class LastApps {\n  constructor() {\n    this.apps = [];\n    this.index = 0;\n  }\n\n  append(app) {\n\n    if (this.apps[this.apps.length - 1] === app) { return; }\n\n    if (this.apps.length < 10) {\n      this.apps.push(app);\n    } else {\n      this.apps.shift();\n      this.apps.push(app);\n    }\n    this.index = this.apps.length - 1;\n  }\n\n  left() {\n    if (this.index > 0) {\n      this.index --;\n      return this.apps[this.index];\n    }\n    return false;\n  }\n\n  right() {\n    if (this.index < this.apps.length - 1) {\n      this.index ++;\n      return this.apps[this.index];\n    }\n    return false;\n  }\n}\n\nconst list = new LastApps;\n\nexport { list };\n","/* React */\nimport React from 'react';\n\n/* Components */\nimport { Link } from 'react-router-dom';\n\n/* Component */\nexport default class Navbar extends React.Component {\n  render() {\n    return (\n      <nav className=\"navbar\">\n        <div className=\"navbar__logo\">\n          <img src={ this.props.path } alt=\"a\" className=\"navbar__logo-img\" />\n          <span className=\"navbar__logo-text\"> ppex </span>\n        </div>\n        <div className=\"navbar__items\">\n          <div className=\"navbar__item\">\n            <Link className=\"navbar__link\" to=\"/projects\"> Проекты </Link>\n          </div>\n          <div className=\"navbar__item\">\n            <Link className=\"navbar__link\" to=\"/doc\"> Документация </Link>\n          </div>\n          <div className=\"navbar__item\">\n            <Link className=\"navbar__link\" to=\"/main\"> Главная </Link>\n          </div>\n        </div>\n      </nav>\n    );\n  }\n}","import React from 'react';\n\nimport { changeAppState } from '../../../actions/appStateActions';\nimport { connect } from \"react-redux\";\nimport { list } from \"../../../tools/LastApps/LastApps\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\n\n/* Component */\nclass AppIcon extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // bind\n    this.iconClicked = this.iconClicked.bind(this);\n  }\n\n  render() {\n    return (\n      <div className=\"app-icon\">\n        <div\n          style={{ backgroundColor: this.props.color || '#1abc9c' }}\n          id={ this.props.prefix + this.props.id }>\n          <FontAwesomeIcon icon={ Icons[this.props.icon || 'faMobile'] } />\n        </div>\n        <footer>\n          { this.props.title || 'application' }\n        </footer>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    document.getElementById(this.props.prefix + this.props.id)\n      .addEventListener('click', this.iconClicked);\n  }\n\n  iconClicked() {\n\n    /* change app state */\n    const appState = {\n      state: 'opened',\n      id: this.props.id || 'system-app',\n      type: this.props.type,\n    }\n    this.props.changeAppState(appState);\n\n    if (this.props.type === 'app') {\n      list.append(this.props.id);\n    }\n  }\n\n  componentWillUnmount() {\n    document.getElementById(this.props.prefix + this.props.id)\n      .removeEventListener('click', this.iconClicked);\n  }\n}\n\n\n\n/*   ---==== Connect to redux ====---   */\n\nfunction mapStateToProps(store) {\n  return {}\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeAppState: (changedState) => {\n      dispatch(changeAppState(changedState))\n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppIcon);","/* React */\nimport React from 'react';\n\n/* Components */\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Button from '../../../tools/button/Button';\n\nimport { connect } from 'react-redux';\nimport { switchModalState } from \"../../../actions/projectsModalActions\";\nimport { fetchUser } from '../../../actions/userActions';\nimport { fetchProjects } from \"../../../actions/projectsActions\";\n\n/* Component */\nclass CreateAppWindow extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      search: '',\n      deleteConfirm: false,\n    }\n\n    this.icon = null;\n\n    // bind\n    this.tap = this.tap.bind(this);\n    this.changeIcon = this.changeIcon.bind(this);\n    this.deleteActiveIcon = this.deleteActiveIcon.bind(this);\n    this.elementMouseOver = this.elementMouseOver.bind(this);\n    this.elementMouseLeave = this.elementMouseLeave.bind(this);\n    this.closeWindow = this.closeWindow.bind(this);\n    this.validate = this.validate.bind(this);\n    this.saveApp = this.saveApp.bind(this);\n    this.deleteConfirm = this.deleteConfirm.bind(this);\n    this.deleteApp = this.deleteApp.bind(this);\n  }\n\n  render() {\n    let icons = [];\n    let keyIndex = 0;\n\n    /* change modal mode */\n    let title = 'Создать новое приложение:';\n    if (this.props.modal.mode === 'set') { title = 'Настойки'; }\n\n    let buttons = (\n      <div id=\"buttons\" className=\"create-app-window__buttons-wrap\">\n        <Button\n          size=\"md\"\n          background=\"#e67e22\"\n          id=\"create-app-window__button-close\"> Закрыть </Button>\n        <Button\n          size=\"md\"\n          background=\"#1abc9c\"\n          id=\"create-app-window__button-save\"> Создать! </Button>\n      </div>\n    );\n\n    if (this.props.modal.mode === 'set') {\n      buttons = (\n        <div id=\"buttons\" className=\"create-app-window__buttons-wrap\">\n          <Button\n            size=\"md\"\n            background=\"#e67e22\"\n            id=\"create-app-window__button-close\"> Закрыть </Button>\n          <Button\n            size=\"md\"\n            background=\"#e74c3c\"\n            id=\"create-app-window__button-delete\"> Удалить </Button>\n          <Button\n            size=\"md\"\n            background=\"#1abc9c\"\n            id=\"create-app-window__button-save\"> Сохранить </Button>\n        </div>\n      );\n    }\n\n    let confirm = null;\n    if (this.state.deleteConfirm) {\n      confirm = (\n        <span className=\"delete-confirm\">\n          Вы точно хотите удалить приложение?\n          <Button\n            size=\"sm\"\n            background=\"#e74c3c\"\n            id=\"delete-confirm\"> Подтвердить </Button>\n        </span>\n      );\n    }\n\n    /* search icons */\n    if (this.state.search.length > 0) {\n      const reg = new RegExp(this.state.search);\n      const wrap = document.getElementById('create-app-window__icons');\n      for (let icon in Icons) {\n        if (reg.test(icon.toLowerCase()) && icon !== 'fas' && icon !== 'prefix') {\n          icons.push(\n            <div className=\"create-app-window__icon\"\n                 id = {`create-app-window__icon-${keyIndex}`}\n                 key = { keyIndex }\n                 onClick = { this.changeIcon }>\n              <div className=\"create-app-window__icon-div\"\n                   data-icon={ icon }\n                   onMouseOver= { this.elementMouseOver }\n                   onMouseLeave = { this.elementMouseLeave }>\n                <FontAwesomeIcon icon={Icons[icon]}/></div>\n              <span>{icon.slice(2, icon.length)}</span>\n            </div>);\n          keyIndex++;\n        }\n      }\n    }\n\n    if (icons.length === 0) icons = <div className=\"create-app-window__no-icons\"> Нет иконок с таким именем! </div>;\n\n    let storeVisibility = (\n      <div className=\"create-app-window__item create-app-window__switch-item\">\n        <span>Показывать в магазине: </span>\n        <div>\n          <label className=\"appex-preset-switch create-app-window__switch\">\n            <input type=\"checkbox\" className=\"appex-preset-switch__input\" id=\"app-download\"/>\n            <div className=\"appex-preset-switch__handle\"/>\n          </label>\n        </div>\n      </div>\n    );\n    if (this.props.modal.mode === 'set' && this.props.type === 'clone') {\n      storeVisibility = null;\n    }\n\n    return (\n      <div className=\"modal-content-wrapper create-app-window\" id=\"create-app-window\">\n        <div className=\"create-app-window__title\"><h4> { title } </h4></div>\n        <div className=\"create-app-window__input-item\">\n          <span>Имя приложения: </span>\n          <input type=\"text\" autoComplete=\"false\" id=\"app-name\"/>\n        </div>\n        { storeVisibility }\n        <div className=\"create-app-window__item\">\n          <span>Цвет иконки: </span>\n          <div id=\"create-app-window__colors\">\n            <input type=\"radio\" name=\"change-color\" value=\"#1abc9c\" className=\"create-app-window__input-#1abc9c\"/>\n            <input type=\"radio\" name=\"change-color\" value=\"#2ecc71\" className=\"create-app-window__input-#2ecc71\"/>\n            <input type=\"radio\" name=\"change-color\" value=\"#3498db\" className=\"create-app-window__input-#3498db\"/>\n            <input type=\"radio\" name=\"change-color\" value=\"#9b59b6\" className=\"create-app-window__input-#9b59b6\"/>\n            <input type=\"radio\" name=\"change-color\" value=\"#f1c40f\" className=\"create-app-window__input-#f1c40f\"/>\n            <input type=\"radio\" name=\"change-color\" value=\"#e67e22\" className=\"create-app-window__input-#e67e22\"/>\n            <input type=\"radio\" name=\"change-color\" value=\"#e74c3c\" className=\"create-app-window__input-#e74c3c\"/>\n            <input type=\"radio\" name=\"change-color\" value=\"#95a5a6\" className=\"create-app-window__input-#95a5a6\"/>\n          </div>\n        </div>\n        <div className=\"create-app-window__big-item\">\n          <span>Значек иконки: </span>\n          <input type=\"text\" placeholder=\"название по-английски\" id=\"create-app-window__icon-name\" autoComplete=\"false\"/>\n          <div id=\"create-app-window__icons\" className=\"create-app-window__icons\">\n            { icons }\n          </div>\n          <small className=\"create-app-window__small-text\">\n            Используются значки <a href=\"https://fontawesome.com/\">fontawesome</a>\n          </small>\n        </div>\n        <div className=\"create-app-window__buttons\">\n          <div className=\"create-app-window__err-text\" id=\"create-app-window__err-text\"/>\n          { confirm }\n          { buttons }\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n\n    /* search icon by name */\n    const input = document.getElementById('create-app-window__icon-name');\n    input.addEventListener('keyup', this.tap);\n\n    document.getElementById('create-app-window__button-close')\n      .addEventListener('click', this.closeWindow);\n\n    document.getElementById('create-app-window__button-save')\n      .addEventListener('click', this.saveApp);\n\n    /* set settings if mode === 'set' */\n    if (this.props.modal.mode === 'set') {\n      document.getElementById('app-name').value = this.props.title;\n\n      if (this.props.type !== 'clone') {\n        document.getElementById('app-download').checked = this.props.storeVisibility;\n      }\n\n      let color = document\n        .getElementById('create-app-window__colors')\n        .querySelector(`input[value=\"${ this.props.color }\"]`);\n      color.checked = true;\n\n      document.getElementById('create-app-window__icon-name').value = this.props.icon.substring(2);\n      this.tap();\n\n      process.nextTick(() => {\n        let icon = document.querySelector(`.create-app-window__icon-div[data-icon=\"${ this.props.icon }\"]`);\n        this.elementMouseOver({ target: icon });\n        this.changeIcon({ target: icon });\n        this.elementMouseLeave({ target: icon });\n      });\n\n      /* delete app */\n      document\n        .getElementById('create-app-window__button-delete')\n        .addEventListener('click', this.deleteConfirm);\n    }\n\n  }\n\n  closeWindow() {\n    this.props.switchModalState(true, 'new', {});\n  }\n\n  componentWillUnmount() {\n    const input = document.getElementById('create-app-window__icon-name');\n    input.removeEventListener('keyup', this.tap);\n    document.getElementById('create-app-window__button-close')\n      .removeEventListener('click', this.closeWindow);\n\n    if (this.props.modal.mode === 'set') {\n      document\n        .getElementById('create-app-window__button-delete')\n        .removeEventListener('click', this.deleteConfirm);\n    }\n  }\n\n  changeIcon(event) {\n    this.deleteActiveIcon();\n    if (event.target !== this.icon) {\n      this.icon = event.target;\n      event.target.classList.add('create-app-window__icon_active');\n    } else {\n      this.icon = null;\n      event.target.style.backgroundColor = '#3b4148';\n      event.target.querySelector('svg').style.backgroundColor = '#3b4148';\n      event.target.querySelector('svg').style.color = '#838a91';\n    }\n  }\n\n  deleteActiveIcon() {\n    let icons = document.getElementsByClassName('create-app-window__icon_active');\n    for (let icon of icons) {\n      icon.classList.remove('create-app-window__icon_active');\n      icon.style.backgroundColor = '#3b4148';\n      icon.querySelector('svg').style.backgroundColor = '#3b4148';\n      icon.querySelector('svg').style.color = '#838a91';\n    }\n  }\n\n  elementMouseOver(event) {\n    const colorsWrap = document.getElementById('create-app-window__colors');\n    const input = colorsWrap.querySelector('input:checked');\n    let color;\n    input === null ? color = '#3498db' : color = input.value;\n\n    event.target.style.backgroundColor = color;\n    event.target.querySelector('svg').style.backgroundColor = color;\n    event.target.querySelector('svg').style.color = '#262c31';\n  }\n\n  elementMouseLeave(event) {\n    if (event.target === this.icon) { return; }\n    event.target.style.backgroundColor = '#3b4148';\n    event.target.querySelector('svg').style.backgroundColor = '#3b4148';\n    event.target.querySelector('svg').style.color = '#838a91';\n  }\n\n  tap() {\n    this.deleteActiveIcon();\n    this.icon = null;\n    this.setState({\n      search: document.getElementById('create-app-window__icon-name').value.toLowerCase()\n    });\n  }\n\n  validate() {\n    const name = document.getElementById('app-name').value;\n    if (name.length === 0) { return { err: true, message: 'Введите имя приложения!' }; }\n\n    let downloadAvailable;\n    if (this.props.type !== 'clone') {\n      downloadAvailable = document.getElementById('app-download').checked;\n    } else { downloadAvailable = false; }\n\n    let color = document\n      .getElementById('create-app-window__colors')\n      .querySelector('input:checked');\n    if (color === null) { return { err: true, message: 'Выберите цвет иконки!' }; }\n    color = color.value;\n\n    let icon = this.icon;\n    if (this.icon === null) { return { err: true, message: 'Выберите значек иконки!' }; }\n    icon = icon.getAttribute('data-icon');\n\n    return { err: false, body: { name, downloadAvailable, color, icon } };\n  }\n\n  saveApp() {\n    let status = this.validate();\n    this.setState({ deleteConfirm: false });\n\n    let text = document.getElementById('create-app-window__err-text');\n    text.innerHtml = '';\n\n    if (status.err) {\n      text.innerText = status.message;\n      return;\n    }\n\n    text.style.color = '#3498db';\n    text.innerText = 'Сохранение ...';\n\n    document.getElementById('buttons').style.visibility = 'hidden';\n\n    let url = 'api/create_app';\n    if (this.props.modal.mode === 'set') {\n      url = '../api/change_app/settings';\n      status.body.id = this.props.id;\n    }\n    console.log(status);\n\n    /* send settings to the server */\n    const body = JSON.stringify(status.body);\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    }).then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n        text.style.color = '#2ecc71';\n        text.innerText = 'Сохранено!';\n\n        /* fetch new projects list */\n        this.props.fetchProjects();\n        this.closeWindow();\n      } else {\n        text.style.color = '#e74c3c';\n        text.innerText = 'Неизвестная ошибка :(';\n        document.getElementById('buttons').style.visibility = 'visible';\n      }\n    }).catch(err => {\n      text.style.color = '#e74c3c';\n      text.innerText = 'Ошибка запроса :(';\n      document.getElementById('buttons').style.visibility = 'visible';\n    });\n  }\n\n  deleteConfirm() {\n    let text = document.getElementById('create-app-window__err-text');\n    text.innerText = '';\n    this.setState({ deleteConfirm: true });\n    document.getElementById('delete-confirm').onclick = this.deleteApp;\n  }\n\n  deleteApp() {\n    console.log('delete');\n    this.setState({ deleteConfirm: false });\n\n    let text = document.getElementById('create-app-window__err-text');\n    text.style.color = '#3498db';\n    text.innerText = 'Удаление ...';\n\n    /* delete app */\n    const body = JSON.stringify({ id: this.props.id });\n    fetch('../api/delete_app', {\n      method: \"POST\",\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n      body\n    }).then(res => res.json()).then(body => {\n      if (body.status === 'ok') {\n\n        /* delete app settings */\n        let newUserSettings = JSON.parse( JSON.stringify(this.props.user.settings) );\n        newUserSettings = newUserSettings.filter(setting => setting.id !== this.props.id);\n        const settingsBody = JSON.stringify({ settings: newUserSettings });\n\n        fetch('../api/change_user', {\n          method: \"POST\",\n          headers: {\n            'Accept': 'application/json, text/plain, */*',\n            'Content-Type': 'application/json',\n          },\n          body: settingsBody\n        }).then(() => this.props.fetchUser());\n\n        /* fetch new projects list */\n        this.props.fetchProjects();\n        this.closeWindow();\n      } else {\n        text.style.color = '#e74c3c';\n        text.innerText = 'Неизвестная ошибка :(';\n        document.getElementById('buttons').style.visibility = 'visible';\n      }\n    }).catch(err => {\n      text.style.color = '#e74c3c';\n      text.innerText = 'Ошибка запроса :(';\n      document.getElementById('buttons').style.visibility = 'visible';\n    });\n  }\n}\n\nfunction mapStateToProps(store) {\n  return {\n    modal: store.projectsModal,\n    user: store.userData.user,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    switchModalState: (state, mode) => {\n      dispatch(switchModalState(state, mode))\n    },\n    fetchProjects: () => {\n      dispatch(fetchProjects())\n    },\n    fetchUser: () => {\n      dispatch(fetchUser())\n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateAppWindow);","export const SWITCH_MODAL_STATE  = 'SWITCH_MODAL_STATE';","/* React */\nimport React from 'react';\n\n/* Component */\nexport default class ProjectsWrap extends React.Component {\n  render() {\n    return (\n      <div className=\"modal-wrap\">\n          { this.props.for }\n      </div>\n    );\n  }\n}","export const CHANGE_APP_STATE = 'CHANGE_APP_STATE';","/* React */\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\n\n/* Component */\nexport default class TitleItem extends React.Component {\n\n  render() {\n    return (\n      <Link to={`/doc#${ this.props.to }`}\n            className={`title-item title-item_${ this.props.postfix }`}>\n        { this.props.title }\n      </Link>\n    )\n  }\n\n  componentDidMount() {\n\n  }\n}","/* React */\nimport React from 'react';\n\nimport TitleItem from '../title-item/TitleItem';\n\n/* Component */\nexport default class TitleWrap extends React.Component {\n\n  render() {\n    return <div className=\"title-wrap\">\n      <TitleItem title=\"Введение\" to=\"enter\"/>\n      <TitleItem title=\"Комнаты\" to=\"rooms\"/>\n      <TitleItem title=\"Приложения\" to=\"apps\"/>\n      <TitleItem title=\"Настройки\" to=\"settings\"/>\n      <TitleItem title=\"Класс App\" to=\"class-app\"/>\n      <TitleItem title=\"Эмулятор\" to=\"emulator\"/>\n      <TitleItem title=\"Пресеты\" to=\"presets\"/>\n      <TitleItem title=\"Конфигурация\" to=\"app-config\"/>\n      <TitleItem title=\"Своё приложение\" to=\"app-guide\"/>\n      <TitleItem title=\"Additional api\" to=\"additional-api\"/>\n      <TitleItem title=\"Http core api\" to=\"http-core-api\"/>\n      <TitleItem title=\"C++ код\" to=\"C-plus-plus-code\"/>\n    </div>\n  }\n\n  componentDidMount() {\n\n  }\n}","/* React */\nimport React from 'react';\n\nimport TitleWrap from '../title-wrap/TitleWrap';\nimport MainDoc from \"../main-doc/MainDoc\";\nimport Navbar from \"../../projects/navbar/Navbar\";\n\n/* Component */\nexport default class DocsPage extends React.Component {\n\n  render() {\n\n    if (this.props.mode === 'app') {\n      return <div className=\"doc-page-wrap doc-page-wrap_app-mode\">\n        <div className=\"doc-page doc-page_app-mode\">\n          <MainDoc/>\n        </div>\n      </div>\n    } else {\n      return <div className=\"doc-page-wrap\">\n          <Navbar path=\"./images/appex.svg\" />\n          <div className=\"doc-page\">\n            <TitleWrap/>\n            <MainDoc/>\n          </div>\n        </div>\n    }\n  }\n\n  componentDidMount() {\n\n  }\n}","/* React */\nimport React from 'react';\n\nimport CodeMirror from \"codemirror\";\nimport emmet from '@emmetio/codemirror-plugin';\nimport { changeProjects } from \"../../../actions/projectsActions\";\nimport { connect } from \"react-redux\";\n\nemmet(CodeMirror);\n\n/* Component */\nclass CodeEditor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.oldValue = '';\n    this.autocompleteSymbolsHTML = [/<\\//, /<\\w/];\n    this.autocompleteSymbolsCSS = [/[a-z]+/, /:\\s+/];\n    this.autocompleteSymbolsJS = [/undefined[a-z]+/, /\\s+[a-z]/, /[a-z]\\.+/];\n\n    this.linesLength = [];\n    this.awaitKey = false;\n\n    // bind\n    this.autocomplete = this.autocomplete.bind(this);\n    this.keydown = this.keydown.bind(this);\n    this.save = this.save.bind(this);\n  }\n\n  render() {\n    return (\n      <div className={`code-editor code-editor-${ this.props.type }`} id={`${ this.props.id }-wrap`}>\n        <div className=\"code-editor__text\">{ this.props.message }</div>\n        <textarea name=\"code\" id={ this.props.id }/>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n\n    let keys = {'Ctrl-Space': 'autocomplete'};\n    if (this.props.type === 'htmlembedded') {\n      keys = {\n        'Tab': 'emmetExpandAbbreviation',\n        'Esc': 'emmetResetAbbreviation',\n        'Enter': 'emmetInsertLineBreak',\n        'Ctrl-Space': 'autocomplete'\n      }\n    }\n\n    let minimapSettings = false;\n    if (this.props.mode === 'one') {\n      minimapSettings = { scale: 6 };\n    }\n\n    this.editor = CodeMirror.fromTextArea(document.getElementById( this.props.id ), {\n\n      /* CodeMirror settings */\n      lineNumbers: true,\n      lineWrapping: true,\n      matchBrackets: true,\n      mode: this.props.type,\n      indentUnit: 4,\n      theme: 'darcula',\n      extraKeys: keys,\n      minimap: minimapSettings,\n\n      /* emmet settings */\n      emmet: {\n        preview: false,\n      },\n    });\n\n    this.editor.on('change', this.autocomplete);\n    this.editor.setValue( this.props.code );\n\n    document.addEventListener('keydown', this.keydown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.keydown);\n  }\n\n  keydown (event) {\n    if ((event.ctrlKey && event.code === 'KeyS') ||\n        (event.altKey && (event.code === 'KeyR' || event.code === 'KeyU' || event.code === 'KeyV'))) {\n      this.save();\n      event.preventDefault();\n      return false;\n    }\n    if (event.ctrlKey && event.code === 'KeyD') {\n      this.editor.setValue( this.props.code );\n      event.preventDefault();\n      return false;\n    }\n  }\n\n  save() {\n    if (this.props.projectsIsFetching) { return; }\n\n    let appNumber;\n    this.props.projects.map((project, index) => {\n      if (this.props.appId === project.id) {\n        appNumber = index;\n        return;\n      }\n    });\n    let value = this.editor.getValue();\n    let changedProjects = this.props.projects;\n\n    switch (this.props.type) {\n      case 'htmlembedded':\n        changedProjects[appNumber].code.html = value;\n        break;\n      case 'css':\n        changedProjects[appNumber].code.css = value;\n        break;\n      case 'javascript':\n        changedProjects[appNumber].code.js = value;\n        break;\n      default:\n        console.error('save error! ( 97 )');\n    }\n\n    this.props.changeProjects( changedProjects.slice() );\n\n  }\n\n  autocomplete() {\n\n    /* editor value */\n    let value = this.editor.getValue();\n\n    /* find symbol before cursor */\n    const line = this.editor.doc.getCursor().line;\n    const ch = this.editor.doc.getCursor().ch;\n\n    if (!this.linesLength[line]) {\n      this.linesLength[line] = value.split('\\n')[line].length;\n    }\n\n    let findChar = value.split('\\n')[line];\n    findChar = findChar[ch - 2] + findChar[ch - 1];\n\n    if (value === this.oldValue) { return; }\n    if (value.split('\\n')[line].length < this.linesLength[line]) {\n      this.linesLength[line] = value.split('\\n')[line].length;\n      return;\n    }\n\n    /* autocomplete html */\n    if (this.props.type === 'htmlembedded') {\n      this.autocompleteSymbolsHTML.forEach(exp => {\n        if (exp.test(findChar)) { this.editor.execCommand(\"autocomplete\"); }\n      });\n    }\n\n    /* autocomplete css */\n    if (this.props.type === 'css') {\n      if (/{+/.test(findChar)) { return; }\n      if (/;+/.test(findChar)) { return; }\n\n      this.autocompleteSymbolsCSS.forEach(exp => {\n        if (exp.test(findChar)) { this.editor.execCommand(\"autocomplete\"); }\n      });\n    }\n\n    /* autocomplete js */\n    if (this.props.type === 'javascript') {\n      this.autocompleteSymbolsJS.forEach(exp => {\n        if (exp.test(findChar)) { this.editor.execCommand(\"autocomplete\"); }\n      });\n    }\n\n    if (value !== this.oldValue) { this.noAutocompleteFlag = false; }\n    this.oldValue = value;\n    this.linesLength[line] = value.split('\\n')[line].length;\n  }\n}\n\nfunction mapStateToProps(store) {\n  return {\n    projects: store.projects.data,\n    projectsIsFetching: store.projects.isFetching,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeProjects: ( changedProjects ) => {\n      dispatch(changeProjects( changedProjects ))\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CodeEditor);","/* React */\nimport React from 'react';\n\nimport { fetchUser } from \"../../actions/userActions\";\nimport { fetchProjects } from \"../../actions/projectsActions\";\nimport { fetchRooms } from \"../../actions/roomsActions\";\n\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\n\n/* Component */\nclass PrivateRoute extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n\n    let component = (\n      <div className=\"loading-wrap\">\n        <div className=\"loading\">\n          <img src=\"/images/appex.svg\" alt=\"appex\" className=\"loading__img\"/>\n        </div>\n      </div>\n    );\n\n    let status = ['loading', 'loading', 'loading'];\n\n    /* check user authentication */\n    if (!this.props.user && !this.props.isFetching) {\n      this.props.fetchUser();\n      return component;\n    }\n    if (this.props.status !== 'ok' && this.props.status !== 'loading' || this.props.error) {\n      component = <Redirect to={{ pathname: \"/sign_in\" }}/>;\n      status[0] = 'err';\n    }\n\n    if (this.props.user && this.props.status === 'ok' && !this.props.isFetching && !this.props.error) {\n      status[0] = 'ok';\n    }\n\n\n\n    /* projects */\n    process.nextTick(() => {\n      if (!this.props.projectsFulfilled && !this.props.projectsIsFetching) { this.props.fetchProjects() }\n    });\n\n    if (this.props.projectsError) {\n      status[1] = 'err';\n    } else if (this.props.projectsFulfilled) { status[1] = 'ok'; }\n\n\n\n    /* rooms */\n    process.nextTick(() => {\n      if (!this.props.roomsFulfilled && !this.props.roomsIsFetching) { this.props.fetchRooms() }\n    });\n\n    if (this.props.roomsError) {\n      status[2] = 'err';\n    } else if (this.props.roomsFulfilled) { status[2] = 'ok'; }\n\n\n\n    /* checking status */\n    let ok = true;\n    status.forEach(code => {\n      if (code !== 'ok') { ok = false; }\n    });\n\n    if (ok) { component = this.props.children; }\n\n    return component;\n  }\n}\n\nfunction mapStateToProps(store) {\n  return {\n\n    /* user */\n    user: store.userData.user,\n    isFetching: store.userData.isFetching,\n    status: store.userData.status,\n    error: store.userData.error,\n\n    /* projects */\n    projects: store.projects.data,\n    projectsIsFetching: store.projects.isFetching,\n    projectsError: store.projects.error,\n    projectsFulfilled: store.projects.fulfilled,\n\n    /* rooms */\n    rooms: store.rooms.data,\n    roomsIsFetching: store.rooms.isFetching,\n    roomsError: store.rooms.error,\n    roomsFulfilled: store.rooms.fulfilled,\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchUser: () => {\n      dispatch(fetchUser())\n    },\n    fetchProjects: () => {\n      dispatch(fetchProjects())\n    },\n    fetchRooms: () => {\n      dispatch(fetchRooms())\n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PrivateRoute);","import React from 'react';\n\n/* Component */\nexport default class Error404 extends React.Component {\n  render() {\n    return (\n      <div className=\"error-404\">\n        <div>\n          <div className=\"error-404__message\">404</div>\n          <span className=\"error-404__text\">\n            В бескрайних просторах вселенной не нашлось приложения с таким id :(\n          </span>\n        </div>\n      </div>\n    );\n  }\n}","/* React */\nimport React from 'react';\nimport { changeAppState } from \"../../actions/appStateActions\";\nimport { connect } from \"react-redux\";\nimport { App } from \"../../socketCore\";\nimport * as Icons from \"@fortawesome/free-solid-svg-icons\";\n\n/* Component */\nexport default class Interpreter extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n\n    /* render app */\n    process.nextTick(() => this.renderApp(this.props.user));\n\n    /* render app wrap */\n    return <div className=\"interpreter\" id={ this.props.id }/>;\n  }\n\n  renderApp() {\n\n    /*\n\n      Appex interpreter v1 by https://github.com/andaran\n\n    */\n\n    /*   ---==== Parse presets ====---   */\n\n    /* render mode */\n    let appSourceCode;\n    this.props.devMode\n      ? appSourceCode = this.props.app.code\n      : appSourceCode = this.props.app.releaseCode;\n\n    /* parsing */\n    let html = appSourceCode.html;\n\n    html = html.split(']]');\n    html = html.map(item => {\n      return {\n        code: item.split('[[')[0],\n        preset: item.split('[[')[1],\n      }\n    });\n\n    /* add presets */\n    html = html.map(item => {\n\n      /* if preset is being */\n      if (item.preset !== undefined) {\n        const presetText = item.preset.replaceAll('\\n', '');\n\n        /* parse type */\n        let type;\n        try {\n          type = presetText.match(/^\\s*\\w+\\s/g)[0]\n            .replaceAll(' ', '')\n            .toLowerCase();\n        } catch(e) {\n          return { code: item.code, preset: false };\n        }\n\n        /* parse args */\n        let args;\n        try {\n          args = presetText.match(/\\w+\\s?=\"[^\"]+\"/g);\n        } catch (e) {\n          args = null;\n        }\n\n        /* if no args */\n        if (args === null) { return { code: item.code, preset: { type, args: [] } }; }\n\n        /* parse arguments */\n        args = args.map(item => {\n          let name = item.match(/^\\w+/g)[0];\n          let value = item.match(/\".*\"/g)[0];\n          value = value.substring(1, value.length - 1);\n          return { name, value }\n        });\n\n        return { code: item.code, preset: { type, args } };\n      } else {\n        return { code: item.code, preset: false };\n      }\n    });\n\n\n\n    /*   ---==== Add presets ====---   */\n\n    let finallyCode = '';\n    let promises = [];\n\n    /* fetch presets html */\n    for (let item of html) {\n\n      /* if preset is here  */\n      if (item.preset) {\n\n        /* switch preset type */\n        switch (item.preset.type) {\n          case 'icon':\n\n            /* find icon or return promise with code without preset */\n            const iconArgs = item.preset.args.find(arg => arg.name === 'name');\n            if (iconArgs === undefined) {\n              promises.push(new Promise(resolve => resolve( item.code )));\n              break;\n            }\n\n            /* if icon not found, return promise with code without preset */\n            const icon = Icons[iconArgs.value];\n            if (icon === undefined) {\n              promises.push(new Promise(resolve => resolve( item.code )));\n              break;\n            }\n\n            /* set new args */\n            const args = [\n              { name: 'name', value: icon.iconName },\n              { name: 'vb1', value: icon.icon[0] },\n              { name: 'vb2', value: icon.icon[1] },\n              { name: 'd', value: icon.icon[4] },\n              { name: 'prefix', value: icon.prefix },\n            ];\n            item.preset.args = args;\n\n          default:\n            promises.push(fetch(`../presets/${item.preset.type}.hbs`)\n              .then(response => response.text())\n              .then(text => {\n                let presetHtml = text;\n                item.preset.args.forEach(arg => {\n                  presetHtml = presetHtml.replaceAll(`{{ ${arg.name} }}`, arg.value);\n                });\n\n                /* add this html to another code */\n                return item.code + presetHtml;\n              }));\n            break;\n        }\n\n      /* else if preset is empty  */\n      } else {\n\n        /* send promise with code without preset */\n        promises.push(new Promise(resolve => resolve( item.code )));\n      }\n    }\n\n    Promise.all(promises).then((codeArr) => {\n\n      /* concat everything together */\n      codeArr.forEach((blockOfCode) => {\n        finallyCode += blockOfCode;\n      });\n\n      /* create code variable with styles */\n      let code = `<div id=\"app\">\\n<style>\\n ${ appSourceCode.css } \\n</style>\\n`;\n\n      /* add main code */\n      code += `${ finallyCode } \\n</div>`;\n\n      /* render all of this !!! */\n      document\n        .getElementById( this.props.id )\n        .innerHTML = code;\n\n\n\n      /*   ---==== play JS ====---   */\n\n      /* if no user */\n      if (!this.props.user) { return; }\n\n      /* find room settings */\n      const id = this.props.appId;\n      const settings = this.props.user.settings.find(elem => elem.id === id);\n\n      /* set socketCore class */\n      const app = new App(this.props.app, settings);\n      app.init()\n\n      /* start! */\n      try {\n        this.appJS = Function( 'App', appSourceCode.js );\n        this.appJS(app);\n      } catch(e) { console.error('Ошибка запуска приложения!! \\n\\n', e); }\n    });\n  }\n}","/* React */\nimport React from 'react';\n\nimport DocItem from \"../doc-item/DocItem\";\nimport Image from \"../image/Image\";\nimport Code from \"../code/Code\";\n\n/* Component */\nexport default class MainDoc extends React.Component {\n\n  render() {\n\n    const codes = [\n`/* начальное состояние */\nApp.state = {\n    status: false,\n}`,\n`/* настройки */\nApp.settings = {\n    awaitResponse: true,\n}`,`/* обновление состояния */\nApp.on('update', state => {\n    console.log('new state:', state);\n});`,`/* ошибка */\nApp.on('err', err => {\n    console.log('err:', err);\n});`,`App.send({ status: !App.state.status });`,\n`App.start();`,\n`[[Button\n  background=\"#48dbfb\"\n  size=\"md\"  <!-- sm - 30px, md - 50px, lg - 70px, -->\n  text=\"кнопка\"\n  id=\"button\"\n]]`, `[[Switch id=\"switch\"]]`,\n`[[Icon name=\"faPowerOff\"]]`, `<!-- обертка приложения -->\n<div class=\"app-wrap\">\n\n    <!-- кружок за кнопкой -->\n    <div class=\"app-button-wrap\" id=\"app-button-wrap\">\n\n        <!-- кнопка -->\n        <div class=\"app-button\" id=\"app-button\">\n\n            <!-- иконка -->\n            [[Icon name=\"faPowerOff\"]]\n        </div>\n    </div>\n</div>\n`, `/* обертка приложения */\n.app-wrap {\n    height: 100vh;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n/* кружок за кнопкой */\n.app-button-wrap {\n    width: 120px;\n    height: 120px;\n    background: #c8d6e5;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    opacity: 0.8;\n    transition: .5s;\n}\n\n/* кнопка */\n.app-button {\n    width: 110px;\n    height: 110px;\n    background: white;\n    border-radius: 50%;\n    color: #c8d6e5;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 32px;\n    transition: .1s;\n}\n\n/* кнопка при клике */\n.app-button:active {\n    transform: scale(.98);\n}\n`, `/* начальное состояние */\nApp.state = {\n  status: true,\n}\n\n/* настройки */\nApp.settings = {\n  awaitResponse: true,\n}`, `/* ищем кнопку и фон */\nconst button = document.getElementById('app-button');\nconst wrap = document.getElementById('app-button-wrap');\n\n/* вешаем слушатели событий */\nbutton.addEventListener('click', () => {\n  App.send({ status: !App.state.status });\n  window.navigator.vibrate(40);\n});`, `/* обновление состояния */\nApp.on('update', state => {\n  if (state.status) {\n    button.style.color = '#00d2d3';\n    wrap.style.backgroundColor = '#00d2d3';\n  } else {\n    button.style.color = '#c8d6e5';\n    wrap.style.backgroundColor = '#c8d6e5';\n  }\n});`, `/* запускаем приложение */\nApp.start();`,`\nApp.invertProperty('status', {\n  roomId: '123',\n  roomPass: '123'\n});\n`, `\nApp.changeNumericProperty('volume', -10, { \n  roomId: '123', \n  roomPass: '123' \n});\n`,`\n{\n    \"roomId\": \"123\",\n    \"roomPass\": \"123\",\n    \"params\": {\n        \"status\": true\n    }\n}\n`,`\n{ \n    \"roomId\": \"123\", \n    \"roomPass\": \"123\",\n    \"property\": \"status\"\n}\n`,`\n{ \n    \"roomId\": \"123\", \n    \"roomPass\": \"123\",\n    \"property\": \"volume\",\n    \"value\": -10\n}\n`,`\n<div class=\"app-wrap\"\n     data-role=\"config\">\n`,`\n<div class=\"app-wrap\"\n     data-role=\"config\"\n     data-theme=\"rgb(239, 239, 239)\">\n`\n    ]\n\n    const R = '}';\n    const L = '{';\n\n    return (\n      <div className=\"doc\">\n        <DocItem title=\"Введение\" id=\"enter\">\n          <Image name=\"appex.png\"/>\n          <h5>Добро пожаловать в appex!</h5>\n          Данная система умного дома ориентированна на создание отдельных приложений под каждую задачу,\n          что позволяет добавлять и убирать различные устройства или\n          сети устройств без потери функциональности и максимально удобно.\n          <br/> <br/>\n          Приложения работают вместе с устройствами в отдельных комнатах.\n          В отличие от других решений, здесь приложения создаются на html/css/js.\n          Для упрощения предусмотренны готовые пресеты.\n          Подробнее о них будет написано далее.\n          <br/> <br/>\n          Для удобства приложения можно делить по группам. Это могут быть комнаты в квартире,\n          разные дома или же просто разбиение по задачам. В каждую группу можно добавлять виджеты.\n          Они показывают различные данные для группы - например температуру в комнате.\n\n        </DocItem>\n        <DocItem title=\"Комнаты\" id=\"rooms\">\n          Для удобства взаимодействия приложение и устройства, управляемые им, обьединяются в одну комнату.\n          <Image name=\"rooms.png\"/>\n          ID комнаты назначается системой, а имя и пароль можно поменять. ID и паролем комнаты можно делиться с другими пользователями, тогда они тоже смогут управлять Вашим устойством. Данные комнаты вводятся либо при созданнии приложения в меню редкатора кода, либо во вкладке 'настройки приложений' в настройках системы.\n          <Image name=\"app_settings.png\"/>\n          Если не указать приложению данных комнаты или указать их с ошибкой, то в консоли браузера появится соответствующая ошибка.\n        </DocItem>\n        <DocItem title=\"Приложения\" id=\"apps\">\n         Приложения и устройства общаются с сервером с помощью технологии websockets. Данные передаются в формате json. Парсить его на C++ не слишком удобно, но это необходимо для обеспесения всей функциональности. Внутри приложения связь с сервером происходит через вшитый в систему экземпляр класса App, на arduino или esp через библиотеки 'WebSocketsClient.h' и 'SocketIOclient.h' <br/><br/>\n          В каждом приложении код хранится в 2-ух экземплярах: текущий и код последнего релиза. На эмуляторе открывается текущий код, а на устройствах пользователей код релиза. Это дает возможность разрабатывать обновления для приложений не ломая их.\n        </DocItem>\n        <DocItem title=\"Настройки\" id=\"settings\">\n          В системе достаточно много всяких настроек. Это инструкция по некоторым из них.\n          <Image name=\"settings.png\"/>\n\n          <h5>Настройки приложений</h5>\n          <mark>id и пароль комнаты</mark> - комната, в которой работает приложение.\n          <br/>\n          <mark>группа</mark> - добавляет приложение в группу с указанным названием.\n          <Image name=\"app_settings.png\"/>\n\n          <h5>Настройки виджетов</h5>\n          <Image name=\"widget.png\"/>\n          Виджеты - удобный способ быстро узнать информацию о каком-нибудь показателе\n          в комнате. Вот как они настраиваются: <br/> <br/>\n          <mark>id и пароль комнаты</mark> - комната, в которой работает виджет.\n          <br/>\n          <mark>группа</mark> - добавляет виджет в группу с указанным названием.\n          <br/>\n          <mark>свойство</mark> - указывает, какое свойство объекта состояния показывать.\n          В случае с приложением-выключателем, которое напишем далее, можно указать св-во\n          status. Тогда виджет будет показывать статус выключателя.\n          <br/>\n          <mark>значок</mark> - значок из коллекции <a href=\"https://fontawesome.com/\">fontawesome</a>.\n          Указывается в camelCase. Например: faThermometerHalf.\n          <br/>\n          <mark>наименование</mark> - в чем измерять показания. Можно не указывать.\n          <Image name=\"widget_settings.png\"/>\n\n          <h5>Настройки групп</h5>\n          По умолчанию под названием группы написана фраза: \"Пользовательская группа\".\n          Но её можно поменять: <br/><br/>\n          <mark>имя группы</mark> - то, что указанно в пункте \"группа\" у виджетов и приложений.\n          <br/>\n          <mark>описание</mark> - описание группы вместо стандартного текста.\n          <Image name=\"group_settings.png\"/>\n\n        </DocItem>\n        <DocItem title=\"Класс App\" id=\"class-app\">\n          Всё взаимодействие с сервером внутри приложения происходит внутри экземпляра этого класса. Но для его нормальной работы нужна настройка.\n          <h5>1. Начальное состояние</h5>\n          Для старта приложения необходимо указать ему все используемые параметры и их начальные состояния. Они используются для инициализации компонентов приложения и отсылаются на сервер при его старте. <mark>Все не указанные парамеры будут удалены из комнаты, внутри которой работает приложение.</mark>\n          <Code>\n            { codes[0] }\n          </Code>\n          <h5>2. Настройки</h5>\n          Пока что есть только одна настройка: 'awaitResponse'. Показывает, ждать ли ответа с сервера перед обновлением состояния.\n          <Code>\n            { codes[1] }\n          </Code>\n          <h5>3. События</h5>\n          У App есть 2 события: 'update' и 'err'. Подписавшись на них, Вы можете получать обновления состояния и сообщения об ошибках.\n          <Code>\n            { codes[2] }\n          </Code>\n          <Code>\n            { codes[3] }\n          </Code>\n          Вмете с новыми параметрами в объекте state также будет присутствовать свойство 'lastChange', в котором находится время последнего изменения состояния в миллисекундах.\n          <h5>4. Отправка состояния</h5>\n          Для отправки нового состояния на сервер существует метод 'send'. В аргументах он принемает изменившиеся параметры. <mark>Крайне рекомендуется использовать обьект состояния без других вложенных обьектов.</mark> Это облегчит Вам парсинг json, а также улучшит работу алгоритма очистки мусора из комнат.\n          <Code>\n            { codes[4] }\n          </Code>\n          Отправлять данные можно <mark>не более 600 раз в минуту.</mark> При достижении порога до конца минуты при попытке послать параметры будет приходить ошибка 'TooManyRequests'.\n          <h5>5. Запуск приложения</h5>\n          Теперь можно запустить приложение.\n          <Code>\n            { codes[5] }\n          </Code>\n          В этот метод не передается никаких аргументов. Вызывайте его в самом конце кода.\n        </DocItem>\n        <DocItem title=\"Эмулятор\" id=\"emulator\">\n          Для удобной разработки приложений в редакторе кода есть эмулятор. Он перезагружается после каждого сохранения. Логи работы приложения будут выводится в консоль браузера.\n          <Image name=\"emulator.png\"/>\n          Эмулятор можно открыть в отдельном окне и переместить, например, на второй монитор. Также присутсвует возможность запускать последний код приложения на любом устройстве. <mark>Для этого следует перейти в настройки -> Об аккаунте -> Включить режим разработчика.</mark> В этом режиме Вы также будете видеть последние версии других приложений. Данная настройка сохраняется только для устройства, на котором была включена.\n        </DocItem>\n        <DocItem title=\"Пресеты\" id=\"presets\">\n          Для более быстрой разработки приложения предусмотрены пресеты различных компонентов. Для их использования следует добавить в html верстку строку вида <mark>[[Preset param1=\"1\" param2=\"2\"]]</mark>. Все параметры обязательны к указанию. Вот список существующих на данный момент пресетов:\n          <h5>Кнопка</h5>\n          Самая базовая кнопка из одного блока.\n          <Code>\n            { codes[6] }\n          </Code>\n          <Image name=\"button.png\"/>\n          <h5>Выключатель</h5>\n          Надстройка над чекбоксом.\n          <Code>\n            { codes[7] }\n          </Code>\n          <Image name=\"switch.png\"/>\n          <h5>Иконки</h5>\n          Иконки из набора fontawesome. Названия пишутся в camelCase.\n          <Code>\n            { codes[8] }\n          </Code>\n          <Image name=\"icon.png\"/>\n          В будущем количество пресетов будет увеличиваться.\n        </DocItem>\n        <DocItem title=\"Конфигурация приложения\" id=\"app-config\">\n          Приложение конфигурируется в любом блоке его верстки.\n          Чтобы обозначить блок как конфигурационный, нужно добавить в него\n          атрибут <mark>data-role</mark>  со значением <mark>config</mark>.\n\n          <Code>\n            { codes[20] }\n          </Code>\n\n          <h5>Цвет статус бара</h5>\n          Можно настроить подходящий цвет статус бара приложения под его фон.\n          Для этого добавим в блок конфигурации атрибут <mark>data-theme</mark> с\n          нужным цветом или значением <mark>auto</mark>, которое назначит цвет фона\n          системы.\n\n          <Code>\n            { codes[21] }\n          </Code>\n        </DocItem>\n        <DocItem title=\"Своё приложение\" id=\"app-guide\">\n          Чтобы всё встало на свои места, разработаем с нуля стартовое приложение с выключателем.\n          Сначала создадим приложение. Задаем название и иконку, включаем возможность клонирования.\n          <Image name=\"create.png\"/>\n          Теперь добавим разметку приложения. По центру кнопки разместим иконку.\n          <Code>\n            { codes[9] }\n          </Code>\n          На эмуляторе пока ничего дельного не видно. Напишем стили для каждого элемента.\n          <Code>\n            { codes[10] }\n          </Code>\n          Теперь перед нами появилась кнопка. Сделаем для неё логику. Начальное состояние и настройки оставим прежними.\n          <Code>\n            { codes[11] }\n          </Code>\n          Найдем необходимые элементы. Повесим слушатель события 'click' на кнопку. При клике меняем состояние кнопки на противоположное, а также даем виброотклик в течение 40 миллисекунд.\n          <Code>\n            { codes[12] }\n          </Code>\n          Теперь подписываемся на событие 'update'. Во время обновления смотрим на новое состояние: если кнопка включена, то делаем её светлого сине-зеленого цвета, в противном случае красим в серый.\n          <Code>\n            { codes[13] }\n          </Code>\n          С написанием кода почти закончили. Осталось запустить приложение. Код целиком можно посмотреть в Ваших проектах, это приложение добавится туда при регистрации.\n          <Code>\n            { codes[14] }\n          </Code>\n          Подключаемся к комнате.\n          <Image name=\"connect.png\"/>\n          Такая красота получилась. Теперь можно написать код для esp8266, например, прикрутить туда реле и управлять светом.\n          <Image name=\"app.png\"/>\n        </DocItem>\n        <DocItem title=\"Additional api\" id=\"additional-api\">\n          Дополнительное api нужно для изменения состояния, когда Вам не известны значения свойств обьекта state\n          в какой-либо комнате.\n          <h5>invertProperty</h5>\n          Данный метод инвертирует булевое свойство.\n          <Code>\n            { codes[15] }\n          </Code>\n          Если не передать обьект с логином и паролем комнаты, то запрос будет совершен в текущую комнату.\n          <h5>changeNumericProperty</h5>\n          Данный метод прибавляет переданное значение к числовому свойству. В примере ниже громкость уменьшается на 10.\n          <Code>\n            { codes[16] }\n          </Code>\n          Если не передать обьект с логином и паролем комнаты, то запрос будет совершен в текущую комнату.\n        </DocItem>\n        <DocItem title=\"Http core api\" id=\"http-core-api\">\n          Http api может использоваться для голосовых ассистентов или иных случаев, когда не требуется постоянная\n          связь с сервером. <mark>Запрос выполняется методом POST, параметры передаются в JSON.</mark>\n          <h5>https://appex-system.ru/core_api/update_state</h5>\n          <Code>\n            { codes[17] }\n          </Code>\n          <h5>https://appex-system.ru/core_api/invert_property</h5>\n          <Code>\n            { codes[18] }\n          </Code>\n          <h5>https://appex-system.ru/core_api/change_numeric_property</h5>\n          <Code>\n            { codes[19] }\n          </Code>\n          <h5>https://appex-system.ru/core_api/get_property_value</h5>\n          Возвращает значение свойства в JSON в \"value\".\n          <Code>\n            { codes[18] }\n          </Code>\n        </DocItem>\n        <DocItem title=\"С++ код\" id=\"C-plus-plus-code\">\n          Напишем код для esp8266. Плата будет реагировать на нажатие кнопки.\n          <h5>Код длинный. Для удобства его можно <a href=\"./files/Relay.ino\" download=\"\" title=\"\">скачать.</a></h5>\n        </DocItem>\n      </div>\n    );\n\n  }\n\n  componentDidMount() {\n\n    const buttonItems = document.querySelectorAll('.title-item');\n\n    for (let buttonItem of buttonItems) {\n      buttonItem.addEventListener('click', (event) => this.move());\n    }\n\n    this.move();\n  }\n\n  componentWillUnmount() {\n\n  }\n\n  move() {\n    process.nextTick(() => {\n\n      /* scroll to top */\n      const id = window.location.hash.substring(1);\n      if (!id) { return; }\n\n      const wrap = document.querySelector('.doc');\n      wrap.scroll(0, 0);\n\n      /* set scroll size */\n      const block = document.getElementById(id);\n      const cords = block.getBoundingClientRect();\n      const wrapTop = wrap.getBoundingClientRect().top;\n      const scroll = cords.top - wrapTop;\n\n      /* scroll to block */\n      wrap.scroll(0, scroll);\n    });\n  }\n}"],"sourceRoot":""}